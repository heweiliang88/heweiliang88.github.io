<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ä»ä½ çš„å…¨ä¸–ç•Œè·¯è¿‡</title>
  
  <subtitle>ä¸–ç•Œå¾ˆæš—ï¼Œä½†æ˜¯ä½ æ¥äº†</subtitle>
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2022-10-18T04:35:38.000Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>è®°ä½</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>(tool)Macä½¿ç”¨</title>
    <link href="http://example.com/2022/10/18/Mac/"/>
    <id>http://example.com/2022/10/18/Mac/</id>
    <published>2022-10-18T04:36:02.922Z</published>
    <updated>2022-10-18T04:35:38.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="Macå¿«æ·é”®"><a href="#Macå¿«æ·é”®" class="headerlink" title="Macå¿«æ·é”®"></a>Macå¿«æ·é”®</h2><ul><li>æˆªå›¾  Command - [control] - shift - 4 - [Space]</li><li>Command +  Hï¼ˆHideï¼‰ M(Small)  Option + /H  Tab   ` <ul><li>Command + control + F å…¨å±   Command + option +m  æœ€å°åŒ–å½“å‰ç¨‹åºçš„æ‰€æœ‰çª—å£</li></ul></li><li>å¤åˆ¶ æ— æ ¼å¼  Commandï¼‹Shiftï¼‹V</li><li>å‰ªè´´  Command+C  Commandï¼‹Optionï¼‹V</li><li>åˆ é™¤   Command + Backspace   Command + Delete  åˆ é™¤  æ¸…ç©ºåºŸçº¸ç¯“  Command + shift + Backspace  Command + Delete + Shift  æ¸…ç©ºåƒåœ¾æ¡¶</li><li>å¤åˆ¶è·¯å¾„ Command</li><li>Command  + D å¤åˆ¶   J æ˜¾ç¤º   ä¸Š  è¿”å›ä¸Šä¸€çº§ç›®å½• ä¸‹  è¿›å…¥ä¸€å±‚/æ‰“å¼€æ‰€é€‰é¡¹   [ ]  å‰è¿›å›é€€   . è®¾ç½®</li><li>Shift â€“ Command â€“  +  . éšè—æ–‡ä»¶   A (åº”ç”¨ç¨‹åº App)   H (ç”¨æˆ·)  C(ç”µè„‘)  D(æ¡Œé¢)  F(æœ€è¿‘æ–‡ä»¶)   G ï¼ˆå‰å¾€æ–‡ä»¶å¤¹ï¼‰  L  (ä¸‹è½½)</li><li>æ’¤é”€ Command   Z</li><li>sudo killall -HUP mDNSResponder</li><li>ipconfig /flushdns</li><li>Mac å£çº¸ <code>/System/Library/Desktop Pictures</code></li></ul><p>Macå·¥å…·</p><ul><li>brew</li><li>curl</li><li>mtrğŸ“•</li></ul><p>å®‰è£…è½¯ä»¶</p><ul><li>macOS ä¸å…è®¸æœªçŸ¥æ¥æºå¼€å‘è€…çš„åº”ç”¨<ul><li><code>sudo spctl --master-disable</code>  å®‰å…¨æ€§ä¸éšç§â€   å…è®¸â€œä»»ä½•æ¥æº</li><li>ç”¨ Finder æ‰¾åˆ°åº”ç”¨ç¨‹åºï¼Œç”¨å³é”®èœå•æ‰“å¼€</li></ul></li></ul><h2 id="Macç¯å¢ƒå˜é‡è®¾ç½®"><a href="#Macç¯å¢ƒå˜é‡è®¾ç½®" class="headerlink" title="Macç¯å¢ƒå˜é‡è®¾ç½®"></a>Macç¯å¢ƒå˜é‡è®¾ç½®</h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">zsh --vesion<br>cat /etc/shells <br></code></pre></td></tr></tbody></table></figure><p>bash</p><ul><li><code>/etc/profile  &gt; /etc/paths å…¨å±€  &gt;  ~/.bash_profile ç”¨æˆ·  &gt;  ~/.bash_login  &gt;  ~/.profile ~/.bashrc</code><ul><li><code>/etc/profile ä¸ /etc/paths ç³»ç»Ÿçº§åˆ«ç¯å¢ƒå˜é‡</code><ul><li><code>/etc/paths</code>  å…¨å±€é…ç½®</li><li><code>/etc/profile </code>  å…¨å±€ï¼ˆå…¬æœ‰ï¼‰é…ç½®</li></ul></li><li><code>~/.bash_profile  &gt;  ~/.bash_login  &gt;  ~/.profile  &gt; ~/.bashrc ç”¨æˆ·çº§åˆ«ç¯å¢ƒå˜é‡</code><ul><li>``~/.echo â€˜PATH=â€$PATH:./node_modules/.binâ€â€˜ &gt;&gt; ~/.profile` å½“å‰ç”¨æˆ·ç”Ÿæ•ˆ  è¦é‡å¯  /.bash_profileæ–‡ä»¶å­˜åœ¨ï¼Œåˆ™åé¢çš„å‡ ä¸ªæ–‡ä»¶å°±ä¼šè¢«å¿½ç•¥ä¸è¯»äº†</li><li>``~/.profile`  ä¸ºç³»ç»Ÿçš„æ¯ä¸ªç”¨æˆ·è®¾ç½®ç¯å¢ƒä¿¡æ¯ï¼ˆç™»é™†æ—¶æ‰§è¡Œï¼‰</li><li><code> ~/.bashrc</code>  ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ä¸ç”¨é‡å¯ï¼Œé‡æ–°æ‰“å¼€ä¸€ä¸ªbashå³å¯ç”Ÿæ•ˆ</li></ul></li></ul></li><li>ç”¨æ³•<ul><li>è®¾ç½®å‘½ä»¤åˆ«å</li><li>è®¾ç½®è‡ªå®šä¹‰æŒ‡ä»¤æ“ä½œ</li></ul></li></ul><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> PATH=<span class="hljs-variable">$PATH</span>:&lt;PATH 1&gt;:&lt;PATH 2&gt;:&lt;PATH 3&gt;:------:&lt;PATH N&gt;<br>// å…¨å±€é…ç½®<br><span class="hljs-built_in">touch</span> /etc/paths.d/xxxfile<br>vim xxxfile<br>/usr/local/xxx/bin  //å¯åŠ¨è·¯å¾„<br>// ç³»ç»Ÿæ–‡ä»¶<br>vim ~/.bash_profile   //  ./.profile <br><span class="hljs-built_in">source</span> .bash_profile<br>// åˆ«å è®¾ç½®å¸¸ç”¨ç¼©å†™  <br><span class="hljs-built_in">alias</span> xx = <span class="hljs-string">'xxxx'</span><br><span class="hljs-built_in">echo</span> <span class="hljs-variable">$PATH</span> // æŸ¥çœ‹Path<br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">'PATH="$PATH:./node_modules/.bin"'</span> &gt;&gt; ~/.bash_profile<br><br>// mac .bash_profile <br><span class="hljs-built_in">alias</span> ll=<span class="hljs-string">'ls -l'</span> <span class="hljs-comment"># åˆ«å</span><br><span class="hljs-built_in">export</span> PATH=/opt/local/bin:/opt/local/sbin:<span class="hljs-variable">$PATH</span> <span class="hljs-comment"># è®¾ç½®path</span><br><br>// ç”¨Typoraæ‰“å¼€Hexoåšå®¢æ–‡ç« <br><span class="hljs-built_in">alias</span> note=<span class="hljs-string">'cd /Users/administrator/Workspace/Blog/source/_posts'</span><br><span class="hljs-built_in">alias</span> typora=<span class="hljs-string">'note &amp;&amp; open -a /Applications/Typora.app'</span><br>// ä¸Šä¼ Blogæ–‡ç« <br><span class="hljs-built_in">alias</span> push=<span class="hljs-string">'cd /Users/administrator/Workspace/Blog &amp;&amp; npm run git</span><br></code></pre></td></tr></tbody></table></figure><p>zsh</p><ul><li>å®‰è£…äº†<code>oh my zsh</code>åï¼Œ <code>.bash_profile</code> æ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡å°±æ— æ³•èµ·åˆ°ä½œç”¨</li></ul><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim ~/.zshrc<br>// æ·»åŠ <br><span class="hljs-built_in">source</span> ~/.bash_profile<br>// zshä¸­é…ç½®<br></code></pre></td></tr></tbody></table></figure><ul><li>oh my zsh<ul><li>z æ˜¯oh-my-zshé»˜è®¤å°±è£…å¥½çš„ï¼Œä¼šè®°å½•è¾“å…¥è¿‡çš„è·¯å¾„åï¼Œz+æŸä¸ªç›®å½•ç›´æ¥è·³è½¬åˆ°è¯¥ç›®å½•</li></ul></li></ul><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">// ä¸»ä½“<br>ZSH_THEME=<span class="hljs-string">"random"</span><br><span class="hljs-built_in">cd</span> ~/.oh-my-zsh/themes &amp;&amp; <span class="hljs-built_in">ls</span><br>plugins=() æ’ä»¶<br><br>plugins=(<br>git<br>autojump<br>zsh-autosuggestions // è‡ªåŠ¨è¡¥å…¨<br>zsh-syntax-highlighting  // é«˜äº®<br>zsh-z<br>)<br></code></pre></td></tr></tbody></table></figure><ul><li>oh my zsh æ’ä»¶</li></ul><blockquote><p><a href="https://www.mintimate.cn/2021/02/05/configZsh/">Linux/Macå¦‚ä½•é…ç½®zshå¹¶ä½¿ç”¨Oh-my-zshï¼Ÿè®©ä½ çš„ç»ˆç«¯æ›´åŠ å¥½ç”¨ - é›¨æœˆç©ºé—´ç«™</a></p><p><a href="https://asmcn.icopy.site/awesome/awesome-zsh-plugins/">ZSH æ’ä»¶ - è¶…èµåˆé›† awesome list chinese</a></p></blockquote><p>Google</p><blockquote><p><a href="https://github.com/biaochenxuying/blog/issues/58">æå‡ google ä½¿ç”¨æ•ˆç‡çš„ 30ä¸ªå¿«æ·é”®ã€16ä¸ªæ‰©å±•æ’ä»¶ä¸ 11ä¸ªå‰ç«¯è°ƒè¯•æ–¹æ³• Â· Issue #58 Â· biaochenxuying/blog</a></p></blockquote><p>Linux</p><ul><li><p>ls  <code>-w</code> æ˜¾ç¤ºä¸­æ–‡ï¼Œ<code>-l</code> è¯¦ç»†ä¿¡æ¯ï¼Œ <code>-a</code> åŒ…æ‹¬éšè—æ–‡ä»¶</p></li><li><p><code>&gt; &gt;&gt; </code></p><ul><li><code>&gt;</code> æ˜¯å®šå‘è¾“å‡ºåˆ°æ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œå°±åˆ›å»ºæ–‡ä»¶ï¼›å¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œå°±å°†å…¶æ¸…ç©ºï¼›ä¸€èˆ¬æˆ‘ä»¬å¤‡ä»½æ¸…ç†æ—¥å¿—æ–‡ä»¶çš„æ—¶å€™ï¼Œå°±æ˜¯è¿™ç§æ–¹æ³•ï¼šå…ˆå¤‡ä»½æ—¥å¿—ï¼Œå†ç”¨<code>&gt;</code>ï¼Œå°†æ—¥å¿—æ–‡ä»¶æ¸…ç©ºï¼ˆæ–‡ä»¶å¤§å°å˜æˆ0å­—èŠ‚ï¼‰</li><li><code>&gt;&gt;</code> è¿™ä¸ªæ˜¯å°†è¾“å‡ºå†…å®¹è¿½åŠ åˆ°ç›®æ ‡æ–‡ä»¶ä¸­ã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œå°±åˆ›å»ºæ–‡ä»¶ï¼›å¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œåˆ™å°†æ–°çš„å†…å®¹è¿½åŠ åˆ°é‚£ä¸ªæ–‡ä»¶çš„æœ«å°¾ï¼Œè¯¥æ–‡ä»¶ä¸­çš„åŸæœ‰å†…å®¹ä¸å—å½±å“ã€‚</li></ul></li><li><p>cp   cp å‚æ•° æºæ–‡ä»¶ ç›®æ ‡æ–‡ä»¶  å‚æ•°Rè¡¨ç¤ºå¯¹ç›®å½•è¿›è¡Œé€’å½’æ“ä½œ</p></li><li><p>rm å‚æ•° æ–‡ä»¶ rm -rf æ–‡ä»¶å¤¹</p></li><li><p>mv ç§»åŠ¨</p></li><li><p>chmod å‚æ•° æƒé™  æ–‡ä»¶  (#add  chä»£è¡¨change)   æ–‡ä»¶æƒé™</p><ul><li>chmod -R 755  /System/Library/Extensions  R è¡¨ç¤ºé€’å½’ï¼Œ755è¡¨ç¤ºå„ç”¨æˆ·çš„æƒé™</li></ul></li><li><p>chown å‚æ•°  ç”¨æˆ·:ç»„ æ–‡ä»¶  æ–‡ä»¶æ‰€æœ‰è€…</p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="å·¥å…·" scheme="http://example.com/tags/%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>(syntax)axios</title>
    <link href="http://example.com/2022/10/18/axios/"/>
    <id>http://example.com/2022/10/18/axios/</id>
    <published>2022-10-18T04:36:02.922Z</published>
    <updated>2022-10-18T04:35:38.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h2><h3 id="superfast"><a href="#superfast" class="headerlink" title="superfast"></a>superfast</h3><p>åŸºäºPromiseçš„HTTPåº“ å¯ä»¥ç”¨åœ¨æµè§ˆå™¨å’ŒNode.js</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">// axios<br>npm i axios <br>yarn add axios<br></code></pre></td></tr></tbody></table></figure><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">// vue-axios<br>npm install --save axios vue-axios<br><br>import Vue from <span class="hljs-string">'vue'</span><br>import axios from <span class="hljs-string">'axios'</span><br>import VueAxios from <span class="hljs-string">'vue-axios'</span><br>Vue.use(VueAxios, axios)<br>// Vue.axios == axios == this.axios == this.<span class="hljs-variable">$http</span><br>axios/Vue.axios/this.axios/this.<span class="hljs-variable">$http</span>.get(<span class="hljs-string">'xxx'</span>).<span class="hljs-keyword">then</span>(()=&gt;{}).catch(()=&gt;{})<br></code></pre></td></tr></tbody></table></figure><blockquote><p>API</p><ul><li>axios.xxx è¯·æ±‚æ–¹æ³•çš„åˆ«å<ul><li>.then((response) =&gt; {}) æ•°æ®å¤„ç†éƒ¨åˆ†</li><li>.catch((error) =&gt;{}) é”™è¯¯å¤„ç†éƒ¨åˆ†</li><li>è¯·æ±‚æ–¹æ³•åˆ«å <code>axios.xxx</code><ul><li>request(config) è¯·æ±‚æ–¹æ³•æä¾›äº†åˆ«åã€å¯ä»¥ç›´æ¥ä½¿ç”¨åˆ«åæ¥å‘èµ·è¯·æ±‚</li><li>getã€deleteã€headã€option(url[, config])</li><li>postã€putã€patch(url[, data[, config]])</li></ul></li><li>å¹¶å‘ <ul><li>all([fuc(),fuc()]) [] æ•°ç»„</li><li>spread(callback) å›è°ƒå‡½æ•°</li></ul></li><li>åˆ›å»ºå®ä¾‹ create()</li></ul></li><li>axios({config})<ul><li>config: <ul><li>method url data:{ key:value }  params:{}  timeout: 1000  responseType:â€™xxxâ€™ proxy:{}  auth: { } // <code>Authorization</code> å¤´</li></ul></li><li>.then((response) =&gt; {}) æ•°æ®å¤„ç†éƒ¨åˆ†</li><li>.catch((error) =&gt;{}) é”™è¯¯å¤„ç†éƒ¨åˆ†</li></ul></li></ul><p>åŠŸèƒ½</p><ul><li>é»˜è®¤å€¼ axios/instance.defaults.xxx = xx  create({ baseURL:xxx })<ul><li>baseURL headers.common[â€˜Authorizationâ€™]= AUTH_TOKEN headers.post[â€˜Content-Typeâ€™] = â€˜application/x-www-form-urlencodedâ€™</li></ul></li><li>è¶…æ—¶ xxx.defaults.timeout = 1000  create({ timeout:1000 })</li><li>æ‹¦æˆªå™¨ <ul><li>æ·»åŠ æ‹¦æˆª  axios/xxx.interceptors.request/response.use()  const xxx = axios.create()</li><li>ç§»é™¤æ‹¦æˆª  axios.interceptors.request.eject(Interceptor)</li></ul></li><li>é”™è¯¯å¤„ç†   if (error.response == 200) {} else if(){ }  validateStatus:(status) =&gt;{ return status &lt; 500 }</li><li>å–æ¶ˆè¯·æ±‚  axios.CancelToken.source()   cancelToken: source.token  source.cancel(â€˜xxxâ€™);</li><li>JSONè§£æ  ES6ï¼šqs.stringify(data)  Nodeï¼šquerystring.stringify({ foo: â€˜barâ€™ }</li></ul></blockquote><h3 id="axios-xxx"><a href="#axios-xxx" class="headerlink" title="axios.xxx"></a>axios.xxx</h3><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//GET GETæ–¹æ³•ä¼ é€’å‚æ•° URL ï¼ˆ/user?ID=12345ï¼‰ å’Œ  params :{ } ä¼ é€’å‚æ•° (ä¼ é€’å‚æ•°çš„ä¸¤ç§æ–¹å¼)</span><br>v-<span class="hljs-keyword">for</span>=msg  {{ msg.<span class="hljs-property">item</span> }}<br><br><span class="hljs-title function_">data</span>(<span class="hljs-params"></span>){ <span class="hljs-attr">msg</span>:[] }<br><span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>){<br>  axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">'url'</span>)<br>  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> { <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg</span> = response.<span class="hljs-property">data</span> })<br>  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> { error })<br>}<br>axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/user?ID=12345'</span>).<span class="hljs-title function_">then</span>().<span class="hljs-title function_">catch</span>()<br>axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/user'</span>, {<br>    <span class="hljs-attr">params</span>: {<br>      <span class="hljs-attr">ID</span>: <span class="hljs-number">12345</span><br>    }<br>}).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>){}).<span class="hljs-title function_">catch</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>){})<br><span class="hljs-comment">//POST</span><br>axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">''</span>).<span class="hljs-title function_">then</span>().<span class="hljs-title function_">catch</span>()<br>axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/user'</span>,{ <span class="hljs-attr">firstName</span>:<span class="hljs-string">''</span>,<span class="hljs-attr">lastName</span>:<span class="hljs-string">''</span> }).<span class="hljs-title function_">then</span>().<span class="hljs-title function_">catch</span>()<br><span class="hljs-comment">// å¹¶å‘ axios.all</span><br>axios.<span class="hljs-title function_">all</span>([<span class="hljs-title function_">fuc1</span>(),<span class="hljs-title function_">fuc2</span>()]).<span class="hljs-title function_">then</span>()<br></code></pre></td></tr></tbody></table></figure><h3 id="axios-1"><a href="#axios-1" class="headerlink" title="axios({})"></a>axios({})</h3><ul><li><code>axios({methodsã€urlã€data}).then().catch()</code></li><li><code>axios({ })  æˆ– axios('')</code></li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// åˆ›å»ºå®ä¾‹</span><br>axios.<span class="hljs-title function_">create</span>([config])<br><span class="hljs-keyword">const</span> instance = axios.<span class="hljs-title function_">create</span>({<br>baseURL = <span class="hljs-string">''</span>,<br><span class="hljs-attr">timeout</span>:<span class="hljs-number">1000</span>,  <span class="hljs-comment">// è¶…æ—¶æ—¶é—´</span><br><span class="hljs-attr">headers</span>: {<span class="hljs-string">'X-Custom-Header'</span>: <span class="hljs-string">'foobar'</span>} <span class="hljs-comment">//å¤´ä¿¡æ¯</span><br>}<br><span class="hljs-comment">// post                              </span><br><span class="hljs-title function_">axios</span>({methodsã€urlã€data})<br><span class="hljs-title function_">axios</span>({<br><span class="hljs-attr">methods</span>:<span class="hljs-string">'post'</span>,<br>  <span class="hljs-attr">url</span>:<span class="hljs-string">'/user/12344'</span>,<br>  <span class="hljs-attr">data</span>:{<br>    <span class="hljs-attr">firstName</span>:<span class="hljs-string">''</span>,<br>    <span class="hljs-title class_">LastName</span>:<span class="hljs-string">''</span><br>  }<br>})<br><span class="hljs-comment">// get</span><br><span class="hljs-title function_">axios</span>({<br>  <span class="hljs-attr">method</span>:<span class="hljs-string">'get'</span>,<br>  <span class="hljs-attr">url</span>:<span class="hljs-string">'http://bit.ly/2mTM3nY'</span>,<br>  <span class="hljs-attr">responseType</span>:<span class="hljs-string">'stream'</span><br>}).<span class="hljs-title function_">then</span>()<br><span class="hljs-comment">// å‘é€ GET è¯·æ±‚ï¼ˆé»˜è®¤çš„æ–¹æ³•ï¼‰</span><br><span class="hljs-title function_">axios</span>(<span class="hljs-string">'/user/12345'</span>);<br></code></pre></td></tr></tbody></table></figure><p>å“åº”æ•°æ®</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">{</span><br><span class="hljs-comment">// data ç”±æœåŠ¡å™¨æä¾›çš„å“åº” æ•°æ®</span><br>    data<span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-comment">// status HTTP çŠ¶æ€ç </span><br>    status<span class="hljs-punctuation">:</span><span class="hljs-number">200</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-comment">//  statusTest æ¥è‡ªæœåŠ¡å™¨å“åº”çš„HTTPçŠ¶æ€ä¿¡æ¯</span><br>    statusText<span class="hljs-punctuation">:</span><span class="hljs-string">"OK"</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-comment">// headers æœåŠ¡å™¨å“åº”çš„å¤´ä¿¡æ¯</span><br>    headers<span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><br>    <span class="hljs-comment">// config æ˜¯ä¸ºè¯·æ±‚æä¾›çš„é…ç½®ä¿¡æ¯</span><br>    config<span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><br><span class="hljs-punctuation">}</span><br></code></pre></td></tr></tbody></table></figure><p>é…ç½®é»˜è®¤å€¼</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// å…¨å±€é»˜è®¤å€¼</span><br>axios.<span class="hljs-property">defaults</span>.<span class="hljs-property">baseURL</span> = <span class="hljs-string">'https://api.example.com'</span>;<br>axios.<span class="hljs-property">defaults</span>.<span class="hljs-property">headers</span>.<span class="hljs-property">common</span>[<span class="hljs-string">'Authorization'</span>] = <span class="hljs-variable constant_">AUTH_TOKEN</span>;<br>axios.<span class="hljs-property">defaults</span>.<span class="hljs-property">headers</span>.<span class="hljs-property">post</span>[<span class="hljs-string">'Content-Type'</span>] = <span class="hljs-string">'application/x-www-form-urlencoded'</span>;<br><span class="hljs-comment">// è‡ªå®šä¹‰é»˜è®¤å€¼</span><br><span class="hljs-keyword">const</span> instance = axios.<span class="hljs-title function_">create</span>({<br>  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'https://api.example.com'</span><br>  <span class="hljs-attr">timeout</span>: <span class="hljs-number">1000</span><br>});<br>instance.<span class="hljs-property">defaults</span>.<span class="hljs-property">headers</span>.<span class="hljs-property">common</span>[<span class="hljs-string">'Authorization'</span>] = <span class="hljs-variable constant_">AUTH_TOKEN</span>;<br><span class="hljs-comment">// é…ç½®æŒ‡å®šæ—¶é—´</span><br><span class="hljs-keyword">var</span> instance = axios.<span class="hljs-title function_">create</span>()<br>instance.<span class="hljs-property">default</span>.<span class="hljs-property">timeout</span> = <span class="hljs-number">1000</span><br>instance.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/longRequest'</span>, {<br>  <span class="hljs-attr">timeout</span>: <span class="hljs-number">5000</span><br>});<br></code></pre></td></tr></tbody></table></figure><p>æ‹¦æˆªå™¨</p><ul><li>æ·»åŠ å’Œç§»é™¤</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// æ·»åŠ æ‹¦æˆª  axios/xxx.interceptors.request/response.use()</span><br>axios.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">config</span>) {<br>    <span class="hljs-keyword">return</span> config;<br>  }, <span class="hljs-keyword">function</span> (<span class="hljs-params">error</span>) {<br>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);<br>  });<br><br>axios.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) {<br>    <span class="hljs-keyword">return</span> response;<br>  }, <span class="hljs-keyword">function</span> (<span class="hljs-params">error</span>) {<br>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);<br>  });<br><br><span class="hljs-keyword">const</span> instance = axios.<span class="hljs-title function_">create</span>();<br>instance.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {});<br><br><span class="hljs-comment">// ç§»é™¤æ‹¦æˆª  axios.interceptors.request.eject(Interceptor)</span><br><span class="hljs-keyword">const</span> myInterceptor = axios.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {<span class="hljs-comment">/*...*/</span>});<br>axios.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">eject</span>(myInterceptor);<br></code></pre></td></tr></tbody></table></figure><p>é”™è¯¯å¤„ç†</p><ul><li>å¤„ç†çŠ¶æ€ç </li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">''</span>).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span>{<br> <span class="hljs-keyword">if</span> (error.<span class="hljs-property">response</span>) {}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(){} <span class="hljs-keyword">else</span>{ }<br>   <span class="hljs-attr">validateStatus</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">status</span>) {  <span class="hljs-keyword">return</span> status &lt; <span class="hljs-number">500</span>; }<span class="hljs-comment">// çŠ¶æ€ç èŒƒå›´</span><br>})<br></code></pre></td></tr></tbody></table></figure><p>å–æ¶ˆ</p><ul><li><em>cancel token</em> å–æ¶ˆè¯·æ±‚</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">CancelToken</span> = axios.<span class="hljs-property">CancelToken</span>;<br><span class="hljs-keyword">const</span> source = <span class="hljs-title class_">CancelToken</span>.<span class="hljs-title function_">source</span>();<br>axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">''</span>,{ <span class="hljs-attr">cancelToken</span>: source.<span class="hljs-property">token</span> })<br>source.<span class="hljs-title function_">cancel</span>(<span class="hljs-string">'Operation canceled by the user.'</span>);<br></code></pre></td></tr></tbody></table></figure><p>JSONè§£æ</p><ul><li>ES</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> qs <span class="hljs-keyword">from</span> <span class="hljs-string">'qs'</span>;<br><span class="hljs-keyword">const</span> options = <br><span class="hljs-title function_">axios</span>({<br>  <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,<br>  <span class="hljs-attr">headers</span>: { <span class="hljs-string">'content-type'</span>: <span class="hljs-string">'application/x-www-form-urlencoded'</span> },<br>  <span class="hljs-attr">data</span>: qs.<span class="hljs-title function_">stringify</span>({ <span class="hljs-string">'bar'</span>: <span class="hljs-number">123</span> }),<br>  url,<br>});<br></code></pre></td></tr></tbody></table></figure><ul><li>Node</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> querystring = <span class="hljs-built_in">require</span>(<span class="hljs-string">'querystring'</span>);  <br>axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">'http://something.com/'</span>, querystring.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">foo</span>: <span class="hljs-string">'bar'</span> }));<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="axios" scheme="http://example.com/tags/axios/"/>
    
  </entry>
  
  <entry>
    <title>(bug)Bug</title>
    <link href="http://example.com/2022/10/18/bug/"/>
    <id>http://example.com/2022/10/18/bug/</id>
    <published>2022-10-18T04:36:02.922Z</published>
    <updated>2022-10-18T04:35:38.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h1><ul><li>åœ¨<code>.git</code>é¡¹ç›®ä¸‹ä¸åŒç›®å½•å­˜åœ¨å¤šä¸ª<code>.gitç‰ˆæœ¬åº“</code> ä¼šå‡ºç°ä¸Šä¼ ä¸äº†è¯¥ç›®å½•çš„æ–‡ä»¶å’Œ<code>git commit </code>æ— æ³•æäº¤ ==Error Changes not staged for commit:==</li><li><code>Git</code>ä¸»åˆ†æ”¯ä» <code>master</code> å˜ä¸º <code>main</code></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="bug" scheme="http://example.com/tags/bug/"/>
    
  </entry>
  
  <entry>
    <title>(syntax)pinia</title>
    <link href="http://example.com/2022/10/18/pinia/"/>
    <id>http://example.com/2022/10/18/pinia/</id>
    <published>2022-10-18T04:36:02.922Z</published>
    <updated>2022-10-18T04:35:38.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="pinia"><a href="#pinia" class="headerlink" title="pinia"></a>pinia</h1><h2 id="piniaApi"><a href="#piniaApi" class="headerlink" title="piniaApi"></a><em>pinia</em>Api</h2><blockquote><p>pinia vs vuex</p><ul><li>æŠ›å¼ƒä¼ ç»Ÿçš„ <code>Mutation</code> ï¼Œåªæœ‰ <code>state, getter</code> å’Œ <code>action</code> ï¼Œç®€åŒ–çŠ¶æ€ç®¡ç†åº“</li><li>ä¸éœ€è¦åµŒå¥—æ¨¡å—ï¼Œç¬¦åˆ Vue3 çš„ Composition apiï¼Œè®©ä»£ç æ‰å¹³åŒ–</li><li>TSæ”¯æŒ</li><li>ä»£ç è‡ªåŠ¨åˆ†å‰²</li><li>å° 1K</li></ul></blockquote><blockquote><p>store ä»“åº“</p><ul><li>state æ•°æ®<ul><li>å®šä¹‰ <code>export const mainStore = defineStore('main',{ state:{}  })</code></li><li>ä½¿ç”¨<ul><li><code>const store = mainStore()</code></li><li><code>const { name } = storeToRefs(store)</code></li></ul></li><li>ä¿®æ”¹<ul><li><code>store.å±æ€§å</code> å•ä¸ªæ•°æ®ä¿®æ”¹</li><li><code>store.$path</code>å¤šä¸ªæ•°æ®ä¿®æ”¹ï¼ˆç±»ä¼¼è¾…åŠ©å‡½æ•°ï¼‰<ul><li><code>$path((state)=&gt;{ })</code>  + <code>$path({})</code></li></ul></li></ul></li></ul></li><li>getters è®¡ç®—<ul><li>å®šä¹‰ <code> export const mainStore = definStore('main',{ getters:{} })</code></li><li>ä½¿ç”¨ å¯¼å…¥ + æ–‡ä»¶å() + <code>store.getterså</code></li></ul></li><li>actions æ–¹æ³•<ul><li>å®šä¹‰ <code>export const mainStore = definStore('main',{ actions:{} })</code></li><li>ä½¿ç”¨  å¯¼å…¥ + æ–‡ä»¶å() + store.actionæ–¹æ³•()</li></ul></li><li>store æ–‡ä»¶åˆ†å‰²</li></ul></blockquote><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">// vue-cli vue create<br>vue create &lt;project-name&gt;<br>// vite  xxx create vite<br>npm/yarn/pnpm create vite my-vue-app --template vue   <br>// xxx create vite é¡¹ç›®å  --temlate vue<br>yarn add pinia<br>npm i pinia<br>// vue2<br>npm i @vue/composition-api<br>// vue-cli<br>vue add vue-cli-plugin-pinia<br></code></pre></td></tr></tbody></table></figure><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// vue3</span><br><span class="hljs-comment">// main.js</span><br><span class="hljs-comment">// vuex createStore</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span><br><span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span><br><span class="hljs-keyword">import</span> { createPinia } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span><br><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">creaetApp</span>(<span class="hljs-title class_">App</span>)<br><span class="hljs-keyword">const</span> pinia = <span class="hljs-title function_">createPinia</span>()<br>app.<span class="hljs-title function_">use</span>(pinia).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)<br><br><span class="hljs-comment">// vue2</span><br><span class="hljs-comment">// main.js</span><br><span class="hljs-comment">// vuex new Vue({ store }) // storeæ–‡ä»¶å¯¼å…¥</span><br><span class="hljs-keyword">import</span> { createPinia, <span class="hljs-title class_">PiniaVuePlugin</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span><br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">PiniaVuePlugin</span>)<br><span class="hljs-keyword">const</span> pinia = <span class="hljs-title function_">createPinia</span>()<br><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>({<br>  <span class="hljs-attr">el</span>: <span class="hljs-string">'#app'</span>,<br>  pinia,<br>})<br></code></pre></td></tr></tbody></table></figure><h2 id="stateæ•°æ®"><a href="#stateæ•°æ®" class="headerlink" title="stateæ•°æ®"></a>stateæ•°æ®</h2><blockquote><ul><li>å®šä¹‰ <code>export const mainStore = defineStore('main',{ state:{}  })</code></li><li>ä½¿ç”¨<ul><li><code>const store = mainStore()</code></li><li><code>const { name } = storeToRefs(store)</code></li></ul></li><li>ä¿®æ”¹<ul><li><code>store.å±æ€§å</code> å•ä¸ªæ•°æ®ä¿®æ”¹</li><li><code>store.$path</code>å¤šä¸ªæ•°æ®ä¿®æ”¹ï¼ˆç±»ä¼¼è¾…åŠ©å‡½æ•°ï¼‰<ul><li><code>$path((state)=&gt;{ })</code>  + <code>$path({})</code></li></ul></li></ul></li></ul></blockquote><p>å®šä¹‰</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// pinia main.js</span><br><span class="hljs-keyword">import</span> { createPinia } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span><br><span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>).<span class="hljs-title function_">use</span>(<span class="hljs-title function_">createPinia</span>()).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)<br><br><span class="hljs-comment">// vuex  stores.js</span><br><span class="hljs-keyword">import</span> { createStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'vuex'</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">createStore</span>({ <span class="hljs-attr">state</span>:{} })<br><br><span class="hljs-comment">// pinia stores.js å®šä¹‰</span><br><span class="hljs-comment">// å¯ä»¥æ·»åŠ åˆ«å</span><br><span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span><br><span class="hljs-comment">// ç¬¬ä¸€ä¸ªå‚æ•°å”¯ä¸€åç§° </span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> mainStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'main'</span>,{<br>  <span class="hljs-attr">state</span>:<span class="hljs-function">() =&gt;</span> { <br>    <span class="hljs-keyword">return</span>{  <span class="hljs-attr">count</span>:<span class="hljs-number">100</span>  }   <br>  },<br>  <span class="hljs-attr">getters</span>:{},<br>  <span class="hljs-attr">actions</span>: {<br>    <span class="hljs-title function_">increment</span>(<span class="hljs-params"></span>) {<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++<br>    },<br>  },<br>})<br><br><span class="hljs-comment">// xxx.vue ä½¿ç”¨ setup()</span><br><span class="hljs-keyword">import</span> { mainStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/stores.js'</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {<br>  <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) {<br>    <span class="hljs-keyword">const</span> store = <span class="hljs-title function_">mainStore</span>()<br>    store.<span class="hljs-property">count</span>++<br>    store.$patch({ <span class="hljs-attr">count</span>: store.<span class="hljs-property">count</span> + <span class="hljs-number">1</span> })<br>    store.<span class="hljs-title function_">increment</span>() <br>    <span class="hljs-keyword">const</span> store = <span class="hljs-title function_">useStore</span>()<br>    <span class="hljs-keyword">return</span>{<br>      store<br>    }<br>  },<br>}<br><br></code></pre></td></tr></tbody></table></figure><p>ä½¿ç”¨(è§£æ„store)</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js">{{ store.<span class="hljs-property">count</span><span class="hljs-comment">//count }}</span><br><br><span class="hljs-comment">// setup</span><br>&lt;script setup&gt;<br>  <span class="hljs-keyword">import</span> { storeToRefs } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span><br>  <span class="hljs-keyword">import</span> { mainStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/stores.js</span><br><span class="hljs-string">  const store = mainStore()</span><br><span class="hljs-string">  const { count } = storeToRefs(store) </span><br><span class="hljs-string">&lt;/script&gt;  </span><br><span class="hljs-string">  </span><br><span class="hljs-string">// å“åº”å¼è°ƒç”¨</span><br><span class="hljs-string">import { storeToRefs, } from '</span>pinia<span class="hljs-string">'</span><br><span class="hljs-string">export default defineComponent({</span><br><span class="hljs-string">  setup(){</span><br><span class="hljs-string">    const store = useStore()</span><br><span class="hljs-string">    const { name, doubleCount } = storeToRefs(store) // æ·»åŠ å“åº”å¼å±æ€§</span><br><span class="hljs-string">    const { count } = storeToRefs(store) OR const { count } = store ESè§£æ„æ²¡æœ‰å“åº”æ€§</span><br><span class="hljs-string">    return{</span><br><span class="hljs-string">      name,</span><br><span class="hljs-string">      doubleCount</span><br><span class="hljs-string">    }</span><br><span class="hljs-string">  }</span><br><span class="hljs-string">})</span><br></code></pre></td></tr></tbody></table></figure><p>ä¿®æ”¹</p><ul><li><code>store.å±æ€§å</code> å•ä¸ªæ•°æ®ä¿®æ”¹</li><li><code>store.$path</code>å¤šä¸ªæ•°æ®ä¿®æ”¹ï¼ˆç±»ä¼¼è¾…åŠ©å‡½æ•°ï¼‰<ul><li><code>$path((state)=&gt;{ })</code>  + <code>$path({})</code></li></ul></li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// xxx.vue</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">add</span> = (<span class="hljs-params"></span>) =&gt; {<br>  store.<span class="hljs-property">count</span>++<br>}<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">plus</span> = (<span class="hljs-params"></span>) =&gt;{<br>  store.$path({ <br>  <span class="hljs-attr">count</span>:store.<span class="hljs-property">count</span> + <span class="hljs-number">100</span>,<br>    <span class="hljs-attr">msg</span>:<span class="hljs-string">'Hello'</span> + store.<span class="hljs-property">msg</span> <br>  })<br>}<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">del</span> = (<span class="hljs-params"></span>) =&gt;{<br>  store.$path(<span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> { <br>  state.<span class="hljs-property">count</span> = state.<span class="hljs-property">count</span> + <span class="hljs-number">100</span>,<br>    state.<span class="hljs-property">msg</span> = state.<span class="hljs-property">msg</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">10</span>? <span class="hljs-string">'true'</span> : <span class="hljs-string">'false'</span> <br>  })<br>}<br></code></pre></td></tr></tbody></table></figure><h2 id="gettersè®¡ç®—"><a href="#gettersè®¡ç®—" class="headerlink" title="gettersè®¡ç®—"></a>gettersè®¡ç®—</h2><blockquote><ul><li>å®šä¹‰ <code> export const mainStore = definStore('main',{ getters:{} })</code></li><li>ä½¿ç”¨ å¯¼å…¥ + æ–‡ä»¶å() + <code>store.getterså</code></li></ul></blockquote><ul><li>ä¸vueçš„è®¡ç®—å±æ€§é›†åˆä¸€æ · æœ‰ç¼“å­˜ å€¼æ²¡æœ‰æ”¹å˜å¤šæ¬¡è°ƒç”¨åŒä¸€ä¸ª</li></ul><p>å®šä¹‰</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> mainStore = <span class="hljs-title function_">definStore</span>(<span class="hljs-string">'main'</span>,{<br>  <span class="hljs-attr">state</span>:<span class="hljs-function">()=&gt;</span>{ <br>  <span class="hljs-keyword">return</span>{<br>      <span class="hljs-attr">msg</span>:<span class="hljs-string">'Message'</span>,<br>      <span class="hljs-attr">count</span>:<span class="hljs-number">1000</span><br>    }<br>  },<br>  <span class="hljs-attr">getters</span>:{<br>    <span class="hljs-title function_">reduceCount</span>(<span class="hljs-params"></span>){<br>      state.<span class="hljs-property">count</span>-- <span class="hljs-comment">//  this.count--</span><br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'-1'</span>)<br>    }<br>  }<br>})<br></code></pre></td></tr></tbody></table></figure><p>ä½¿ç”¨</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;h1&gt; store.<span class="hljs-property">reduceCount</span> &lt;/h1&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span> store.reduceCount <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span> store.reduceCount <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><br><span class="hljs-keyword">import</span> { mainStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'./stores.js'</span><br><span class="hljs-keyword">const</span> store = <span class="hljs-title function_">mainStore</span>()<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(store)<br></code></pre></td></tr></tbody></table></figure><h2 id="actionsæ–¹æ³•"><a href="#actionsæ–¹æ³•" class="headerlink" title="actionsæ–¹æ³•"></a>actionsæ–¹æ³•</h2><blockquote><ul><li>å®šä¹‰ <code>export const mainStore = definStore('main',{ actions:{} })</code></li><li>ä½¿ç”¨  store.actionæ–¹æ³•()</li></ul></blockquote><p>å®šä¹‰</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> mainStore = <span class="hljs-title function_">definStore</span>(<span class="hljs-string">'main'</span>,{<br>  <span class="hljs-attr">state</span>:<span class="hljs-function">()=&gt;</span>{ <br>  <span class="hljs-keyword">return</span>{<br>      <span class="hljs-attr">msg</span>:<span class="hljs-string">'Message'</span>,<br>      <span class="hljs-attr">count</span>:<span class="hljs-number">1000</span><br>    }<br>  },<br>  <span class="hljs-attr">getters</span>:{},<br>  <span class="hljs-attr">actions</span>:{<br>    <span class="hljs-title function_">addCounter</span>(<span class="hljs-params"></span>){<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg</span> = <span class="hljs-string">`Hello<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.msg}</span> `</span>+ <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span><br>    }<br>  }<br>})<br></code></pre></td></tr></tbody></table></figure><ul><li>ä½¿ç”¨</li></ul><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;h1&gt;{{ store.msg }}&lt;/h1&gt;<br>&lt;button @click="actionClickk"&gt;Action&lt;/button&gt;<br><br>&lt;script setup&gt;<br> import { mainStore } from './store.js'<br>   const store = mainStore()<br>   // å˜æ›´action<br>   const actionClick = () =&gt;{<br>     store.addCounter()<br>   }<br>&lt;/script&gt;<br></code></pre></td></tr></tbody></table></figure><h2 id="storeä»“åº“"><a href="#storeä»“åº“" class="headerlink" title="storeä»“åº“"></a>storeä»“åº“</h2><ul><li>åˆ†ç¦»storeæ–‡ä»¶<ul><li>ä½¿ç”¨ å¯¼å…¥ + æ–‡ä»¶().xxx //</li></ul></li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// use.js</span><br><span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">userStore</span>(<span class="hljs-string">'user'</span>,{<br>  <span class="hljs-attr">state</span>:<span class="hljs-function">()=&gt;</span>{<br>    <span class="hljs-keyword">return</span>{<br>       <span class="hljs-attr">msg</span>:<span class="hljs-string">"Hello Pinia"</span><br>    }<br>  }<br>})<br><span class="hljs-comment">// store.js</span><br><span class="hljs-keyword">import</span> { userStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'./use.js'</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">mainStore</span>(<span class="hljs-string">'main'</span>,{<br>  <span class="hljs-attr">getters</span>:{<br>    <span class="hljs-title function_">addYear</span>(<span class="hljs-params"></span>){<br>       <span class="hljs-comment">// return this.msg + new Date()</span><br>       <span class="hljs-keyword">return</span> <span class="hljs-title function_">userStore</span>().<span class="hljs-property">msg</span> + <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()<br>    }<br>  }<br>})<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="vue" scheme="http://example.com/tags/vue/"/>
    
    <category term="è¯­æ³•" scheme="http://example.com/tags/%E8%AF%AD%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>(syntax)vite</title>
    <link href="http://example.com/2022/10/18/vite/"/>
    <id>http://example.com/2022/10/18/vite/</id>
    <published>2022-10-18T04:36:02.922Z</published>
    <updated>2022-10-18T04:35:38.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="vite"><a href="#vite" class="headerlink" title="vite"></a>vite</h2><blockquote><p><a href="https://cn.vitejs.dev/guide/why.html">Vite å®˜æ–¹ä¸­æ–‡æ–‡æ¡£</a></p></blockquote><blockquote><ul><li>å®‰è£…<ul><li>vue create =&gt; npm create vite</li><li><code>npm create vite@latest</code></li><li><code>pnpm create vite my-vue-app --template vue</code></li><li><code>pnpm create vite my-vue-app --template vue-ts</code></li></ul></li><li>é…ç½®syntax<ul><li>vite<a href="https://cn.vitejs.dev/config/">é…ç½® Vite | Vite å®˜æ–¹ä¸­æ–‡æ–‡æ¡£</a></li></ul></li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span><br><span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-vue'</span><br><br><span class="hljs-comment">// https://vitejs.dev/config/</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({<br>  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">vue</span>()]<br>})<br></code></pre></td></tr></tbody></table></figure></blockquote><ul><li><p>webå¼€å‘æ„å»ºå·¥å…·</p><ul><li>ä¸€ä¸ªå¼€å‘æœåŠ¡å™¨ åŸºäºåŸç”ŸESæ¨¡å— æ¨¡å—çƒ­æ›´æ–°(HMR)</li><li>ä¸€å¥—æ„å»ºæŒ‡ä»¤ Rollupæ‰“åŒ… é¢„é…ç½®çš„ è¾“å‡ºç”¨äºç”Ÿäº§ç¯å¢ƒçš„é«˜åº¦ä¼˜åŒ–è¿‡çš„é™æ€èµ„æº</li></ul></li><li><p>ç°å®é—®é¢˜ï¼šç¼“æ…¢çš„æœåŠ¡å™¨å¯åŠ¨[å°†åº”ç”¨ä¸­çš„æ¨¡å—åŒºåˆ†ä¸º **ä¾èµ–** <a href="https://esbuild.github.io/">esbuild</a> <a href="https://cn.vitejs.dev/guide/dep-pre-bundling.html">é¢„æ„å»ºä¾èµ–</a>ã€‚å’Œ <strong>æºç </strong> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules">åŸç”Ÿ ESM</a> {ES Module} ä¸¤ç±»ï¼Œæ”¹è¿›äº†å¼€å‘æœåŠ¡å™¨å¯åŠ¨æ—¶é—´] ç¼“æ…¢çš„æ›´æ–°(æ‰“åŒ…å™¨æ”¯æŒäº†åŠ¨æ€æ¨¡å—çƒ­æ›¿æ¢ï¼ˆHMRï¼‰)</p></li></ul><p>å®‰è£…</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm create vite@latest  // npm init vite-app &lt;project-name&gt;<br>yarn create vite  // yarn create vite-app &lt;project-name&gt;<br>pnpm create vite<br><span class="hljs-comment"># npm 6.x</span><br>npm create vite@latest my-vue-app --template vue<br><span class="hljs-comment"># npm 7+, extra double-dash is needed:</span><br>npm create vite@latest my-vue-app -- --template vue<br><br>npm create vite my-vue-app -- --template vue // å¤šä¸€ä¸ª--<br>npm/yarn/pnpm create vite my-vue-app --template vue<br><br>// ä¸Šé¢vueæ›¿ä»£ vanillaï¼Œvanilla-tsï¼Œvueï¼Œvue-tsï¼Œreactï¼Œreact-tsï¼Œpreactï¼Œpreact-tsï¼Œlitï¼Œlit-tsï¼Œsvelteï¼Œsvelte-ts<br>// ç¤¾åŒºæ¨¡æ¿<br>npx degit user/project my-project<br><br>npx vite // npx vite build<br><span class="hljs-string">"scripts"</span>: {<br>    <span class="hljs-string">"dev"</span>: <span class="hljs-string">"vite"</span>, // å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼Œåˆ«åï¼š`vite dev`ï¼Œ`vite serve`<br>    <span class="hljs-string">"build"</span>: <span class="hljs-string">"vite build"</span>, // ä¸ºç”Ÿäº§ç¯å¢ƒæ„å»ºäº§ç‰©<br>    <span class="hljs-string">"preview"</span>: <span class="hljs-string">"vite preview"</span> // æœ¬åœ°é¢„è§ˆç”Ÿäº§æ„å»ºäº§ç‰©<br>}<br></code></pre></td></tr></tbody></table></figure><p>vite.config.js</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> { defineConfig, loadEnv } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(<span class="hljs-function">(<span class="hljs-params">{ command, mode }</span>) =&gt;</span> {<br>  <span class="hljs-comment">// æ ¹æ®å½“å‰å·¥ä½œç›®å½•ä¸­çš„ `mode` åŠ è½½ .env æ–‡ä»¶</span><br>  <span class="hljs-comment">// è®¾ç½®ç¬¬ä¸‰ä¸ªå‚æ•°ä¸º '' æ¥åŠ è½½æ‰€æœ‰ç¯å¢ƒå˜é‡ï¼Œè€Œä¸ç®¡æ˜¯å¦æœ‰ `VITE_` å‰ç¼€ã€‚</span><br>  <span class="hljs-keyword">const</span> env = <span class="hljs-title function_">loadEnv</span>(mode, process.<span class="hljs-title function_">cwd</span>(), <span class="hljs-string">''</span>)<br>  <span class="hljs-keyword">return</span> {<br>    <span class="hljs-comment">// vite é…ç½®</span><br>    <span class="hljs-attr">define</span>: {<br>      <span class="hljs-attr">__APP_ENV__</span>: env.<span class="hljs-property">APP_ENV</span><br>    }<br>  }<br>})<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="vue" scheme="http://example.com/tags/vue/"/>
    
    <category term="è¯­æ³•" scheme="http://example.com/tags/%E8%AF%AD%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>(syntax)vue-cli</title>
    <link href="http://example.com/2022/10/18/vue-cli/"/>
    <id>http://example.com/2022/10/18/vue-cli/</id>
    <published>2022-10-18T04:36:02.922Z</published>
    <updated>2022-10-18T04:35:38.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p><a href="https://cli.vuejs.org/zh/guide/">ä»‹ç» | Vue CLI</a></p></blockquote><blockquote><p>@vue/cliä¸¤éƒ¨åˆ†ç»„æˆ</p><ul><li>vue-cli å®‰è£… <ul><li><code>npm install -g @vue/cli </code></li><li><code> vue create &lt;project-name&gt;</code></li></ul></li><li>Preset + æ’ä»¶(ç¬¬ä¸‰æ–¹åŒ…)<ul><li>preset é¢„è®¾ <code>vim ~/.vuerc</code>  è¿œç¨‹/æœ¬åœ° Preset  <code>vue create --preset username/repo my-project</code></li><li>æ’ä»¶ å†…å»º <code>vue add vuex</code> ç¤¾åŒº<code>npm i vuex --save-dev</code><ul><li>åŒºåˆ«  @vue/cli-plugin-vuexåŒ… vs vuexåŒ…</li><li>vue add ä¼šç”Ÿæˆæ–‡ä»¶</li></ul></li></ul></li><li>vue.config.js æ–‡ä»¶  <a href="https://cli.vuejs.org/zh/config/">é…ç½®å‚è€ƒ | Vue CLI</a></li></ul></blockquote><p>æ¦‚å¿µ</p><ul><li>Vue CLI æ˜¯ä¸€ä¸ªåŸºäº<code>Vue.js è¿›è¡Œå¿«é€Ÿå¼€å‘çš„å®Œæ•´ç³»ç»Ÿ</code>(è„šæ‰‹æ¶å·¥å…·)</li><li>@vue/cli(æ–°ç‰ˆæœ¬) å’Œ vue-cli(æ—§ç‰ˆæœ¬)</li><li><code>ä¸‰ä¸ªç³»ç»Ÿçš„ç»„ä»¶ï¼ˆéƒ¨åˆ†ï¼‰ç»„æˆ  CLI ã€CLI æœåŠ¡ã€CLI æ’ä»¶</code><ul><li>CLIï¼š   (@vue/cli)   å…¨å±€å®‰è£…npmåŒ…  <code>æä¾›vueå‘½ä»¤</code></li><li>CLI æœåŠ¡ï¼šï¼ˆ@vue/cli-service ï¼‰ ä¸€ä¸ª<code>å¼€å‘ç¯å¢ƒä¾èµ–</code>   ä¸€ä¸ªnpmåŒ…  å±€éƒ¨å®‰è£…åœ¨æ¯ä¸ª<code>@vue/cli</code><ul><li>@vue/cli-service-global å¿«é€Ÿå¼€å‘çš„åŸå‹ å•ç‹¬è¿è¡Œvueæ–‡ä»¶ <code>@vue/cli</code> + <code>@vue/cli-service-global</code></li></ul></li><li>CLI æ’ä»¶ï¼šï¼ˆæ’ä»¶å°±æ˜¯å®‰è£…çš„ç¬¬ä¸‰æ–¹åŒ…npm å¦‚axios elementUIè¿™äº›ï¼‰ å‘ä½ çš„ Vue é¡¹ç›®æä¾›å¯é€‰åŠŸèƒ½çš„ npm åŒ…   <code>npmä¾èµ–åŒ…</code><ul><li><code>@vue/cli-plugin-</code> (å†…å»ºæ’ä»¶ å®˜æ–¹)</li><li><code>vue-cli-plugin-</code> (ç¤¾åŒºæ’ä»¶ ç¬¬ä¸‰æ–¹)</li></ul></li></ul></li><li><code>@vue/cli</code> çš„å…¨å±€é…ç½®ï¼Œä¾‹å¦‚ä½ æƒ¯ç”¨çš„åŒ…ç®¡ç†å™¨å’Œä½ æœ¬åœ°ä¿å­˜çš„ preset <code>.vuerc</code> çš„ JSON æ–‡ä»¶ vue config å¯å¤ç”¨çš„ preset</li></ul><p>å®‰è£…</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs bash">// åˆ›å»ºé¡¹ç›®<br>vue create my-project <br>vue ui<br>vue init webpack my-project<br>vue creat --<span class="hljs-built_in">help</span><br><br><br>// å®‰è£…vue/cliè„šæ‰‹æ¶<br>npm i -g @vue/cli  // npm install -g @vue/cli@next<br>yarn global add @vue/cli  // yarn global add @vue/cli@next<br>// vue/cliè„šæ‰‹æ¶ç‰ˆæœ¬<br>vue -version<br>// æ›´æ–°vue-cli<br>npm update -g @vue/cli<br>yarn global upgrade --latest @vue/cli<br><br>// å¿«é€ŸåŸå‹å¼€å‘<br>npm install -g @vue/cli-service-global<br>vue serve -h -o -c -p 8081 *.vue   //  vue serveå¼€å‘ç¯å¢ƒ npm run serve  <br>vue serve MyComponent.vue<br>yarn serve<br>npx vue-cli-service serve<br>vue -d dist *.vue   // vue build npm run build  <br>vue build -t -n -d -h  <br>vue build MyComponent.vue // MyJavaScript.js<br>vue inspect<br><br>npx vue-cli-service <span class="hljs-built_in">help</span><br>// æ’ä»¶ @vue/cli-plugin-<br>vue add eslint<br>npm i eslint<br>npm i -g elint å…¨å±€ç¯å¢ƒ<br>// Preset ä¸€ä¸ª Vue CLI preset æ˜¯ä¸€ä¸ªåŒ…å«åˆ›å»ºæ–°é¡¹ç›®æ‰€éœ€é¢„å®šä¹‰é€‰é¡¹å’Œæ’ä»¶çš„ JSON å¯¹è±¡ï¼Œè®©ç”¨æˆ·æ— éœ€åœ¨å‘½ä»¤æç¤ºä¸­é€‰æ‹©å®ƒä»¬ã€‚<br>// CLI æœåŠ¡<br><br>npm install vuex --save  // ç”Ÿäº§ç¯å¢ƒ(`dependencies`)   npm install vuex<br>npm install scss-loader --save-dev  // å¼€å‘ç¯å¢ƒ (`devDependencies`)  <br></code></pre></td></tr></tbody></table></figure><p>package.json</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">{<br>  <span class="hljs-string">"vuePlugins"</span>: { }<br>}<br></code></pre></td></tr></tbody></table></figure><p>vue.config.js é…ç½®æ–‡ä»¶  </p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// module.export={ }</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">export</span> = {<br>  <span class="hljs-attr">publicPath</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'production'</span> ? <span class="hljs-string">'/public/'</span> : <span class="hljs-string">'./'</span>,<br> <span class="hljs-attr">outputDir</span>: <span class="hljs-string">'dist'</span>,<br>  <span class="hljs-attr">assetsDir</span>: <span class="hljs-string">"assets"</span>,<br>    <span class="hljs-attr">productionSourceMap</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">filenameHashing</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">lintOnSave</span>: <span class="hljs-literal">false</span>,<br> <span class="hljs-attr">pages</span>: {  <br>        <span class="hljs-attr">index</span>: {<br>            <span class="hljs-attr">entry</span>: <span class="hljs-string">'src/index/main.js'</span>,    <br>            <span class="hljs-attr">template</span>: <span class="hljs-string">'public/index.html'</span>,<br>            <span class="hljs-attr">filename</span>: <span class="hljs-string">'index.html'</span>,       <br>            <span class="hljs-attr">title</span>: <span class="hljs-string">'Index Page'</span>,   <br>            <span class="hljs-attr">chunks</span>: [<span class="hljs-string">'chunk-vendors'</span>, <span class="hljs-string">'chunk-common'</span>, <span class="hljs-string">'index'</span>]<br>        }, <br>     <span class="hljs-attr">subpage</span>: <span class="hljs-string">'src/subpage/main.js'</span><br>    },<br>    <span class="hljs-attr">devServer</span>: {<br>          <span class="hljs-attr">open</span>: <span class="hljs-literal">true</span>,<br>          <span class="hljs-attr">host</span>: <span class="hljs-string">'localhost'</span>,<br>          <span class="hljs-attr">port</span>: <span class="hljs-number">8080</span>,<br>          <span class="hljs-attr">https</span>: <span class="hljs-literal">false</span>,<br>          <span class="hljs-attr">hotOnly</span>: <span class="hljs-literal">false</span>, <br>          <span class="hljs-attr">proxy</span>: { <br>              [process.<span class="hljs-property">env</span>.<span class="hljs-property">VUE_APP_BASE_API</span>]: {<br>                  <span class="hljs-attr">target</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">VUE_APP_BASE_URL</span>,<br>                  <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>,<br>                  <span class="hljs-attr">pathRewrite</span>: {<br>                    [<span class="hljs-string">"^"</span> + process.<span class="hljs-property">env</span>.<span class="hljs-property">VUE_APP_BASE_API</span>]: <span class="hljs-string">""</span><br>                  }<br>               }<br>              <span class="hljs-string">'/api'</span>: {<br>                  <span class="hljs-attr">target</span>: <span class="hljs-string">'http://47.100.47.3/'</span>,  <br>                  <span class="hljs-attr">ws</span>:<span class="hljs-literal">true</span>,<br>                  <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>, <br>              },<br>              <span class="hljs-string">'/foo'</span>:{<br>                  <span class="hljs-attr">target</span>:<span class="hljs-string">'&lt;other_url&gt;'</span><br>              }<br>          },<br>      }<br>}<br><span class="hljs-comment">// defineConfig({ })</span><br><span class="hljs-keyword">const</span> { defineConfig } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@vue/cli-service'</span>)<br><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-title function_">defineConfig</span>({<br>  <span class="hljs-comment">// é€‰é¡¹</span><br>})<br></code></pre></td></tr></tbody></table></figure><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// const port = 8080; // ç«¯å£å·</span><br><span class="hljs-comment">// const IS_PRODUCTION = process.env.NODE_ENV == "production"; // æ­£å¼ç¯å¢ƒ</span><br><span class="hljs-comment">// const CompressionPlugin = require("compression-webpack-plugin");</span><br><span class="hljs-comment">// const UglifyJsWebpackPlugin = require("uglifyjs-webpack-plugin");</span><br><span class="hljs-comment">/** key æ˜¯import çš„åŒ…åï¼Œvalue æ˜¯CDN ä¸ºæˆ‘ä»¬æä¾›çš„å…¨å±€å˜é‡å */</span><br><span class="hljs-comment">// const externals = {</span><br><span class="hljs-comment">//  "ali-oss": "OSS"</span><br><span class="hljs-comment">// };</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">export</span> = {<br>    <span class="hljs-comment">// éƒ¨ç½²ç”Ÿäº§ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒä¸‹çš„URLï¼šå¯å¯¹å½“å‰ç¯å¢ƒè¿›è¡ŒåŒºåˆ†ï¼ŒbaseUrl ä» Vue CLI 3.3 èµ·å·²å¼ƒç”¨ï¼Œè¦ä½¿ç”¨publicPath</span><br>    <span class="hljs-comment">// baseUrl: process.env.NODE_ENV === 'production' ? './' : '/'</span><br>    <span class="hljs-comment">// é¡¹ç›®ä¸­çš„publicç›®å½•ä¸€èˆ¬æ˜¯éƒ¨ç½²åœ¨åŸŸåçš„æ ¹éƒ¨ï¼Œå¦‚æœè¦ç”¨åˆ°publicç›®å½•ä¸‹çš„èµ„æºï¼Œéœ€è¦é…ç½®publicPathã€‚</span><br>    <span class="hljs-attr">publicPath</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'production'</span> ? <span class="hljs-string">'/public/'</span> : <span class="hljs-string">'./'</span>,<br>    <span class="hljs-comment">// è¾“å‡ºæ–‡ä»¶ç›®å½•ï¼šåœ¨npm run buildæ—¶ï¼Œç”Ÿæˆæ–‡ä»¶çš„ç›®å½•åç§°  ç”Ÿäº§ç¯å¢ƒæ„å»ºæ–‡ä»¶çš„ç›®å½•</span><br>    <span class="hljs-attr">outputDir</span>: <span class="hljs-string">'dist'</span>,<br>    <span class="hljs-comment">// æ”¾ç½®ç”Ÿæˆçš„é™æ€èµ„æº (jsã€cssã€imgã€fonts) çš„ (ç›¸å¯¹äº outputDir çš„) ç›®å½•</span><br>    <span class="hljs-attr">assetsDir</span>: <span class="hljs-string">"assets"</span>,<br>    <span class="hljs-comment">// indexPath: 'test/home.html', // buildä¹‹åç”Ÿæˆçš„index.htmlçš„è·¯å¾„</span><br>    <span class="hljs-comment">// æ˜¯å¦åœ¨æ„å»ºç”Ÿäº§åŒ…æ—¶ç”Ÿæˆ sourceMap æ–‡ä»¶ï¼Œfalseå°†æé«˜æ„å»ºé€Ÿåº¦</span><br>    <span class="hljs-attr">productionSourceMap</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-comment">// é»˜è®¤æƒ…å†µä¸‹ï¼Œç”Ÿæˆçš„é™æ€èµ„æºåœ¨å®ƒä»¬çš„æ–‡ä»¶åä¸­åŒ…å«äº† hash ä»¥ä¾¿æ›´å¥½çš„æ§åˆ¶ç¼“å­˜ï¼Œä½ å¯ä»¥é€šè¿‡å°†è¿™ä¸ªé€‰é¡¹è®¾ä¸º false æ¥å…³é—­æ–‡ä»¶åå“ˆå¸Œã€‚(falseçš„æ—¶å€™å°±æ˜¯è®©åŸæ¥çš„æ–‡ä»¶åä¸æ”¹å˜)</span><br>    <span class="hljs-attr">filenameHashing</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-comment">// ä»£ç ä¿å­˜æ—¶è¿›è¡Œeslintæ£€æµ‹</span><br>    <span class="hljs-attr">lintOnSave</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-comment">// webpack-dev-server ç›¸å…³é…ç½®</span><br>    <span class="hljs-comment">//åœ¨ multi-page æ¨¡å¼ä¸‹æ„å»ºåº”ç”¨ã€‚æ¯ä¸ªâ€œpageâ€åº”è¯¥æœ‰ä¸€ä¸ªå¯¹åº”çš„ JavaScript å…¥å£æ–‡ä»¶ã€‚å…¶å€¼åº”è¯¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡çš„ key æ˜¯å…¥å£çš„åå­—ï¼Œvalue æ˜¯ï¼š</span><br>     <span class="hljs-attr">pages</span>: {  <span class="hljs-comment">// æ„å»ºå¤šé¡µåº”ç”¨</span><br>        <span class="hljs-attr">index</span>: {<br>            <span class="hljs-comment">// page çš„å…¥å£</span><br>            <span class="hljs-attr">entry</span>: <span class="hljs-string">'src/index/main.js'</span>,<br>            <span class="hljs-comment">// æ¨¡æ¿æ¥æº</span><br>            <span class="hljs-attr">template</span>: <span class="hljs-string">'public/index.html'</span>,<br>            <span class="hljs-comment">// åœ¨ dist/index.html çš„è¾“å‡º</span><br>            <span class="hljs-attr">filename</span>: <span class="hljs-string">'index.html'</span>,<br>            <span class="hljs-comment">// å½“ä½¿ç”¨ title é€‰é¡¹æ—¶ï¼Œ</span><br>            <span class="hljs-comment">// template ä¸­çš„ title æ ‡ç­¾éœ€è¦æ˜¯ &lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt;</span><br>            <span class="hljs-attr">title</span>: <span class="hljs-string">'Index Page'</span>,<br>            <span class="hljs-comment">// åœ¨è¿™ä¸ªé¡µé¢ä¸­åŒ…å«çš„å—ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šåŒ…å«</span><br>            <span class="hljs-comment">// æå–å‡ºæ¥çš„é€šç”¨ chunk å’Œ vendor chunkã€‚</span><br>            <span class="hljs-attr">chunks</span>: [<span class="hljs-string">'chunk-vendors'</span>, <span class="hljs-string">'chunk-common'</span>, <span class="hljs-string">'index'</span>]<br>        },<br>        <span class="hljs-comment">// å½“ä½¿ç”¨åªæœ‰å…¥å£çš„å­—ç¬¦ä¸²æ ¼å¼æ—¶ï¼Œ</span><br>        <span class="hljs-comment">// æ¨¡æ¿ä¼šè¢«æ¨å¯¼ä¸º `public/subpage.html`</span><br>        <span class="hljs-comment">// å¹¶ä¸”å¦‚æœæ‰¾ä¸åˆ°çš„è¯ï¼Œå°±å›é€€åˆ° `public/index.html`ã€‚</span><br>        <span class="hljs-comment">// è¾“å‡ºæ–‡ä»¶åä¼šè¢«æ¨å¯¼ä¸º `subpage.html`ã€‚</span><br>        <span class="hljs-attr">subpage</span>: <span class="hljs-string">'src/subpage/main.js'</span><br>    },<br>    <span class="hljs-attr">devServer</span>: {<br>        <span class="hljs-attr">open</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span><br>        <span class="hljs-attr">host</span>: <span class="hljs-string">'localhost'</span>,<br>        <span class="hljs-attr">port</span>: <span class="hljs-number">8080</span>,<span class="hljs-comment">// ç«¯å£</span><br>        <span class="hljs-attr">https</span>: <span class="hljs-literal">false</span>,<br>        <span class="hljs-attr">hotOnly</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// çƒ­æ›´æ–°   </span><br>        <span class="hljs-attr">proxy</span>: {  <span class="hljs-comment">// ä½¿ç”¨ä»£ç† è§£å†³è·¨åŸŸé—®é¢˜</span><br>            [process.<span class="hljs-property">env</span>.<span class="hljs-property">VUE_APP_BASE_API</span>]: {<br>                <span class="hljs-attr">target</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">VUE_APP_BASE_URL</span>,<br>                <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>,<br>                <span class="hljs-attr">pathRewrite</span>: {<br>                  [<span class="hljs-string">"^"</span> + process.<span class="hljs-property">env</span>.<span class="hljs-property">VUE_APP_BASE_API</span>]: <span class="hljs-string">""</span><br>                }<br>             }<br>            <span class="hljs-string">'/api'</span>: {<br>                <span class="hljs-attr">target</span>: <span class="hljs-string">'http://47.100.47.3/'</span>,  <span class="hljs-comment">// ç›®æ ‡ä»£ç†æœåŠ¡å™¨åœ°å€</span><br>                <span class="hljs-attr">ws</span>:<span class="hljs-literal">true</span>,<br>                <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¼€å¯ä»£ç†ï¼Œæœ¬åœ°åˆ›å»ºä¸€ä¸ªè™šæ‹ŸæœåŠ¡å™¨ å…è®¸è·¨åŸŸ</span><br>            },<br>            <span class="hljs-string">'/foo'</span>:{<br>                <span class="hljs-attr">target</span>:<span class="hljs-string">'&lt;other_url&gt;'</span><br>            }<br>        },<br>    },<br>}<br></code></pre></td></tr></tbody></table></figure><p>vueæ–‡ä»¶</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs vue">// vueæ–‡ä»¶ ç»„ä»¶ä½¿ç”¨ä¸‰æ­¥ ä½¿ç”¨ç»„ä»¶ å¯¼å…¥ç»„ä»¶ ç»„ä»¶æ³¨å†Œ<br>&lt;template&gt;<br>  &lt;h2 class="red"&gt;Hello {{ msg }}&lt;/h2&gt;<br>&lt;hello&gt;&lt;/hello&gt; // ä½¿ç”¨ç»„ä»¶<br>&lt;/template&gt;<br>&lt;script&gt;<br>import hello from './componets/HelloWorld.vue'  // å¯¼å…¥ç»„ä»¶<br>export default{<br>    name: 'World',<br>  components:{<br>      HelloWorld // æ³¨å†Œç»„ä»¶<br>    }, <br>    props:{  // props å‚æ•° å’Œ data å‚æ•° <br>        msg:{<br>            type: String,  // æ•°æ®ç±»å‹ String æ˜¯å¤§å†™çš„<br>            default: "test msg"  //é»˜è®¤å€¼<br>        }<br>    },<br>    methods:{<br>    },<br>    data(){<br>       return{<br>          msg:'test msg'<br>      }<br>    },<br>  watch:{},<br>  computed:{}<br>}<br>&lt;/script&gt;<br>&lt;style scoped&gt;<br>&lt;/style&gt;<br></code></pre></td></tr></tbody></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="vue" scheme="http://example.com/tags/vue/"/>
    
    <category term="è¯­æ³•" scheme="http://example.com/tags/%E8%AF%AD%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>(syntax)vuex</title>
    <link href="http://example.com/2022/10/18/vuex/"/>
    <id>http://example.com/2022/10/18/vuex/</id>
    <published>2022-10-18T04:36:02.922Z</published>
    <updated>2022-10-18T04:35:38.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="vuex"><a href="#vuex" class="headerlink" title="vuex"></a>vuex</h2><h3 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h3><blockquote><ul><li><p>vuex çŠ¶æ€ç®¡ç† ä¹Ÿå¯ä»¥è¯´æ˜¯å…¨å±€æ•°æ®ç®¡ç†ï¼Œå°±æ˜¯æŠŠæ¯ä¸ªé¡µé¢æˆ–è€…ç»„ä»¶çš„dataæŠ½ç¦»å¤„ç†æŒ‚è½½åˆ°storeä¸Šï¼Œæ–¹ä¾¿ç»Ÿä¸€ç®¡ç†ã€ç»„ä»¶ä¹‹é—´çš„é€šä¿¡ã€å¤šä¸ªçŠ¶æ€å˜æ›´</p></li><li><p>äº”å¤§å—ï¼šstore (ä»“åº“ã€å®¹å™¨) state(æ•°æ®ã€çŠ¶æ€)ã€getters(å…¨å±€è®¡ç®—å±æ€§)ã€mutaions(åŒæ­¥å˜æ›´ commit)ã€action(å¼‚æ­¥å˜æ›´ mutations)ã€moudle(æŠ½ç¦»æˆæ¨¡å—)</p><ul><li>state(mapState) getters(mapGetters) mutations(mapMutations || commit )/mutation-type.js  actions(mapAction || context || { commit } || dispath)</li></ul></li><li><p>mapXxx([]/{}) è¾…åŠ©å‡½æ•°ï¼š<code>å…¨å±€$store</code>ä¼ é€’åˆ°ç»„ä»¶çš„å‚æ•°   è·å–å¤šä¸ªçš„æ“ä½œ</p></li><li><p>mapXxxçš„ä½¿ç”¨ä½ç½® computed:{ mapState\mapGetters } methods:{ mapState\mapGetters }</p></li><li><p>store vs state vs mutations vs action vs getters ï¼š</p><ul><li>storeæ˜¯ä¸€ä¸ªä»“åº“ {} å¯¹è±¡ æŒ‚è½½åˆ°å…¨å±€<code>$store</code> </li><li>stateæ˜¯æ•°æ®æºä¹Ÿæ˜¯å…¨å±€çš„data  </li><li>getterså¯ä»¥ç†è§£ä¸ºå…¨å±€çš„è®¡ç®—å±æ€§(æœ‰ç¼“å­˜)  vs mutaionsçš„åŒºåˆ«æ˜¯ (è®¡ç®—å±æ€§å’Œæ–¹æ³•çš„åŒºåˆ«)</li><li>mutationså’Œactionå¯ä»¥ç†è§£ä¸º(å…¨å±€çš„æ–¹æ³•) å…¶ä¸­mutaionså¤„ç†åŒæ­¥å˜æ›´ã€actionæœ‰ä¸¤ç§åŠŸèƒ½å¤„ç†å¼‚æ­¥å˜æ›´ã€ä¹Ÿå¯ä»¥å¤„ç†å¤šæ­¥mutationså˜æ›´ã€‚å…¶ä¸­ ä½¿ç”¨mutationçš„æ–¹æ³•æ˜¯commit()æ–¹æ³•æ”¹å˜ã€ actionæ˜¯dispatch()è§¦å‘</li></ul></li></ul></blockquote><h3 id="VuexAPI"><a href="#VuexAPI" class="headerlink" title="VuexAPI"></a><em>Vuex</em>API</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm i vuex --save-dev<br>yarn add vuex<br></code></pre></td></tr></tbody></table></figure><blockquote><ul><li>stateï¼ˆçŠ¶æ€ï¼‰ï¼šå­˜æ”¾çŠ¶æ€(é©±åŠ¨åº”ç”¨çš„æ•°æ®æº)<ul><li>å®šä¹‰ï¼š<code>state:{}</code></li><li>ä½¿ç”¨ï¼š<ul><li>å…¨å±€ï¼š==this.$store.state.xxx==</li><li>å±€éƒ¨ï¼š==this.state.xxx== + <code>mapState è·å–å¤šä¸ªçŠ¶æ€</code>  <ul><li><code>computed:mapState({}//[]) computed:( ...mapState({}//[]))</code> {} åˆ«å [] å¤šå€¼</li></ul></li></ul></li></ul></li><li>getters åŠ å·¥stateæˆå‘˜ç»™å¤–ç•Œ è®¡ç®—å±æ€§  computer è®¡ç®—å±æ€§<ul><li>å®šä¹‰:<code>getter:{ å€¼(state){  }}</code></li><li>ä½¿ç”¨ï¼š<ul><li>å…¨å±€ï¼š==this.$store.getters.xxx==</li><li>å±€éƒ¨ï¼š==this.getters.xxx== + <code>mapGetters </code></li></ul></li><li>this.getter</li></ul></li><li>mutationsï¼ˆå˜æ›´ï¼‰ ï¼šstate æˆå‘˜æ“ä½œ   ==&gt; Vuex  [commitæ–¹æ³•]æäº¤æ›´æ”¹ (æ›´æ”¹ Vuex state çš„å”¯ä¸€æ–¹æ³•,åŒæ­¥æ“ä½œ)<ul><li>å®šä¹‰:<code>mutations:{ [XXX](){} }</code></li><li>ä½¿ç”¨:<ul><li>å…¨å±€ï¼š==this.$store.commit(â€˜xxxâ€™)==</li><li>å±€éƒ¨ï¼š==this.commit(â€˜xxxâ€™)== + <code>mapMutations</code></li></ul></li></ul></li><li>actionsï¼ˆåŠ¨ä½œï¼‰ ï¼šçŠ¶æ€å˜åŒ– (å¼‚æ­¥æ“ä½œ) (å¼‚æ­¥æ“ä½œå¤„ç†æ–¹æ³•,æäº¤ mutation æ¥æ›´æ”¹ state,è€Œä¸æ˜¯ç›´æ¥å˜æ›´)<ul><li>å®šä¹‰<ul><li>å¤„ç†muations: <code>actions:{ xxx//xxxä¸ºmutaionsæ–¹æ³•({commit}){ commit('xxx') } }</code></li><li>å¼‚æ­¥ï¼š<code>incrementAsync({commit}){setTimeout(()=&gt;{},3000) }</code></li></ul></li><li>ä½¿ç”¨:<ul><li>å…¨å±€ï¼š==this.$store.dispatch(â€˜xxxâ€™)==</li><li>å±€éƒ¨ï¼š==this.dispatch(â€˜xxxâ€™)== + ``mapActions`</li></ul></li></ul></li><li>å·¥ç¨‹åŒ–<ul><li>æ¨¡å—åˆ’åˆ†ï¼šmodulesï¼ˆæ¨¡å—ï¼‰ ï¼šæ¨¡å—åŒ–çŠ¶æ€ç®¡ç†</li><li>æ–‡ä»¶åˆ’åˆ†ï¼šäº”æ–‡ä»¶åˆ’åˆ†</li></ul></li></ul></blockquote><p>Vuex æ˜¯ä¸€ä¸ªä¸“ä¸º Vue.js åº”ç”¨ç¨‹åºå¼€å‘çš„<code>çŠ¶æ€ç®¡ç†ï¼ˆè®¾è®¡æ¨¡å¼ï¼‰æ¨¡å¼</code>ã€‚å®ƒé‡‡ç”¨<code>é›†ä¸­å¼å­˜å‚¨ç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€</code>ï¼Œå¹¶ä»¥<code>ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥ä¸€ç§å¯é¢„æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–</code>ã€‚(æŠŠç»„ä»¶ä¸­çš„data(çŠ¶æ€)æå–ä¸ºå…¨å±€å˜é‡ è®©æ¯ä¸€ä¸ªç»„ä»¶éƒ½èƒ½è®¿é—®åˆ°  VueXæ˜¯å…¨å±€çš„å˜é‡)</p><ul><li>store é›†ä¸­å­˜å‚¨å¤šä¸ªç»„ä»¶çš„çŠ¶æ€ï¼ˆdataï¼‰[æ•´ä¸ªåº”ç”¨æ‰€éœ€çš„ä¿¡æ¯]</li><li>å„ä¸ªç»„ä»¶è·å–storeç»„ä»¶å†…å­˜å‚¨çš„æ•°æ®</li></ul><p>å•å‘æ•°æ®æµï¼ˆState + Actions + View ï¼‰  ==&gt;   ç®€å•çš„store æ¨¡å¼   ==&gt;  çŠ¶æ€ç®¡ç†æ¨¡å¼  (State + Actions +Mutations)</p><p>view ï¼šå°† stateæ˜ å°„åˆ°è§†å›¾  ==&gt; å•å‘æ•°æ®æµ</p><p>é¡µé¢dataä»ç»„ä»¶ä¸­åˆ†ç¦»å‡ºæ¥æ–¹ä¾¿çŠ¶æ€ä¹‹é—´å…±äº« é€šè¿‡commitæ–¹å¼è¿›è¡Œæ•°æ®çš„å˜æ›´æ–¹ä¾¿è¿½è¸ªæ•°æ®æµ</p><p><code>store.state</code> æ¥è·å–çŠ¶æ€å¯¹è±¡ï¼Œä»¥åŠé€šè¿‡ <code>store.commit</code> æ–¹æ³•è§¦å‘çŠ¶æ€å˜æ›´</p><h3 id="StateçŠ¶æ€"><a href="#StateçŠ¶æ€" class="headerlink" title="StateçŠ¶æ€"></a>StateçŠ¶æ€</h3><p>vuex3(vue2)</p><ul><li>å®šä¹‰æ³¨å†Œ main.js + store.js<ul><li>export default new Vuex.Store({ state:{ xxx } }) <code>å¯¼å‡ºVuex.Store</code></li><li>import(./store) + new Vue({ store }) <code>å¯¼å…¥ + æ³¨å†ŒVue</code></li></ul></li><li>ä½¿ç”¨ï¼šä»»ä½•åœ°æ–¹<ul><li>this.$store.state.xxx</li></ul></li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// main.js</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span><br><span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">'./store'</span><br><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>({<br>  store, <span class="hljs-comment">// æ³¨å†Œ</span><br>  <span class="hljs-attr">render</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">h</span>) { <span class="hljs-keyword">return</span> <span class="hljs-title function_">h</span>(<span class="hljs-title class_">App</span>) }<br>}).$mount(<span class="hljs-string">'#app'</span>)<br><br><span class="hljs-comment">// store.js</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>({<br>  <span class="hljs-attr">state</span>: { <span class="hljs-comment">// çŠ¶æ€ å­˜å‚¨å…¨å±€dataæ•°æ® == data</span><br>    <span class="hljs-attr">count</span>:<span class="hljs-number">100</span><br>  }<br>})<br><br><span class="hljs-comment">// è°ƒç”¨ </span><br><span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-property">state</span>.<span class="hljs-property">count</span>  <br></code></pre></td></tr></tbody></table></figure><p>vuex4(vue3)</p><ul><li>import{createStore} +  export default createStore({ state })  <code>å¯¼å‡ºcreateStore</code></li><li>import{createApp} + import(store) + createApp(app).use(store).mount(â€˜#appâ€™) <code>å¯¼å…¥ createApp(App).use()</code></li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// main.js</span><br><span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span><br><span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">'./store'</span><br><span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>).<span class="hljs-title function_">use</span>(store).<span class="hljs-title function_">use</span>(router).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>) <span class="hljs-comment">// æ³¨å†Œ</span><br><br><span class="hljs-comment">// store.js</span><br><span class="hljs-keyword">import</span> { createStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'vuex'</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">createStore</span>({<br><span class="hljs-comment">// state getters mutations actions modules :{ }</span><br>})<br></code></pre></td></tr></tbody></table></figure><p>ç»„ä»¶ä½¿ç”¨stateçš„æ–¹æ³•</p><ul><li><p>state vs mapState({})  ç»„ä»¶è·å–stateçš„æ–¹æ³•</p><ul><li><p>this.$store.state.count/state.count  è·å–å•ä¸ªstate</p></li><li><p>mapState({}) è·å–å¤šä¸ªstate mapState({ }) è·å–å¤šä¸ªçŠ¶æ€çš„è®¡ç®—å±æ€§ å‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ å°†ä»–ä¸å±€éƒ¨è®¡ç®—å±æ€§æ··åˆä½¿ç”¨ </p><ul><li><p>å½“ä¸€ä¸ªç»„ä»¶éœ€è¦è·å–å¤šä¸ªçŠ¶æ€çš„æ—¶å€™ï¼Œå°†è¿™äº›çŠ¶æ€éƒ½å£°æ˜ä¸ºè®¡ç®—å±æ€§ä¼šæœ‰äº›é‡å¤å’Œå†—ä½™ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>mapState</code> è¾…åŠ©å‡½æ•°å¸®åŠ©æˆ‘ä»¬ç”Ÿæˆè®¡ç®—å±æ€§</p></li><li><p><code>mapState</code> è¾…åŠ©å‡½æ•°å¸®åŠ©æˆ‘ä»¬ç”Ÿæˆè®¡ç®—å±æ€§ æ˜ å°„ this.count ä¸º store.state.count ä¼ é€’å¤šä¸ªå€¼åˆ°ç»„ä»¶</p></li></ul></li></ul></li></ul><p>mapState()ä¸¤ç§å†™æ³• computedï¼šmapState() vs computedï¼š{ â€¦mapState() } å‚æ•°[]æˆ–{}</p><ul><li><code>computedï¼šmapState({}//[])</code><ul><li>å¯¹è±¡ï¼š<code>computedï¼šmapState({ num: (state) =&gt; state.count, })</code></li><li>æ•°ç»„ï¼š<code>computed: mapState(['num1','num2']) è®¡ç®—å±æ€§çš„åç§°ä¸ state çš„å­èŠ‚ç‚¹åç§°ç›¸åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç»™ </code>mapState<code> ä¼ ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„</code></li></ul></li><li><code>computed:{...mapState({}/[])}</code><ul><li>å¯¹è±¡å±•å¼€ç¬¦ï¼š<code>computed:{ ...mapState(['num1','num2'])}</code>   æ›´åŒä¸€ç»„ä»¶ä¼ é€’å¤šä¸ªstate</li></ul></li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// store.js</span><br><span class="hljs-keyword">import</span> { createStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'vuex'</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">creatStore</span>({<br>  <span class="hljs-attr">state</span>:{<br>    <span class="hljs-attr">firstCount</span>:<span class="hljs-number">1000</span>,<br>    <span class="hljs-attr">secondCount</span>:<span class="hljs-number">2000</span>,<br>    <span class="hljs-attr">secondCount</span>:<span class="hljs-number">3000</span><br>  }<br>})<br><br><br>&lt;h1&gt;xxx&lt;/h1&gt;<br><span class="hljs-comment">// ? å•ä¸ªç»„ä»¶è·å–å¤šä¸ªstate é€šè¿‡mapState</span><br><span class="hljs-comment">// xxx.vue</span><br><span class="hljs-keyword">import</span> { mapState } <span class="hljs-keyword">from</span> <span class="hljs-string">'vuex'</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span>{<br>  <span class="hljs-attr">computed</span>:{ <br>  <span class="hljs-title function_">xxx</span>(<span class="hljs-params"></span>){<br>      <span class="hljs-keyword">return</span> xxx<br>    }<br>  },<br>  <span class="hljs-attr">computed</span>:<span class="hljs-title function_">mapState</span>([<span class="hljs-string">'firstCount'</span>,<span class="hljs-string">'secondCount'</span>,<span class="hljs-string">'secondCount'</span>])<br>  <span class="hljs-attr">computed</span>:<span class="hljs-title function_">mapState</span>({<br>      <span class="hljs-attr">count</span>:<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.<span class="hljs-property">count</span>,<br>  <span class="hljs-comment">//count:function(state){ return state.count  }</span><br>      <span class="hljs-attr">countAlias</span>:<span class="hljs-string">'count'</span>, <span class="hljs-comment">// åˆ«å</span><br>      <span class="hljs-title function_">countPlusLocalState</span>(<span class="hljs-params">state</span>){  <span class="hljs-keyword">return</span> state.<span class="hljs-property">count</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">countAlias</span>  }<br>  })<br>}<br><br><span class="hljs-comment">// å¯¹è±¡å±•å¼€è¿ç®—ç¬¦</span><br><span class="hljs-attr">computed</span>:{<br>  <span class="hljs-title function_">localComputed</span>(<span class="hljs-params"></span>){ },<br>  ...<span class="hljs-title function_">mapState</span>({})<br>  ...<span class="hljs-title function_">mapState</span>([])<br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="Gettersè®¡ç®—å±æ€§"><a href="#Gettersè®¡ç®—å±æ€§" class="headerlink" title="Gettersè®¡ç®—å±æ€§"></a>Gettersè®¡ç®—å±æ€§</h3><ul><li>getter  åœ¨ store ä¸­å®šä¹‰â€œgetterâ€ï¼ˆå¯ä»¥è®¤ä¸ºæ˜¯ store çš„è®¡ç®—å±æ€§ æˆ–è€…æ˜¯å…¬å…±çš„è®¡ç®—å±æ€§ï¼‰ã€‚å°±åƒè®¡ç®—å±æ€§ä¸€æ ·ï¼Œgetter çš„è¿”å›å€¼ä¼šæ ¹æ®<code>å®ƒçš„ä¾èµ–è¢«ç¼“å­˜èµ·æ¥</code>ï¼Œä¸”åªæœ‰å½“å®ƒçš„ä¾èµ–å€¼å‘ç”Ÿäº†æ”¹å˜æ‰ä¼šè¢«é‡æ–°è®¡ç®— å…¬å…±çš„è®¡ç®—å±æ€§ å…¨å±€è®¡ç®—å±æ€§</li><li>å®šä¹‰<ul><li><code>getters:{ xxx: (state)=&gt; { return state.count }}</code></li><li><code>getters:{ xxx: (state,getters)=&gt; { return getters.length }}</code></li></ul></li><li>ä½¿ç”¨ <ul><li>this.$store.getters.xxx å…¨å±€storeä¸Šçš„è®¡ç®—å±æ€§</li><li>getters.xxx mapGettersä¼ é€’åˆ°ç»„ä»¶</li></ul></li><li>ä¼ é€’<ul><li>mapGetters <code>ä¼ é€’</code> è¾…åŠ©å‡½æ•° å°† storeä¸­çš„getteræ˜ å°„åˆ°å±€éƒ¨è®¡ç®—å±æ€§<ul><li><code>computed:mapGetters({}//['xxx']) </code></li><li><code>computed:{ ...mapGetters({}//[]) }</code></li></ul></li></ul></li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//store/index.js</span><br><span class="hljs-attr">state</span>:{<br><span class="hljs-attr">todos</span>:[<br>     { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'...'</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">true</span> },<br>      { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'...'</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span> }<br>]<br>},<br><span class="hljs-attr">getters</span>:{<br><span class="hljs-comment">// doneTodos æ–¹æ³•</span><br><span class="hljs-attr">doneTodos</span>:<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> {  <br><span class="hljs-keyword">return</span> state.<span class="hljs-property">todos</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.<span class="hljs-property">done</span>)<br>}<br>}<br><span class="hljs-comment">// æ¥å—å…¶ä»– getter ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°</span><br><span class="hljs-attr">getters</span>:{<br>doneTodosCountï¼š(state,getters) =&gt; {<br><span class="hljs-keyword">return</span> getters.<span class="hljs-property">doneTodos</span>.<span class="hljs-property">length</span><br>}<br>}<br><span class="hljs-comment">// é€šè¿‡å±æ€§è®¿é—® </span><br>store.<span class="hljs-property">getters</span>.<span class="hljs-property">doneTodosX</span><br><br><span class="hljs-comment">// vueç»„ä»¶ä½¿ç”¨</span><br>computedï¼š{  <span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-title function_">doneTodosCount</span>(<span class="hljs-params"></span>){<br>        <span class="hljs-comment">// return this.$store.state.todos</span><br><span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-property">getters</span>.<span class="hljs-property">doneTodosCount</span> <span class="hljs-comment">// æ‰€ä»¥ç”¨åå’Œgetteråä¸€è‡´</span><br>}<br>}<br><br><span class="hljs-comment">// é€šè¿‡æ–¹æ³•ä½¿ç”¨</span><br><span class="hljs-attr">getters</span>: {<br>  <span class="hljs-attr">getTodoById</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params">id</span>) =&gt;</span> {<br>    <span class="hljs-keyword">return</span> state.<span class="hljs-property">todos</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.<span class="hljs-property">id</span> === id)<br>  }<br>}  <br><span class="hljs-comment">// é€šè¿‡æ–¹æ³•è®¿é—®æ—¶ï¼Œæ¯æ¬¡éƒ½ä¼šå»è¿›è¡Œè°ƒç”¨ï¼Œè€Œä¸ä¼šç¼“å­˜ç»“æœ</span><br>store.<span class="hljs-property">getters</span>.<span class="hljs-title function_">getTodoById</span>(<span class="hljs-number">2</span>) <span class="hljs-comment">// -&gt; { id: 2, text: '...', done: false }</span><br><br><span class="hljs-comment">// ä½¿ç”¨å¤šä¸ªè®¡ç®—å±æ€§</span><br><span class="hljs-keyword">import</span> { mapGetters } <span class="hljs-keyword">from</span> <span class="hljs-string">'vuex'</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span>{<br>    <span class="hljs-attr">computed</span>:{<br>        <span class="hljs-comment">// ä½¿ç”¨å¯¹è±¡å±•å¼€è¿ç®—ç¬¦å°† getter æ··å…¥ computed å¯¹è±¡ä¸­</span><br>        ...<span class="hljs-title function_">mapGetters</span>([ <span class="hljs-comment">// ä¸‹é¢æ²¡æœ‰è¯•é•œ</span><br>        <span class="hljs-string">'doneTodosCount'</span>,  <span class="hljs-comment">// getters</span><br>        <span class="hljs-string">'anotherGetter'</span>,  <span class="hljs-comment">// getters</span><br>            <span class="hljs-comment">// å°†ä¸€ä¸ª getter å±æ€§å¦å–ä¸€ä¸ªåå­—ï¼Œä½¿ç”¨å¯¹è±¡å½¢å¼</span><br>            <span class="hljs-attr">donceCount</span>:<span class="hljs-string">'doneTodosCount'</span><br>        ])<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="mutationsåŒæ­¥å˜æ›´"><a href="#mutationsåŒæ­¥å˜æ›´" class="headerlink" title="mutationsåŒæ­¥å˜æ›´"></a>mutationsåŒæ­¥å˜æ›´</h3><ul><li>å˜æ›´commitå˜æ›´çŠ¶æ€  åŒæ­¥å‡½æ•°</li></ul><p>å®šä¹‰</p><ul><li>SOME_MUTATTION(state,payload){  return xxx  } </li><li>SOME_MUTATTION:(state,payload) =&gt;{ return }</li><li><code>[SOME_MUTATTION](state,payload){ }</code>   å¸¸é‡åååŠ []</li></ul><p>ä½¿ç”¨ methods:{ xxx(){ } }</p><ul><li><code>this.$store.commit('xxx')</code> å…¨å±€ä½¿ç”¨</li><li>``this.commit(â€˜xxxâ€™,100)//({ type:xxx })//(â€˜xxxâ€™,{})` æ­é…mapMutaionå±€éƒ¨ä½¿ç”¨</li></ul><p>ä¼ å‚</p><ul><li><p>mapMutaion </p><ul><li>ä½¿ç”¨å¤šä¸ªå€¼ ä½¿ç”¨mapMutations è¾…åŠ©å‡½æ•°å°†ç»„ä»¶ä¸­çš„methods æ˜ å°„ä¸º <code>store.commit</code> è°ƒç”¨ï¼ˆéœ€è¦åœ¨æ ¹èŠ‚ç‚¹æ³¨å…¥storeï¼‰</li><li><code>methods:mapMutation(['','']) </code></li><li><code>methods:{ ...mapMutation([add:'increment']) }</code><ul><li>æäº¤è½½è·ï¼ˆPayloadï¼‰è½½è·ï¼ˆ<code>ä¼ å…¥é¢å¤–çš„å‚æ•°</code>ï¼‰ è½½è· == å‚æ•°</li></ul></li></ul></li><li><p>å¸¸é‡ä»£æ›¿<code>Mutation äº‹ä»¶ç±»å‹</code> <code>mutation-type.js</code>æ–‡ä»¶</p></li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> mutations = {<br><span class="hljs-attr">increment</span>:<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.<span class="hljs-property">count</span>++<br>  <span class="hljs-attr">increment</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">state</span>){ }<br>  <span class="hljs-attr">decrement</span>:<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.<span class="hljs-property">count</span>--<br>}<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">createStore</span>({<br>  mutations<br>})<br></code></pre></td></tr></tbody></table></figure><ul><li>ä½¿ç”¨</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// ä½¿ç”¨ è½½è·æ˜¯æ•°å€¼</span><br>store.<span class="hljs-title function_">commit</span>(<span class="hljs-string">"commit"</span>,<span class="hljs-number">100</span>) <br><br><span class="hljs-comment">// ä½¿ç”¨  è½½è·æ˜¯å¯¹è±¡ å¯¹è±¡é£æ ¼çš„æäº¤æ–¹å¼æœ‰ä¸¤ç§</span><br><span class="hljs-comment">// commit æ ·å¼ä¸€</span><br>store.<span class="hljs-title function_">commit</span>(<span class="hljs-string">'increment'</span>,{<br><span class="hljs-attr">amount</span>:<span class="hljs-number">10</span><br>})<br><br><span class="hljs-comment">// æäº¤ mutation çš„å¦ä¸€ç§æ–¹å¼æ˜¯ç›´æ¥ä½¿ç”¨åŒ…å« `type` å±æ€§çš„å¯¹è±¡</span><br>store.<span class="hljs-title function_">commit</span>({<br><span class="hljs-attr">type</span>:<span class="hljs-string">'increment'</span>,<br><span class="hljs-attr">amount</span>:<span class="hljs-number">10</span><br>})<br></code></pre></td></tr></tbody></table></figure><ul><li>è½½è·ï¼ˆç¬¬äºŒä¸ªå‚æ•°ï¼‰</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè½½è·ï¼ˆå‚æ•°ï¼‰åº”è¯¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™æ ·å¯ä»¥åŒ…å«å¤šä¸ªå­—æ®µå¹¶ä¸”è®°å½•mutationä¼šæ›´æ˜“è¯»</span><br><span class="hljs-attr">mutations</span>:{<br><span class="hljs-title function_">increment</span>(<span class="hljs-params">state,payload</span>){<br>state.<span class="hljs-property">count</span> += payload.<span class="hljs-property">amount</span><br>}<br>}<br><span class="hljs-comment">// commit æ ·å¼ä¸€</span><br>store.<span class="hljs-title function_">commit</span>(<span class="hljs-string">'increment'</span>,{<br><span class="hljs-attr">amount</span>:<span class="hljs-number">10</span><br>})<br><br><span class="hljs-attr">mutations</span>:{<br><span class="hljs-title function_">increment</span>(<span class="hljs-params">state,n</span>){<br>state.<span class="hljs-property">count</span> += n<br>}<br>}<br>store.<span class="hljs-title function_">commit</span>(<span class="hljs-string">"increment"</span>,<span class="hljs-number">10</span>)<br></code></pre></td></tr></tbody></table></figure><ul><li>mapMutaionï¼ˆä¼ é€’å¤šä¸ªMutaionï¼‰</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// mapMutations</span><br><span class="hljs-keyword">import</span> { mapMutations } <span class="hljs-keyword">from</span> <span class="hljs-string">'Vuex'</span><br><br><span class="hljs-attr">methods</span>:{<br>  ...<span class="hljs-title function_">mapMutations</span>([ <br>    <span class="hljs-string">'increment'</span>, <span class="hljs-comment">// å°† `this.increment()` æ˜ å°„ä¸º `this.$store.commit('increment')`</span><br>    <span class="hljs-comment">// `mapMutations` ä¹Ÿæ”¯æŒè½½è·ï¼š</span><br>    <span class="hljs-string">'incrementBy'</span> <span class="hljs-comment">// å°† `this.incrementBy(amount)` æ˜ å°„ä¸º `this.$store.commit('incrementBy', amount)`</span><br>  ]),<br>    ...<span class="hljs-title function_">mapMUtations</span>([<br>    <span class="hljs-attr">add</span>:<span class="hljs-string">'increment'</span> <span class="hljs-comment">//  båˆ«å å°† `this.add()` æ˜ å°„ä¸º `this.$store.commit('increment')`</span><br>  ])<br>}<br></code></pre></td></tr></tbody></table></figure><ul><li>mutation-type æŠŠmutationä¸­çš„å¸¸é‡æŠ½ç¦»å‡ºæ¥</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// mutation-type.js æŠ½ç¦»å¸¸é‡</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">SOME_MUTATTION</span> = <span class="hljs-string">'SOME_MUTATION'</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">ADD</span> = <span class="hljs-string">'ADD'</span><br><br><span class="hljs-comment">// mutation.js</span><br><span class="hljs-keyword">import</span> { <span class="hljs-variable constant_">SOME_MUTATION</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./mutation-type'</span> <span class="hljs-comment">// å¯¼å…¥å¸¸é‡</span><br><span class="hljs-attr">mutations</span>:{<br>  <span class="hljs-comment">// ä½¿ç”¨ ä¸‰ç§æ–¹å¼</span><br>  <span class="hljs-title function_">SOME_MUTATTION</span>(<span class="hljs-params">state,payload</span>){  <span class="hljs-keyword">return</span> xxx  } <br>  <span class="hljs-attr">SOME_MUTATTION</span>:<span class="hljs-function">(<span class="hljs-params">state,payload</span>) =&gt;</span>{ <span class="hljs-keyword">return</span> }<br>  [<span class="hljs-variable constant_">SOME_MUTATTION</span>](state,payload){ } ä½¿ç”¨<span class="hljs-title class_">ES2015</span>é£æ ¼çš„è®¡ç®—å±æ€§å‘½ååŠŸèƒ½æ¥ä½¿ç”¨ä¸€ä¸ªå¸¸é‡ä½œä¸ºå‡½æ•°å<br>  <span class="hljs-comment">// state.count = 1000</span><br>  [<span class="hljs-variable constant_">ADD</span>](state){ <span class="hljs-keyword">return</span> state.<span class="hljs-property">count</span> + <span class="hljs-number">100</span> }<br>}<br><br><span class="hljs-comment">// xxx.vue ä½¿ç”¨</span><br><span class="hljs-keyword">import</span> { mapMutations } <span class="hljs-keyword">from</span> <span class="hljs-string">'Vuex'</span><br><br><span class="hljs-attr">method</span>:{<br>  <span class="hljs-comment">// ä¼ é€’å¤šä¸ªå€¼</span><br>  ...<span class="hljs-title function_">mapMuations</span>({ <span class="hljs-attr">xxx</span>:<span class="hljs-string">'SOME_MUTATTION'</span><span class="hljs-comment">//åˆ«å,add:'ADD'  }/['SOME_MUTATTION']),</span><br>  <span class="hljs-attr">clickFuc</span>:<span class="hljs-function">()=&gt;</span> {  <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-title function_">commit</span>(add)   }               <br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="Actionså˜æ›´Mutaionså¼‚æ­¥"><a href="#Actionså˜æ›´Mutaionså¼‚æ­¥" class="headerlink" title="Actionså˜æ›´Mutaionså¼‚æ­¥"></a>Actionså˜æ›´Mutaionså¼‚æ­¥</h3><p>Actionçš„ä½œç”¨ æäº¤mutations </p><p>Action ç±»ä¼¼ mutation ä¸åŒåœ¨äº</p><ul><li><code>Actionæäº¤çš„æ˜¯mutation</code>è€Œä¸æ˜¯ç›´æ¥å˜æ›´çŠ¶æ€ å˜æ›´mutaions  è§£å†³ mutationæ˜¯åŒæ­¥å‡½æ•°çš„ç¼ºé™· </li><li>Actionå¯ä»¥åŒ…å«ä»»æ„å¼‚æ­¥æ“ä½œ</li></ul><p>å®šä¹‰</p><ul><li><code>mutation:[increment](state){ return state.count++ }</code></li><li>action<ul><li>å¤„ç†å¤šæ­¥mutations<ul><li>contextï¼š<code>action:{ increment(context){ context.commit('increment') } }</code> context.commit ç»“æ„èµ‹å€¼</li><li>æ¨èï¼š{commit}ï¼š<code>actions:{ increment:({ commit }){ commit('increment') } }</code></li></ul></li><li>å¤„ç†å¼‚æ­¥æ“ä½œ<ul><li><code>incrementAsync({commit}){setTimeout(()=&gt;{},3000) }</code></li></ul></li></ul></li></ul><p>ä½¿ç”¨</p><ul><li><code>this.$store.dispatch('xxx')</code> å…¨å±€ä½¿ç”¨</li><li><code>this.dispatch.xxx()</code> æ­é…mapActionså±€éƒ¨ä½¿ç”¨</li></ul><p>ä¼ å‚</p><ul><li>mapActions<ul><li>Actions æ”¯æŒåŒæ ·çš„è½½è·æ–¹å¼å’Œå¯¹è±¡æ–¹å¼è¿›è¡Œåˆ†å‘ï¼š</li><li><code>methods:{ ...mapActions({ }//[]) }  methods:mapActions({ }//[]) }</code></li></ul></li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// store.js</span><br><span class="hljs-keyword">const</span> store = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>({<br><span class="hljs-attr">state</span>:{<br><span class="hljs-attr">count</span>:<span class="hljs-number">0</span><br>},<br><span class="hljs-attr">mutations</span>:{<br>[increment](state){  <br>state.<span class="hljs-property">count</span>++<br>}<br>},<br>  <br><span class="hljs-comment">// Action å‡½æ•°æ¥å—ä¸€ä¸ªä¸ store å®ä¾‹å…·æœ‰ç›¸åŒæ–¹æ³•å’Œå±æ€§çš„ context å¯¹è±¡ï¼Œå› æ­¤ä½ å¯ä»¥è°ƒç”¨ `context.commit` æäº¤ä¸€ä¸ª mutationï¼Œæˆ–è€…é€šè¿‡ `context.state` å’Œ `context.getters` æ¥è·å– state å’Œ getters  </span><br><span class="hljs-comment">// context</span><br><span class="hljs-attr">actions</span>:{<br><span class="hljs-title function_">increment</span>(<span class="hljs-params">context</span>){<br>context.<span class="hljs-title function_">commit</span>(<span class="hljs-string">'increment'</span>)<br>      <span class="hljs-comment">// mutation $store.commit('increment')</span><br>      <span class="hljs-comment">// action context.commit('increment')</span><br>}<br>}<br><span class="hljs-comment">// es2015</span><br>  <span class="hljs-attr">actions</span>:{<br>  <span class="hljs-attr">increment</span>:({ commit }){<br>  <span class="hljs-title function_">commit</span>(<span class="hljs-string">'increment'</span>)<br>}<br>}<br>})<br><br><span class="hljs-comment">// åˆ†å‘Action  é€šè¿‡`store.dispathæ–¹æ³•è§¦å‘</span><br><span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-title function_">dispatch</span>(<span class="hljs-string">'increment'</span>)<br><br><span class="hljs-comment">// `store.dispatch` å¯ä»¥å¤„ç†è¢«è§¦å‘çš„ action çš„å¤„ç†å‡½æ•°è¿”å›çš„ Promiseï¼Œå¹¶ä¸” `store.dispatch` ä»æ—§è¿”å› Promise</span><br><span class="hljs-attr">action</span>:{ <span class="hljs-comment">// action å¼‚æ­¥æ“ä½œ</span><br><span class="hljs-title function_">incrementAsync</span>(<span class="hljs-params">{commit}</span>){<br><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()=&gt;</span>{<br><span class="hljs-title function_">commit</span>(<span class="hljs-string">'increment'</span>)<br>},<span class="hljs-number">1000</span>)<br>}<br>}<br><br><span class="hljs-comment">// xxx.vue</span><br><span class="hljs-keyword">import</span> { mapActions } <span class="hljs-keyword">from</span> <span class="hljs-string">'vuex'</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span>{<br><span class="hljs-attr">methods</span>:{<br> ...<span class="hljs-attr">mapActions</span>:({<br>   <span class="hljs-string">'increment'</span>, <span class="hljs-comment">// å°† `this.increment()` æ˜ å°„ä¸º `this.$store.dispatch('increment')`</span><br> }),<br>}<br>}<span class="hljs-string">`</span><br></code></pre></td></tr></tbody></table></figure><h3 id="vuexå·¥ç¨‹åŒ–"><a href="#vuexå·¥ç¨‹åŒ–" class="headerlink" title="vuexå·¥ç¨‹åŒ–"></a>vuexå·¥ç¨‹åŒ–</h3><h4 id="Moduleæ¨¡å—åˆ’åˆ†"><a href="#Moduleæ¨¡å—åˆ’åˆ†" class="headerlink" title="Moduleæ¨¡å—åˆ’åˆ†"></a>Moduleæ¨¡å—åˆ’åˆ†</h4><p>ç±»ä¼¼äºå‘½åç©ºé—´ï¼Œç”¨äºé¡¹ç›®ä¸­å°†å„ä¸ªæ¨¡å—çš„çŠ¶æ€åˆ†å¼€å®šä¹‰å’Œæ“ä½œï¼Œä¾¿äºç»´æŠ¤</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">const moduleA = {<br>  state:() =&gt; ({...}),<br>  mutations:{...},<br>    actions:{ ... },<br>    getters:{ ... }<br>}<br>const store = new Vuex.Store({<br>    modules:{<br>        a: moduleA,<br>        b: moduleB<br>    }<br>})<br>store.state.a  --&gt; moduleA çš„çŠ¶æ€<br>store.state.b  --&gt; moduleB çš„çŠ¶æ€<br></code></pre></td></tr></tbody></table></figure><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>({<br>  <span class="hljs-attr">strict</span>:<span class="hljs-literal">true</span><br><span class="hljs-attr">strict</span>:process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENE</span> !== <span class="hljs-string">'production'</span><br>})<br></code></pre></td></tr></tbody></table></figure><h4 id="äº”æ–‡ä»¶åˆ’åˆ†"><a href="#äº”æ–‡ä»¶åˆ’åˆ†" class="headerlink" title="äº”æ–‡ä»¶åˆ’åˆ†"></a>äº”æ–‡ä»¶åˆ’åˆ†</h4><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">store/<br>--index.js<br>--getters.js<br>--actions.js<br>--mutations.js<br>--muations_type.js  // è¯¥é¡¹ä¸ºå­˜æ”¾mutaionsæ–¹æ³•å¸¸é‡çš„æ–‡ä»¶<br>// æ›´å¤æ‚ åŠŸèƒ½æ¨¡å—åˆ’åˆ†<br>--module<br>----cart.js<br>----products.js<br></code></pre></td></tr></tbody></table></figure><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">mutaions å’Œ actions å±‚ è´Ÿè´£å°†getter çš„ è®¡ç®—å±æ€§ å˜æ›´åˆ° state ä¸Š<br>- æ–¹æ³•å(state,å€¼){}<br>- `state.goods.totalPrice = this.getters.totalPrice`<br>- `this.commit(â€˜resultâ€™,â€™msgâ€™)`<br>- state ==&gt; mutations ã€actions  ==&gt;  getter<br></code></pre></td></tr></tbody></table></figure><h3 id="çˆ¶å­ç»„ä»¶é€šä¿¡"><a href="#çˆ¶å­ç»„ä»¶é€šä¿¡" class="headerlink" title="çˆ¶å­ç»„ä»¶é€šä¿¡"></a>çˆ¶å­ç»„ä»¶é€šä¿¡</h3><h4 id="çˆ¶å­"><a href="#çˆ¶å­" class="headerlink" title="çˆ¶å­"></a>çˆ¶å­</h4><ul><li><code> çˆ¶å­ å­propsçˆ¶æ ‡ç­¾å±æ€§  å­ props:["xxx"]  çˆ¶ &lt;son :xxx="100"&gt;&lt;son&gt;</code></li></ul><h4 id="å­çˆ¶"><a href="#å­çˆ¶" class="headerlink" title="å­çˆ¶"></a>å­çˆ¶</h4>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="vue" scheme="http://example.com/tags/vue/"/>
    
    <category term="è¯­æ³•" scheme="http://example.com/tags/%E8%AF%AD%E6%B3%95/"/>
    
  </entry>
  
</feed>
