<!DOCTYPE html><html lang="zh-CN" color-mode="light"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="keywords" content="前端、免流、技术、运维、手机"><meta name="author" content="记住"><meta name="description" content="我希望有个如你一般的人。 如这山间清晨一般明亮清爽的人， 如奔赴古城道路上阳光一般的人， 温暖而不炙热，覆盖我所有肌肤。 由起点到夜晚，由山野到书房， 一切问题的答案都很简单。 我希望有个如你一般的人，贯彻未来，数遍生命的公路牌。"><title>(syntax)微信小程序 | 从你的全世界路过</title><link rel="apple-touch-icon" href="/images/avatar.png"><link rel="icon" href="/images/avatar.png"><link href="https://fonts.googleapis.com/css?family=Raleway&display=swap" rel="stylesheet"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1886449_67xjft27j1l.css"><link rel="stylesheet" href="/css/figcaption/mac-block.css"><script defer type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><link href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" rel="stylesheet"><script defer type="text/javascript" src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script src="/js/fancybox.js"></script><script>var html=document.documentElement;const colorMode=localStorage.getItem("color-mode");colorMode&&document.documentElement.setAttribute("color-mode",colorMode)</script><meta name="generator" content="Hexo 6.3.0"><style>.github-emoji{position:relative;display:inline-block;width:1.2em;min-height:1.2em;overflow:hidden;vertical-align:top;color:transparent}.github-emoji>span{position:relative;z-index:10}.github-emoji .fancybox,.github-emoji img{margin:0!important;padding:0!important;border:none!important;outline:0!important;text-decoration:none!important;user-select:none!important;cursor:auto!important}.github-emoji img{height:1.2em!important;width:1.2em!important;position:absolute!important;left:50%!important;top:50%!important;transform:translate(-50%,-50%)!important;user-select:none!important;cursor:auto!important}.github-emoji-fallback{color:inherit}.github-emoji-fallback img{opacity:0!important}</style><link rel="alternate" href="/atom.xml" title="从你的全世界路过" type="application/atom+xml"></head><body><div id="app"><div class="header"><div class="avatar"><a href="/"><img src="/images/avatar.png" alt=""></a><div class="nickname"><a href="/">cloud</a></div></div><h1 style="text-align:center;margin-bottom:40px" id="jinrishici-sentence">正在加载今日诗词....</h1><script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script><div class="navbar"><ul><li class="nav-item" data-path="/"><a href="/">Home</a></li><li class="nav-item" data-path="/archives/"><a href="/archives/">Archives</a></li><li class="nav-item" data-path="/tags/"><a href="/tags/">Tags</a></li><li class="nav-item" data-path="/friends/"><a href="/friends/">Friends</a></li><li class="nav-item" data-path="/about/"><a href="/about/">About</a></li></ul></div></div><script src="/js/activeNav.js"></script><div class="flex-container"><script async type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]]}}</script><script async type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.10/dist/clipboard.min.js"></script><script src="/js/codeCopy.js"></script><div class="container post-details" id="post-details"><div class="post-content"><div class="post-title">(syntax)微信小程序</div><div class="post-attach"><span class="post-pubtime"><i class="iconfont icon-updatetime mr-10" title="更新时间"></i> 2022-09-01 00:00:00 </span><span class="post-tags"><i class="iconfont icon-tags mr-10" title="标签"></i> <span class="span--tag mr-8"><a href="/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" title="微信小程序">#微信小程序</a></span></span></div><div class="markdown-body"><h1 id="微信小程序"><a href="#微信小程序" class="headerlink" title="微信小程序"></a>微信小程序</h1><blockquote><p>开发文档：<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/">微信开放文档</a></p><p>Github</p><ul><li><a target="_blank" rel="noopener" href="https://github.com/justjavac/awesome-wechat-weapp">justjavac/awesome-wechat-weapp: 微信小程序开发资源汇总 <span class="github-emoji"><span>💯</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f4af.png?v8" aria-hidden="true" onerror='this.parent.classList.add("github-emoji-fallback")'></span></a></li><li><a target="_blank" rel="noopener" href="https://github.com/opendigg/awesome-github-wechat-weapp">opendigg/awesome-github-wechat-weapp: 微信小程序开源项目库汇总</a></li><li><a target="_blank" rel="noopener" href="https://github.com/aben1188/awesome-wepy">aben1188/awesome-wepy: Awesome for wepy ! 微信小程序组件化开发框架wepy开发资源汇总</a></li><li><a target="_blank" rel="noopener" href="https://github.com/EastWorld/wechat-app-mall">EastWorld/wechat-app-mall: 微信小程序商城，微信小程序微店</a></li></ul><p>教程</p><ul><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903670589423623">近两万字小程序攻略发布了</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903614847123463">微信小程序源码获取教程</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903588498522120">手把手教会你小程序登录鉴权</a></li><li><input checked disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903552687538190">从零开始一个微信小程序版知乎</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903875271458829">仿网易云音乐微信小程序</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903630714519559">两天撸一个天气应用微信小程序</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903616961052679">滴滴一夏， 小程序专车来了</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6995356720125968398">【微信小程序】小程序原生代码生成海报</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903661743636494">两周撸一个掘金微信小程序</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903616956858376">微信小程序——商城篇</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903681175846925">小程序的全栈开发新时代</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6924089220172611592">简版掘金-上班摸鱼小程序上线了</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903862533373959">我写小程序像菜虚鲲——1、唱，跳，rap，篮球</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903606227828749">微信小程序开发–『狗蛋TV』</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903618768797703">『改良版青桔单车』微信小程序</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903631179759623">基于mpvue的仿滴滴出行小程序</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903619444244488">米8抢到没？不急，撸个小程序先😎</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844904012945326094">京喜首页（微信购物入口）跨端开发与优化实践</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6930838665404874766">开工啦-耗时4天写了一个小程序</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6997644572629139492">仿得物微信小程序（动手就会🙌）</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903801221021704">给媳妇做一个记录心情的小程序</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903775044370445">微信小程序websocket聊天室</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6886267464506671118">手把手教你写微信小程序</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903640310743048">手把手教你搭建微信小程序服务器（HTTPS）</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6865920270218035214">小程序开发不得不爬的坑，我替你爬过了！</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903821332709383">从0开始搭建微信小程序(前后端)的全过程</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903665422041095">微信小程序实现商城案例（赋源码)</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903665363501063">微信小程序入门一篇就够了 豆瓣电影Top250</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903667682770957">mpvue微信小程序-仿网易云音乐</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903758250377230">手摸手聊聊小程序持续集成Jenkins</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903967739084807">[填坑手册]小程序PC版来了，如何做PC端的兼容？！</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://juejin.cn/book/6844733743266005006">微信小程序开发入门：从 0 到 1 实现天气小程序 - 三水清 - 掘金小册</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://github.com/xiehui999/SmallAppForQQ">xiehui999/SmallAppForQQ: 微信小程序(微信应用号)微信小程序官方demo,官方文档,开发工具，高仿手机QQ应用程序,持续更新中…</a></li></ul><p>视频</p><ul><li><input checked disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://coding.imooc.com/learningpath/route?pathId=31">微信小程序从0基础到精通_学习路线_编程项目实战_实战学习路径_慕课网</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://www.imooc.com/learn/974">微信小程序开发入门视频教程-慕课网</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/quickstart/#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%8A%80%E6%9C%AF%E5%8F%91%E5%B1%95%E5%8F%B2">小程序简介 | 微信开放文档</a></li><li><input checked disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1nE41117BQ?from=search&amp;seid=10181070238783582949">黑马程序员Web前端教程_零基础玩转微信小程序</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1sx411z77P?from=search&amp;seid=9370553712854171431">【微信小程序】从入门到入土课程</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1WQ4y1T7D8?from=search&amp;seid=9370553712854171431">2020最新微信小程序开发零基础入门+项目案例【新视觉实训】</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1i4411c7dU?from=search&amp;seid=9370553712854171431">微信小程序2019快速入门+四个实战小程序</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV12K411A7A2?from=search&amp;seid=9370553712854171431">尚硅谷2021版微信小程序开发（零基础小程序开发入门到精通）</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://coding.imooc.com/class/75.html">微信小程序开发入门与实战教程-慕课网实战</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://coding.imooc.com/class/373.html">微信小程序云开发_从0打造云音乐全栈小程序-慕课网</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV15b411P7e6?from=search&amp;seid=14286172847930360732">尚硅谷小程序框架Mpvue教程(mpvue小程序框架精讲)</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1BJ411W7pX?from=search&amp;seid=7278699364733577484">Uni-App从入门到实战-黑马程序员杭州校区出品</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://www.imooc.com/learn/1084">Taro多端框架开发外卖首页-慕课网</a></li><li><input disabled type="checkbox"> <a target="_blank" rel="noopener" href="https://cloud.tencent.com/edu/paths/series/applet">小程序学习路径课 - 学习路径 - 腾讯产业互联网学堂</a></li></ul><p>项目</p><ul><li><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903670589423623">近两万字小程序攻略发布了</a>、</li><li><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903589148639239">仿美团外卖的全栈项目(vue+node+mongodb)带支付-&gt;大三求实习</a></li><li><a target="_blank" rel="noopener" href="https://github.com/bailicangdu/vue2-elm">bailicangdu/vue2-elm: 基于 vue2 + vuex 构建一个具有 45 个页面的大型单页面应用</a></li><li><a target="_blank" rel="noopener" href="https://github.com/PanJiaChen/vue-element-admin">PanJiaChen/vue-element-admin: A magical vue admin https://panjiachen.github.io/vue-element-admin</a></li><li><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_42049445/article/details/94164330">Vue项目实战——仿每日优鲜（移动端网站）_五柳-CSDN博客_vue实战项目</a></li><li><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903552687538190">从零开始一个微信小程序版知乎</a></li><li><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903616961052679">滴滴一夏， 小程序专车来了</a></li><li><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903616956858376">微信小程序——商城篇</a></li><li><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903587097608200">美团小程序框架mpvue入门教程</a><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903630714519559">两天撸一个天气应用微信小程序</a></li><li><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903614847123463">微信小程序源码获取教程</a></li><li><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903716756127751">你想要的全平台全栈开源项目 - Vue、React、小程序、Android原生、ReactNative、java后端</a></li><li><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903757256327175">mpvue+小程序云开发，纯前端实现婚礼邀请函</a></li><li><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903779154804744">Taro 多端开发的正确姿势：打造三端统一的网易严选（小程序、H5、React Native）</a></li><li><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844904016581754894">硬核！ 逛了4年Github ，一口气把我收藏的 Java 开源项目分享给你！</a></li></ul></blockquote><h2 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h2><h3 id="小程序基础"><a href="#小程序基础" class="headerlink" title="小程序基础"></a>小程序基础</h3><p>微信⼩程序，简称⼩程序，英⽂名 Mini Program ，是⼀种不需要下载安装即可使⽤的应⽤，⽤⼾扫⼀扫或搜⼀下即可打开应⽤</p><p>协同工作和发布</p><ul><li>权限管理 ： 员工的权限边界划分</li><li>项目成员的组织结构 项目管理者（管理员） ==&gt; 产品组（提需求） 设计组（出设计方案） 开发组（代码开发） 测试组（项目测试）</li><li>小程序开发流程 提出需求（产品组） =&gt; 设计（设计组） =&gt; 开发（开发组） =&gt; 体验（产品组和设计组） =&gt; 测试（测试组） =&gt; 发布（管理者）</li><li>成员管理的两个方面 小程序成员管理体现在管理员对小程序项目成员（运营者 开发者 数据分析者）以及体验成员的管理</li><li>不同项目成员的权限： 运营者 开发者（开发权限、体验者权限、登录（登录小程序管理后台）、开发设置（设置小程序服务器域名、消息推送以及扫描链接二维码打开小程序）、腾讯云管理（云开发设置）） 数据分析者</li></ul><p>软件开发过程中的不同版本</p><ul><li>开发版本 、体验测试、发布正式版（修复BUG）</li></ul><p>小程序版本</p><ul><li>开发版本 、体验版本、审核中的版本、线上版本</li></ul><p>发布和上线</p><ul><li>上传代码 -&gt; 提交审核 -&gt; 发布（上传按钮 版本号 项目备注） 在小程序管理后台：查看上传之后的版本 管理 版本管理 =&gt; 提交审核 =&gt; 发布</li></ul><p>小程序码 vs 普通二维码</p><ul><li>小程序管理后台 获取小程序码</li></ul><p>运营数据</p><ul><li>小程序后台</li><li>小程序数据助手（微信小程序）</li></ul><p>宿主环境 指的是程序运行所必须的依赖环境（Android iOS）</p><ul><li><p>微信是微信小程序的宿主环境 小程序宿主环境包含的内容</p><ul><li><p>通信模型（模式） 通信的主体</p><ul><li>渲染层（WXML模板 WXSS样式） 逻辑层 (JS脚本) &lt; = &gt; Native （微信客户端） &lt; = &gt; 第三方客户端</li><li>小程序的通信模型分为两部分<ul><li>渲染层和逻辑层的通信 微信客户端转发</li><li>逻辑层和第三方服务器之间的通信 微信客户端转发</li></ul></li></ul></li><li><p>运行机制</p><ul><li>小程序启动过程<ul><li>代码包下载到本地 =&gt; 解析app.json全局配置文件 =&gt; app.js小程序入口文件（调用App()创建小程序实例）=&gt; 渲染首页 =&gt; 小程序启动完成</li></ul></li><li>页面渲染过程<ul><li>加载解析页面.json文件 =&gt; 加载页面的.wxml模板和.wxss样式 =&gt; 执行页面的.js文件，调用Page()创建实例 =&gt; 页面渲染完成</li></ul></li></ul></li></ul></li></ul><p>⼩程序框架的⽬标是通过尽可能简单、⾼效的⽅式让开发者可以在微信中开发具有原⽣ APP 体验的服务。⼩程序框架提供了⾃⼰的视图层描述语⾔ wxml 和 wxss，以及 javascript，并在视图层与逻辑层间提供了数据传输和事件系统，让开发者能够专注于数据与逻辑。</p><h3 id="安装环境部署"><a href="#安装环境部署" class="headerlink" title="安装环境部署"></a>安装环境部署</h3><ul><li>AppID：后期调⽤微信⼩程序的接⼝等功能，需要索取开发者的⼩程序中AppID ，所以在注册成功后，可登录，然后获取APPID。</li><li>注册账号 ==&gt; 获取APPID ==&gt; 开发工具</li></ul><h3 id="小程序结构目录"><a href="#小程序结构目录" class="headerlink" title="小程序结构目录"></a>小程序结构目录</h3><p>小程序文件结构和传统web对比</p><table><thead><tr><th>结构</th><th>传统web</th><th>微信小程序</th></tr></thead><tbody><tr><td>结构</td><td>HTML</td><td>WX ML</td></tr><tr><td>样式</td><td>CSS</td><td>WX SS</td></tr><tr><td>逻辑</td><td>JavaScript</td><td>JavaScript</td></tr><tr><td>配置</td><td>无</td><td>JSON</td></tr></tbody></table><ul><li>传统web 是三层结构。⽽微信⼩程序 是四层结构，多了⼀层 配置.json</li></ul><p>目录结构</p><ul><li>pages 页面 utils app.js 入口文件 app.json 全局配置文件 app.wxss全局样式 .cofig.json 项目配置文件 sitemap.son sitemap.json // 微信索引配置文件 配置小程序及其页面是否允许被微信索引</li><li>page/index js(脚本文件)/json(页面的配置文件)/wxml(页面的模本结构文件)/wxss(页面的样式表文件)</li><li>json 配置文件 4种 app.json project.config.json sitemap.json 每个页面文件夹的json配置文件</li></ul><p>基本配置目录</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash">// 页面文件夹<br>pages/<br>--index/ // 首页<br>----index.js<br>----index.json<br>----index.wxml<br>----index.wxss<br>--logs<br>----logs.js<br>----logs.json<br>----logs.wxml<br>----logs.wxss<br>utils<br>----util.js // 工具性质模块 <br>app.js  // 项目的全局 入口文件<br>app.json // 全局配置文件<br>app.wxss  // 全局样式文件<br>project.config.json // 项目的配置文件如 appid<br>sitemap.json // 微信索引配置文件 配置小程序及其页面是否允许被微信索引<br></code></pre></td></tr></tbody></table></figure><h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><ul><li>两种配置文件，一种是全局的app.json和页面⾃⼰的page.json</li><li>json文件中不能有注释</li></ul><p>全局配置文件 app.json</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">//app.json  全局的配置文件 </span><br><span class="hljs-punctuation">{</span><br>    <span class="hljs-attr">"pages"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span> <span class="hljs-comment">// ⽤于描述当前⼩程序所有⻚⾯路径，这是为了让微信客⼾端知道当前你的⼩程序⻚⾯定义在哪个⽬录。 小程序所有页面的路径（页面路径）</span><br>        <span class="hljs-string">"pages/index/index"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 页面index</span><br>        <span class="hljs-string">"pages/logs/logs"</span><br>    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"window"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span> <span class="hljs-comment">// 定义⼩程序所有⻚⾯的顶部背景颜⾊，⽂字颜⾊定义等。 全局定义小程序所有页面的背景色、文字颜色等（窗口外观 界面表现 底部tab）</span><br>      <span class="hljs-comment">// backgroundTextStyle  navigationBar backgroundColor/ TitleText /TextStyle</span><br>        <span class="hljs-attr">"backgroundTextStyle"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"light"</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">"naviagtionBarBackgroundColor"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"#fff"</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">"navigationBarTitleText"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"WeChat"</span><span class="hljs-punctuation">,</span><br>		    <span class="hljs-attr">"navigationBarTextStyle"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"black"</span> <br>    <span class="hljs-punctuation">}</span><br> 	 <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"v2"</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// 全局定义小程序组件使用的样式版本</span><br>   <span class="hljs-attr">"sitemapLocation"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"sitemap.json"</span> <span class="hljs-comment">// 指明sitemap.json文件的位置</span><br><span class="hljs-punctuation">}</span><br></code></pre></td></tr></tbody></table></figure><p>页面配置文件 page.json：</p><p>其实用来表示页面目录下的page.json这类和⼩程序⻚⾯相关的配置。开发者可以独⽴定义每个⻚⾯的⼀些属性，如顶部颜⾊、是否允许下拉刷新等等。</p><p>⻚⾯的配置只能设置app.json中部分 window配置项的内容，⻚⾯中配置项会覆盖 app.json的window 中相同的配置项。</p><ul><li><p>页面 .json 配置文件</p></li><li><p>project.config.json 项目配置文件 小程序开发工具个性化配置</p></li></ul><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json">setting   编译相关设置<br>projectname 项目名称<br>appid 小程序的账号ID<br><span class="hljs-comment">// checkSiteMap false 关闭 sitemap.json 提示</span><br></code></pre></td></tr></tbody></table></figure><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">sitemap.json 配置小程序是否允许微信索引 小程序内搜索 PC网页的SEO<br>rules[<br> action:"allow", // disallow<br> "page":"*"<br>]<br></code></pre></td></tr></tbody></table></figure><table><thead><tr><th>属性</th><th>类型</th><th>默认值</th><th>描述</th></tr></thead><tbody><tr><td>navigationBarBackgroundColor</td><td>HexColor</td><td>#000000</td><td>导航栏背景颜色</td></tr><tr><td>navigationBarTextStyle</td><td>String</td><td>white</td><td>导航栏标题颜⾊，仅⽀持 black/white</td></tr><tr><td>navigationBarTitleText</td><td>String</td><td></td><td>导航栏标题文字内容</td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td>backgroundTextStyle</td><td>HexColor</td><td>#fffff</td><td>窗口背景色</td></tr><tr><td>enablePullDownRefresh</td><td>Boolean</td><td>false</td><td>是否全局开启下拉刷新。详⻅ Page.onPullDownRefresh</td></tr><tr><td>onReachBottomDistance</td><td>Number</td><td>50</td><td>⻚⾯上拉触底事件触发时距⻚⾯底部距离，单位为px。 详⻅Page.onReachBottom</td></tr><tr><td>disableScroll</td><td>Boolean</td><td>false</td><td>设置为 true则⻚⾯整体不能上下滚动；只在⻚⾯配置中有<br>效，⽆法在 app。json中设置该项</td></tr></tbody></table><p>sitemap 配置</p><ul><li>sitemap.json 文件用于配置小程序及其页面是否允许被微信索引</li></ul><h3 id="模板语法"><a href="#模板语法" class="headerlink" title="模板语法"></a>模板语法</h3><p>WXML (WeiXin Markup Language) 是框架设计的一套标准语言，结合基础组件、事件系统、可以构建出页面的结构</p><h4 id="数据绑定"><a href="#数据绑定" class="headerlink" title="数据绑定"></a>数据绑定</h4><ul><li>花括号和引号之间如果有空格，将最终被解析成为字符串</li></ul><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">view</span>&gt;</span>{{ message }}<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"item-{{id}}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span> // 组件属性<br><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">hidden</span>=<span class="hljs-string">"{{ flag ? true:false}} "</span>&gt;</span>Show<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span> // 三元运算符<br><span class="hljs-tag">&lt;<span class="hljs-name">view</span>&gt;</span> {{a + b}} + {{c}} + d <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span> // 算数运算<br><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">wx:if</span>=<span class="hljs-string">"{{length &gt; 5}}"</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span> // 逻辑判断<br><span class="hljs-tag">&lt;<span class="hljs-name">view</span>&gt;</span>{{"hello" + name}}<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span> // 字符串运算<br><br>// 类似vue<br>Page({<br>	data:{<br>		message:'Hello Message',<br>		id:1000,<br>		name:'talk',<br>		a:'100',<br>		c:'1000'<br>	}<br>})<br></code></pre></td></tr></tbody></table></figure><p>全局配置 app.json</p><ul><li>pages 页面存放路径</li><li>style</li><li>window 全局设置小程序窗口的外观<ul><li>navigationBar 导航区域 TitleText TextStyle BackgroudColor</li><li>background 背景区域 Color（下来刷新时窗口的颜色） TextStyle（下拉刷新的loading样式 dark/light默认值 不能设置其他值）</li><li><code>enablePullDownRefresh=true</code> 下拉刷新 每个小程序都会有</li><li>onReachBottomDistace=50 页面上拉触底事件触发时距页面底部的距离 单位50px默认 上拉触底是移动端的专有名词 通过手指在屏幕上的上拉滑动操作，从而加载更多数据的行为</li></ul></li><li>tabBar 底部tabBar效果 移动端常见的页面效果 实现多页面的快速切换<ul><li>底部tabBar 顶部tabBar</li><li>个数[2~5] 渲染顶部tabBar 不显示icon 显示文本</li><li>节点配置选项 postion:bottom/top borderStyle color selectColor backgroundColor list<ul><li>每个tab选项的配置 list<ul><li>pagePath text iconPath selectIconPath</li></ul></li></ul></li><li>tabBar的6个组成部分<ul><li>backgroundColor tabBar 背景颜色</li><li>borderStyle tabBar上边框的颜色</li><li>iconPath 未选中时的图片路径 selectedIconPath 选中时的图片路径</li><li>color 颜色 selectedColor tab文字选中的颜色</li></ul></li></ul></li></ul><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">"tabBar"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><br>  <span class="hljs-attr">"list"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">{</span><br>      <span class="hljs-attr">"pagePath"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"pages/index/index"</span><span class="hljs-punctuation">,</span><br>     	<span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"首页"</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">"iconPath"</span><span class="hljs-punctuation">:</span><span class="hljs-string">""</span><span class="hljs-punctuation">,</span><br>     	<span class="hljs-attr">"selectedIconPath"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./assets/image/shouye-select.png"</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">}</span><br></code></pre></td></tr></tbody></table></figure><ul><li>style 是否启用新版的组件样式 v2 新 v1 旧</li></ul><p>页面配置 .json 配置文件 当前页面的窗口外观 页面效果进行配置</p><ul><li>冲突 页面配置覆盖全局配置</li><li>页面配置中常用的配置项<ul><li>navigationBar BackgroundColor/TextSytle(black/white)/TitleText/</li><li>background Color/TextStyle(dark/light)/ 下拉区域样式</li><li>enablePullDownRefresh=true/false 下拉刷新</li><li>onReachBottomDistance=100（50默认） 上拉触底</li></ul></li></ul><h4 id="列表渲染"><a href="#列表渲染" class="headerlink" title="列表渲染"></a>列表渲染</h4><ul><li>wx:for<ul><li>wx:for-item 可以指定数组当前元素的变量名</li><li>wx:for-index 可以指定数组当前下标的变量名</li></ul></li><li>wx:key<ul><li>提高数组渲染的性能</li><li>绑定的值<ul><li>string 类型，表示循环项中的唯一属性</li><li>保留<code>*this</code>，它的意思是 item 本⾝ ，*this 代表的必须是 唯⼀的字符串和数组。</li></ul></li></ul></li></ul><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html">list:[{id:0,name:''},{id:1,name:''}]<br>wx:key="id"<br>list = [1,2,3,4,5,6]<br>wx:key="*this"<br></code></pre></td></tr></tbody></table></figure><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs html">// wx:for<br><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">wx:for</span>=<span class="hljs-string">"{{array}}"</span> <span class="hljs-attr">wx:key</span>=<span class="hljs-string">“id”</span>&gt;</span>  // wx.key <br>{{index}}:{{item.message}}<br><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>   <br><br>Page({<br>	data:{<br>		array:[{<br>			id:0,<br>			message:'foo',<br>		},{<br>		    id:1,<br>  			message:'bar'<br>		}]<br>	}<br>})<br></code></pre></td></tr></tbody></table></figure><p>block</p><ul><li>渲染一个包含多节点的结构块block最终不会变成真正的dom元素</li></ul><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">block</span> <span class="hljs-attr">wx:for</span>=<span class="hljs-string">"{{[1,3,4,5]}}"</span> <span class="hljs-attr">wx:key</span>=<span class="hljs-string">"*this"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">view</span>&gt;</span>{{index}}<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">view</span>&gt;</span>{{item}}<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">block</span>&gt;</span>    <br></code></pre></td></tr></tbody></table></figure><h4 id="条件渲染"><a href="#条件渲染" class="headerlink" title="条件渲染"></a>条件渲染</h4><table><thead><tr><th>标签</th><th>功能</th></tr></thead><tbody><tr><td>wx:if</td><td>条件渲染</td></tr><tr><td>hidden</td><td>频繁切换</td></tr></tbody></table><ul><li><code>wx:if ="{{{condition}}}"</code></li></ul><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">wx:if</span>=<span class="hljs-string">"{{false}}"</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">wx:elif</span>=<span class="hljs-string">"{{true}}"</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">wx:else</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><ul><li>hidden</li></ul><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">hidden</span>=<span class="hljs-string">"{{condition}}"</span>&gt;</span>True<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><h3 id="事件绑定"><a href="#事件绑定" class="headerlink" title="事件绑定"></a>事件绑定</h3><ul><li>绑定事件通过bind关键字实现，<code>bindtap、input、change</code></li></ul><table><thead><tr><th>关键字</th><th>作用</th></tr></thead><tbody><tr><td>bindtap</td><td></td></tr><tr><td>bindinput</td><td>绑定输入</td></tr><tr><td>bindchange</td><td>绑定改变</td></tr></tbody></table><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">bindinput</span>=<span class="hljs-string">"handleInput"</span> /&gt;</span><br>// 绑定参数时不能带参数.不能带括号 以下为错误写法<br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">bindinput</span>=<span class="hljs-string">"handleInput(100)"</span> <span class="hljs-attr">data-item</span>=<span class="hljs-string">"100"</span>/&gt;</span><br>Page({<br>	handleInput:fucniton(e){<br>		console.log(e.currentTarget.dataset)<br>		console.log(e.detail.item)<br>	}<br>})<br></code></pre></td></tr></tbody></table></figure><h3 id="样式WXSS"><a href="#样式WXSS" class="headerlink" title="样式WXSS"></a>样式WXSS</h3><p>wxss 样式语言 类似css</p><ul><li>新增rpx尺寸单位 rpx 在不同大小的屏幕上程序会自动换算 rem css 手动换算</li><li>提供全局的样式（app.wxss 使用小程序页面）和局部样式（.wxss 当前小程序页面）</li><li>支持部分css选择器 <code># . element 并、后代 ::after ::before</code></li></ul><p>js</p><p>WXSS(Wexi Style Sheets) 是一套样式语言，用来描述WXML的组件样式</p><p>WXSS扩展的特性有</p><ul><li>响应式长度单位 rpx</li><li>样式导入</li></ul><p>尺寸单位</p><table><thead><tr><th>尺寸单位</th><th>功能</th></tr></thead><tbody><tr><td>rpx</td><td>自适应的屏幕宽度</td></tr><tr><td>px</td><td>像素</td></tr></tbody></table><p>rpx (responsive pixel) :可以根据屏幕宽度进行自适应。规定屏幕宽为750px。</p><p>在iphone6上、 750rpx = 375px = 750物理像素、1rpx = 0.5px = 1物理像素</p><table><thead><tr><th>设备</th><th>rpx换算px（屏幕宽度/750）</th><th>px换算rpx(750/屏幕宽度)</th></tr></thead><tbody><tr><td>iphone5</td><td>1rpx = 0.42px</td><td>1px = 2.34rpx</td></tr><tr><td>iphone6</td><td>1rpx = 0.5px</td><td>1ps = 2rpx</td></tr><tr><td>iphone</td><td>1rpx = 0.552px</td><td>1px = 1.81rpx</td></tr></tbody></table><p>确定设计稿宽度pageWitdth</p><ul><li><code>750px = pageWidth px</code>, 因此 1 px = 750rpx / pageWith</li><li>在less⽂件中，只要把设计稿中的 px =&gt; 750px/pageWidth rpx 即可。</li></ul><p>样式导入</p><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-keyword">@import</span> <span class="hljs-string">"common.wxss"</span>;<br>// 不⽀持通配符 * 因此以下代码⽆效<br>*{<br>    <span class="hljs-attribute">margin</span>:<span class="hljs-number">0</span>;<br>    <span class="hljs-attribute">padding</span>:<span class="hljs-number">0</span>;<br>    <span class="hljs-attribute">box-sizing</span>:border-box;<br>}<br><span class="hljs-selector-class">.box</span>{<br>    <br>}<br></code></pre></td></tr></tbody></table></figure><p>选择器</p><table><thead><tr><th>选择器</th><th>样式</th><th>样式</th></tr></thead><tbody><tr><td><code>.class</code></td><td></td><td>类选择器</td></tr><tr><td><code>#id</code></td><td></td><td>id选择器</td></tr><tr><td><code>element</code></td><td>view</td><td>view 组件</td></tr><tr><td><code>element element</code></td><td></td><td></td></tr><tr><td><code>nth-child(n)</code></td><td></td><td>选择某个索引的标签</td></tr><tr><td><code>::after</code></td><td></td><td>后面插入</td></tr><tr><td><code>::before</code></td><td></td><td>前面插入</td></tr></tbody></table><p>⼩程序中使⽤less</p><ul><li>原生小程序 不支持less 其他基于⼩程序的框架⼤体都⽀持，如wepy 、mpvue、taro等。但是仅仅因为⼀个less功能，⽽去引⼊⼀个框架，肯定是不可取的。因此可以⽤以下⽅式来实现<ul><li>安装vscode 插件 easy less</li></ul></li></ul><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">// vscode 设置 </span><br><span class="hljs-attr">"less.compile"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><br>  <span class="hljs-attr">"outExt"</span><span class="hljs-punctuation">:</span><span class="hljs-string">".wxss"</span><br><span class="hljs-punctuation">}</span><br></code></pre></td></tr></tbody></table></figure><p>wxss 模板样式</p><ul><li><p>样式语言 类似css</p></li><li><p>rpx 尺寸单位 微信小程序独有的单位 解决屏适配的尺寸单位 + @import 样式导入</p><ul><li>rpx 不同设备屏幕的大小不一样 为了实现屏幕的自动适配 把所有设备的宽度等分为750份 （屏幕的总宽度为750rpx）相对不同屏幕的单位 等分单位<ul><li>小屏幕，1rpx代表的宽度较小 大屏幕 1rpx代表的宽度较大 (等比例缩小放大)</li></ul></li><li>小程序在不同设备运行是 会走动把rpx的样式单位换算成对应的像素单位来渲染</li><li>rpx vs px rpx =&gt; px 屏幕宽度/750=px px =&gt; rpx 750/屏幕宽度=rpx<ul><li>iphone6 屏幕宽度 375px 物理像素点 750个 等分为 750rpx<ul><li>750rpx = 375px = 750 物理像素 1rpx=0.5px(屏幕宽度) = 1物理像素 1px = 2rpx 换算单位</li></ul></li></ul></li></ul></li><li><p><code>@import "common.wxss" 样式导入</code></p></li><li><p>全局样式 app.wxss 全局样式 、 页面.wxss 局部样式 当前页面</p><ul><li>局部样式覆盖全局样式 、局部样式权重大于或等于全局样式的权重时，才会覆盖全局样式</li></ul></li></ul><h3 id="结构WXML"><a href="#结构WXML" class="headerlink" title="结构WXML"></a>结构WXML</h3><p>wxml 小程序 标签语言 构建小程序页面的结构 HTML</p><ul><li>标签名称不同 view text image navigator(a)</li><li>属性节点不同 <code>navigator url="/pages/home/home"</code></li><li>类似Vue中的模板语法<ul><li>数据绑定</li><li>列表绑定</li><li>条件渲染</li></ul></li></ul><table><thead><tr><th>布局组件</th><th>作用</th></tr></thead><tbody><tr><td>view</td><td>相当于div</td></tr><tr><td>scroll-view</td><td>（scroll-x/y 纵向滚动 横向滚动 可滚动的视图区域 常用来实现滚动列表）</td></tr><tr><td>text</td><td>文本标签、只能嵌套text</td></tr><tr><td>image</td><td>图片标签</td></tr><tr><td>swiper</td><td>内置轮播图组件<code>swiper和swiper-item组成</code></td></tr><tr><td>navigator</td><td>类似a链接</td></tr><tr><td>rich-text</td><td>富文本标签 相 v-html</td></tr><tr><td>button</td><td>按钮</td></tr><tr><td>icon</td><td>图标</td></tr><tr><td>radio</td><td>单选</td></tr><tr><td>checkbox</td><td>多选</td></tr><tr><td>map</td><td>地图组件</td></tr><tr><td>canvas</td><td>画布组件</td></tr><tr><td>video</td><td></td></tr></tbody></table><h4 id="view"><a href="#view" class="headerlink" title="view"></a>view</h4><ul><li>基础内容<ul><li>text（span） 文本组件 长按选中 view(不行)<ul><li>selectable 长按选中</li></ul></li><li>rich-text 富文本组件 html字符串渲染为wxml结构</li></ul></li></ul><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">rich-text</span> <span class="hljs-attr">nodes</span>=<span class="hljs-string">"&lt;h1 style='color:red'&gt;标签&lt;/h1&gt;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">rich-text</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><ul><li>表单组件<ul><li>button 按钮组件 <code>open-type属性</code><ul><li><code>type="primary/warn" size="mini" plain 镂空</code></li></ul></li></ul></li><li>导航组件<ul><li>navigator（a） 页面导航组件</li></ul></li><li>媒体组件<ul><li>image（img） 图片组件 默认 300px 高 240px<ul><li><ul><li></li></ul></li></ul></li><li>video</li></ul></li></ul><p>类似div</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">hover-class</span>=<span class="hljs-string">"h-class"</span>&gt;</span>这是一段文本<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><h4 id="text"><a href="#text" class="headerlink" title="text"></a>text</h4><table><thead><tr><th>属性名</th><th>类型</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td>selectable</td><td>Boolean</td><td>false</td><td>文本是否可选</td></tr><tr><td>decode</td><td>Boolean</td><td>false</td><td>是否解码</td></tr></tbody></table><ul><li>文本标签、只能嵌套text 、⻓按⽂字可以复制（只有该标签有这个功能）、可以对空格 回⻋ 进⾏编码</li></ul><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">text</span> <span class="hljs-attr">selectable</span>=<span class="hljs-string">"{{false}}"</span> <span class="hljs-attr">decode</span>=<span class="hljs-string">"{{false}}"</span>&gt;</span><br>空<span class="hljs-symbol">&amp;nbsp;</span>格<br><span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><h4 id="image"><a href="#image" class="headerlink" title="image"></a>image</h4><ul><li>图片标签，image组件默认宽度320px，高度 240px<ul><li><code>src="/image/" mode 指定裁剪和缩放模式</code><ul><li>mode scaleToFill 默认值 aspectFit 使图片长边能显示 aspectFill使图片短边能显示 widthFix 宽度不变 高度自动变化 heightFix</li></ul></li></ul></li></ul><table><thead><tr><th>属性名</th><th>类型</th><th>默认值</th><th></th></tr></thead><tbody><tr><td>src</td><td>String</td><td></td><td>图片资源地址</td></tr><tr><td>mode</td><td>String</td><td>‘scaleToFill‘</td><td>图⽚裁剪、缩放的模式</td></tr><tr><td>lazy-load</td><td>Boolean</td><td>false</td><td>图片懒加载</td></tr></tbody></table><p>mode 有效值</p><ul><li>mode 有 13 种模式，其中 4 种是缩放模式，9 种是裁剪模式。</li></ul><table><thead><tr><th>模式</th><th>值</th><th>说明</th></tr></thead><tbody><tr><td>缩放</td><td>scaleToFill、aspectFit、aspectFill、widthFix</td><td>不保持纵横⽐缩放图⽚，使图⽚的宽⾼完全拉伸⾄填满 image 元素、<br>保持纵横⽐缩放图⽚，使图⽚的⻓边能完全显⽰出来、<br>保持纵横⽐缩放图⽚，只保证图⽚的短边能完全显⽰出来、<br>宽度不变，⾼度⾃动变化，保持原图宽⾼⽐不变</td></tr><tr><td>裁剪</td><td>top、bottom 、center、left、right、top left 、top right 、bottom left 、bottom right</td><td>不缩放图⽚，只显⽰图⽚的顶部区域</td></tr></tbody></table><h4 id="swiper"><a href="#swiper" class="headerlink" title="swiper"></a>swiper</h4><table><thead><tr><th>属性名</th><th>类型</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td>indicator-dots</td><td>Boolean</td><td>false</td><td>是否显示⾯板指⽰点</td></tr><tr><td>indicator-color</td><td>Color</td><td>rgba()</td><td>指⽰点颜⾊</td></tr><tr><td>indicator-active-color</td><td>Color</td><td>#00000</td><td>当前选中的指⽰点颜⾊</td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td>autoplay</td><td>Boolean</td><td>false</td><td>是否自动切换</td></tr><tr><td>interval</td><td>Number</td><td>5000</td><td>自动切换时间间隔</td></tr><tr><td>circular</td><td>Boolean</td><td>false</td><td>是否循环轮播 是否采用衔接滑动</td></tr></tbody></table><h5 id="swiper-1"><a href="#swiper-1" class="headerlink" title="swiper"></a>swiper</h5><ul><li>滑块视图容器</li></ul><h5 id="swipter-item"><a href="#swipter-item" class="headerlink" title="swipter-item"></a>swipter-item</h5><ul><li>滑块</li><li>默认宽度和⾼度都是100%</li></ul><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"className"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"idName"</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">scroll-view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span> <span class="hljs-attr">scroll-x</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">view</span>&gt;</span>A<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span> &lt;/scroll-view<br><span class="hljs-tag">&lt;<span class="hljs-name">swiper</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"swiper-container"</span> <span class="hljs-attr">indicator-dots</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">swiper-item</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">swiper-item</span>&gt;</span><br> <span class="hljs-tag">&lt;/<span class="hljs-name">swiper</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><h4 id="navigator"><a href="#navigator" class="headerlink" title="navigator"></a>navigator</h4><ul><li>导航组件，类似超链接a标签</li></ul><table><thead><tr><th>属性名</th><th>类型</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td>target</td><td>String</td><td>self</td><td>在哪个目标上发生跳转,默认当前小程序，可选值self/miniProgram</td></tr><tr><td>url</td><td>String</td><td></td><td>当前小程序内的跳转链接</td></tr><tr><td>open-type</td><td>String</td><td>navigate</td><td>跳转方式</td></tr></tbody></table><p>open-type有效值</p><table><thead><tr><th>值</th><th>说明</th></tr></thead><tbody><tr><td>navigate</td><td>保留当前⻚⾯，跳转到应⽤内的某个⻚⾯，但是不能跳到 tabbar ⻚⾯</td></tr><tr><td>redirect</td><td>关闭当前⻚⾯，跳转到应⽤内的某个⻚⾯，但是不允许跳转到 tabbar ⻚⾯。</td></tr><tr><td>switchTab</td><td>跳转到 tabBar ⻚⾯，并关闭其他所有⾮ tabBar ⻚⾯</td></tr><tr><td>reLaunch</td><td>关闭所有⻚⾯，打开到应⽤内的某个⻚⾯</td></tr><tr><td>navigateBack</td><td>关闭当前⻚⾯，返回上⼀⻚⾯或多级⻚⾯。可通过 getCurrentPages() 获取当前的⻚⾯栈，决定需要返回⼏层</td></tr><tr><td>exit</td><td>退出⼩程序，target= miniProgram 时⽣效</td></tr></tbody></table><h4 id="rich-text"><a href="#rich-text" class="headerlink" title="rich-text"></a>rich-text</h4><ul><li>富文本标签</li></ul><p>可以将字符串解析成对应标签，类似vue中的v-html功能</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">rich-text</span> <span class="hljs-attr">nodes</span>=<span class="hljs-string">"{{nodes}}"</span> <span class="hljs-attr">bindtap</span>=<span class="hljs-string">"tap"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">rich-text</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">rich-text</span> <span class="hljs-attr">nodes</span>=<span class="hljs-string">"&lt;img src="</span><span class="hljs-attr">https:</span>//<span class="hljs-attr">www.baidu.com</span>/&gt;</span>" alt="" /&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">rich-text</span>&gt;</span><br>Page({<br>	data:{<br>// nodes[{name:'',attrs:{},children:[{}] }]<br>		nodes:[{<br>			name:'div',<br>			attrs:{<br>				class:'div-class',<br>				style:'line-height:60px;color:red'<br>			},<br>			children:[{<br>				type:'text',<br>				text:'Hello Message!!!'<br>			}]<br>		}]<br>	},<br>	tap(){<br>		console.log('tap')<br>	}<br>}}<br></code></pre></td></tr></tbody></table></figure><ul><li>node属性</li></ul><p>nodes属性支持字符串和标签节点数组</p><table><thead><tr><th>属性</th><th>说明</th><th>类型</th><th>必填</th><th>备注</th></tr></thead><tbody><tr><td>name</td><td>标签名 <code>name：’‘</code></td><td>string</td><td>是</td><td>支持部分受信任的HTML节点</td></tr><tr><td>attrs</td><td>属性<code>class:'' style:''</code></td><td>object</td><td>否</td><td>支持部分受信任的属性，遵循 Pascal 命名法</td></tr><tr><td>children</td><td>子节点列表<code>type text</code></td><td>array</td><td>否</td><td>结构和 nodes ⼀致</td></tr></tbody></table><p>文本节点：type=text</p><table><thead><tr><th>属性</th><th>说明</th><th>类型</th><th>必填</th><th>备注</th></tr></thead><tbody><tr><td>text</td><td>文本</td><td>string</td><td>是</td><td>支持entities</td></tr></tbody></table><ul><li>nodes 不推荐使⽤ String 类型，性能会有所下降。</li><li>rich-text 组件内屏蔽所有节点的事件。</li><li>attrs 属性不⽀持 id ，⽀持 class 。</li><li>name 属性⼤⼩写不敏感。</li><li>如果使⽤了不受信任的 HTML 节点，该节点及其所有⼦节点将会被移除。</li><li>img 标签仅⽀持⽹络图⽚。</li></ul><h4 id="button"><a href="#button" class="headerlink" title="button"></a>button</h4><table><thead><tr><th>属性</th><th>类型</th><th>默认值</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>size</td><td>string</td><td>default(默认) 、mini(小)</td><td>否</td><td>按钮的大小</td></tr><tr><td>type</td><td>string</td><td>default(白色)、wam(红色)、primary(绿色)</td><td>否</td><td>按钮的样式类型</td></tr><tr><td>plain</td><td>boolean</td><td>false</td><td>否</td><td>按钮是否镂空，背景⾊透明</td></tr><tr><td>disabled</td><td>boolean</td><td>false</td><td>否</td><td>是否禁用</td></tr><tr><td>loading</td><td>boolean</td><td>false</td><td>否</td><td>名称前是否带loading图标</td></tr><tr><td>form-type</td><td>string</td><td>submit(提交表单)、reset(重置表单)</td><td>否</td><td>⽤于 <code>组件，点击分别会触发</code> 组件的<br>submit/reset 事件</td></tr><tr><td>open-type</td><td>string</td><td></td><td>否</td><td>微信开发能力</td></tr></tbody></table><p>open-type的合法值</p><ul><li>open-type 的 contact 的实现流程</li></ul><table><thead><tr><th>值</th><th>说明</th></tr></thead><tbody><tr><td>contact</td><td>打开客服会话，如果⽤⼾在会话中点击消息卡⽚后返回⼩程序，可以从<br>bindcontact 回调中获得具体信息，具体说明</td></tr><tr><td>share</td><td>触发⽤⼾转发，使⽤前建议先阅读使⽤指引</td></tr><tr><td>getPhoneNumber</td><td>获取⽤⼾⼿机号，可以从bindgetphonenumber回调中获取到⽤⼾信息，<br>具体说明</td></tr><tr><td>getUserInfo</td><td>获取⽤⼾信息，可以从bindgetuserinfo回调中获取到⽤⼾信息</td></tr><tr><td>launchApp</td><td>打开APP，可以通过app-parameter属性设定向APP传的参数具体说明</td></tr><tr><td>openSetting</td><td>打开授权设置⻚</td></tr><tr><td>feedback</td><td>打开“意⻅反馈”⻚⾯，⽤⼾可提交反馈内容并上传⽇志，开发者可以登<br>录⼩程序管理后台后进⼊左侧菜单“客服反馈”⻚⾯获取到反馈内容</td></tr></tbody></table><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"default"</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"{{defaultSize}}"</span> <span class="hljs-attr">loading</span>=<span class="hljs-string">"{{loading}}"</span> <span class="hljs-attr">plain</span>=<span class="hljs-string">"{plain}"</span>&gt;</span>按钮<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><h4 id="icon"><a href="#icon" class="headerlink" title="icon"></a>icon</h4><ul><li>图标</li></ul><table><thead><tr><th>属性</th><th>类型</th><th>默认值</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>type</td><td>string</td><td></td><td>是</td><td>icon的类型，有效值：success, success_no_circle,<br>info, warn, waiting, cancel, download, search,<br>clear</td></tr><tr><td>size</td><td>numberstring</td><td>23</td><td>否</td><td>icon的大小</td></tr><tr><td>color</td><td>string</td><td></td><td>否</td><td>icon的颜色，同css的color</td></tr></tbody></table><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"group"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">block</span> <span class="hljs-attr">wx:for</span>=<span class="hljs-string">"{{iconSize}}"</span>&gt;</span><br>	<span class="hljs-tag">&lt;<span class="hljs-name">icon</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"success"</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"{{item}}"</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">block</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"group"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">block</span> <span class="hljs-attr">wx:for</span>=<span class="hljs-string">"{{iconType}}"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">icon</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"{{item}}"</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"40"</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">block</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"group"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">block</span> <span class="hljs-attr">wx:for</span>=<span class="hljs-string">"{{iconColor}}"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">icon</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"success"</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"40"</span> <span class="hljs-attr">color</span>=<span class="hljs-string">"{{item}}"</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">block</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br>Page({<br>    data: {<br>        iconSize: [20, 30, 40, 50, 60, 70],<br>        iconType: [<br>        'success', 'success_no_circle', 'info', 'warn', 'waiting', 'cancel',<br>        'download', 'search', 'clear'<br>        ],<br>        iconColor: [<br>        'red', 'orange', 'yellow', 'green', 'rgb(0,255,255)', 'blue', 'purple'<br>        ],<br>    }<br>})<br></code></pre></td></tr></tbody></table></figure><h4 id="radio"><a href="#radio" class="headerlink" title="radio"></a>radio</h4><p>单选按钮</p><ul><li>radio-group</li><li>radio</li></ul><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">radio-group</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">radio</span>&gt;</span>选中<span class="hljs-tag">&lt;/<span class="hljs-name">radio</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">radio</span>&gt;</span>没有选中<span class="hljs-tag">&lt;/<span class="hljs-name">radio</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">radio-group</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><h4 id="checkbox"><a href="#checkbox" class="headerlink" title="checkbox"></a>checkbox</h4><ul><li>checkbox-group</li><li>checkbox</li></ul><p>多选按钮</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">checkbox-group</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">checkbox</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">checkbox</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">checkbox</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">checkbox</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">checkbox</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">checkbox</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">checkbox</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-name">checkbox</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">checkbox-group</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>模板与配置</p><p>wxml 模板语法</p><ul><li>数据绑定 data定义数据 <code>Page({ data:{ info:"messageInfo",arr:[{},{}] } })</code> wxml使用数据 双大括号 <code>{{ info }}</code> 插值表达式<ul><li>插值表达式：动态绑定内容 <code>{{ info }}</code> 动态绑定属性 <code>&lt;image src="{{imgSrc}}"&gt;</code> 运算（三元表达式、算术表达式）<code>{{ 100 + 200/ ? : }}</code></li></ul></li></ul><p>事件：事件时渲染层到逻辑层的通信方式 通过事件可以将用户在渲染层产生的行为，反馈到逻辑层进行业务的处理</p><ul><li>常用事件 tap(手指触摸马上离开click)/bindtap/bind:tap input/bindinput/bind:input change/bindchange/bind:change<ul><li><code>bind*/bind:*</code> 绑定方式</li></ul></li><li>事件对象的属性 type 事件类型 timeStamp 页面打开触发事件所经过的毫秒数 target 触发事件的组件的一些属性值集合 currenTarget 当前组件的属性值集合 detail 额外的信息 touches changedTouches<ul><li>target vs currentTarget: target 触发该事件的源头组件 currentTarget 当前事件所绑定的组件（当前触发事件的组件）</li></ul></li><li><code>wxml bingtap="bindTapHandler" 绑定tap触摸事件</code> js <code>形参 event (e) 接收 bindTapHandler(e){ }</code></li><li>事件传参 不能一边绑定事件的同时为事件处理函数传递参数 <code>data-* 自定义属性传参 *代表的是参数的名字 &lt;button data-info="{{100}}"&gt; info 参数名字 100 参数的值</code> <code>获取事件参数 e.target.dataset.参数名</code></li><li>bindinput input事件响应文本框的输入事件 <code>&lt;input bindinput="inputHandler"&gt;&lt;/input&gt; 获取input事件的值 e.detail.value</code></li><li>input和data数据同步 <code>data:{ str:"Message" } this.setData({ str:e.detail.value })</code></li></ul><p>data 数据重新赋值</p><ul><li>this.setData(dataObject) 页面data中的数据重新赋值 <code>changeCount(){ this.setData({ num: this.data.num + 100 }) }</code></li></ul><p>w-if 条件渲染 vs hidden</p><ul><li><code>wx:if="{{ condition }} / true or false"</code> 判断是否渲染该代码块</li><li><code>wx:if={{ type = 1 }} wx:elif={{ type = 1 }} wx:else</code> wx-if wx:elif wx-else</li><li><code>结合&lt;block&gt;使用wx-if &lt;block wx-if="{{ }}"&gt; &lt;/block&gt;</code> 一次性控制多个组件的展示和隐藏 block 将多个组件包装起来 没有任何效果 并不是一个组件 包裹性质的容器 不会在页面中做任何渲染</li><li>hidden <code>hidden="{{ condition }} // true or false"</code> 控制元素的显示和隐藏</li><li>区别 wx-if 动态创建和移除元素的方式 控制条件复杂 切换效率高 hidden 切换样式（display:none/block）频繁切换使用 渲染效率高</li></ul><p>wx-for 列表渲染 可以根据指定的数组，循环渲染重复的组件结构</p><ul><li><code>wx-for={{array}} {{index}} 索引 {{item}} 当前循环项</code> 两个默认值</li><li>手动指定索引和当前项的变量名 重命名索引和Item项 （不常用）<ul><li>wx-for-index=“idx” 可以指定当前循环项的索引的变量名</li><li>wx-for-item=“itm” 可以指定当前项的变量名</li></ul></li><li>wx:key <code>wx:key="id"/"index" id是数组的一个键名</code> 渲染出来的列表项指定唯一的key值 从而提高渲染效率 <code>vue中 :key="id"</code></li></ul><h3 id="过滤器WXS"><a href="#过滤器WXS" class="headerlink" title="过滤器WXS"></a>过滤器WXS</h3><p>WXS(WeiXin Script) <code>过滤器使用</code> 配合 Mustache 语法 <code>{{ }}</code> 使用</p><ul><li><p>是小程序独有的一套脚本语言 与WXML可以构建出页面的结构</p></li><li><p>WXML 无法调用页面js中的函数 WXML 可以调用WXS中定义的函数</p></li><li><p>作用: WXS的使用场景:过滤器</p></li><li><p>WXS vs JS 完全不同的两种语言</p><ul><li>WXS有自已的数据类型 number string boolean object function array date regexp</li><li>WXS不支持类似ES6及以上语法 不支持 let const 解构赋值 展开运算符 箭头函数 对象属性简写 支持 var function等</li><li>WXS遵循CommonJS规范 module requeire() module.exports对象</li></ul></li><li><p><code>&lt;wxs&gt;&lt;/wxs&gt;</code> 类似<code>&lt;script&gt;</code>标签 必须提供module属性 指定当前wxs的模块名称 方便在wxml中访问模块中的成员</p></li><li><p>外联wxs脚本 <code>.wxs</code>后缀名的文件内 module 模块名称 src 相对路径</p></li><li><p>隔离性 不能调用js函数和小程序的API</p></li><li><p>性能好 IOS设备上 WXS比JS快 2~20倍 Android没有差异</p></li></ul><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs html">// 内联<span class="hljs-tag">&lt;<span class="hljs-name">wxs</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">view</span>&gt;</span>{{ m1.toUpper(username) }}<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">wxs</span> <span class="hljs-attr">module</span>=<span class="hljs-string">"m1"</span>&gt;</span> // module.方法()<br>	module.exports.toUpper = function(str){<br>  	return str.toUpperCase()<br>  }<br><span class="hljs-tag">&lt;/<span class="hljs-name">wxs</span>&gt;</span><br>  <br>  module.exports.splitPhone = function(str){<br>    if(str.length !== 11) return str<br>    var arr = str.split('')<br>    arr.splice(3,0,'-')<br>    arr.splice(8,0,'-')<br>    return arr.join('')<br>  }<br><br>// 外联wxs文件 tools.wxs<br>function toLower(str){<br>	return str.toUpperCase()<br>}<br><br>module.exports = {<br>	toLower: toLower<br>}<br>  <br><span class="hljs-tag">&lt;<span class="hljs-name">view</span>&gt;</span>{{ m2.toLower(username) }}<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>  <br><span class="hljs-tag">&lt;<span class="hljs-name">wxs</span> <span class="hljs-attr">module</span>=<span class="hljs-string">"m2"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"../../tool.wxs"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">wxs</span>&gt;</span>  <br></code></pre></td></tr></tbody></table></figure><p>API</p><ul><li>小程序API是宿主环境提供的 调用微信提供的能力 获取用户信息 本地存储 支付功能</li><li>小程序的3大分类<ul><li>事件监听 API <code>以on开头，用来监听某些事件的触发</code><ul><li><code>wx.onWindowResize(function callback) 监听窗户尺寸变化的事件</code></li></ul></li><li>同步 API <code>以Sync结尾的API</code> 都是同步API 同步API的执行结果 可以通过函数返回值直接获取<ul><li><code>wx.setStorageSync("key","vaklue") 向本地存储写入内容</code></li></ul></li><li>异步 API 类似jquery中国的$.ajax(option)函数 需要通过 success fail complete 接受调用<ul><li><code>wx.require() 发起网络请求 success 回调函数接受数据</code></li></ul></li></ul></li></ul><h3 id="自定义组件"><a href="#自定义组件" class="headerlink" title="自定义组件"></a>自定义组件</h3><ul><li>小程序通过自定义组件的方式构建页面</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title class_">Page</span>({<br>	<span class="hljs-string">"pages"</span>:[ <span class="hljs-comment">// ⽤于描述当前⼩程序所有⻚⾯路径，这是为了让微信客⼾端知道当前你的⼩程序⻚⾯定义在哪个⽬录。</span><br>        <span class="hljs-string">"pages/index/index"</span>, <span class="hljs-comment">// 页面index</span><br>        <span class="hljs-string">"pages/logs/logs"</span><br>    ]<br>})<br></code></pre></td></tr></tbody></table></figure><h4 id="创建自定义组件"><a href="#创建自定义组件" class="headerlink" title="创建自定义组件"></a>创建自定义组件</h4><p>一个自定义组件(类似页面)由json,wxml ,wxss,js 4 个文件组成</p><p>声明组件 Component 4步曲</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">// newComponent.json </span><br><span class="hljs-punctuation">{</span><br>	<span class="hljs-attr">"component"</span><span class="hljs-punctuation">:</span><span class="hljs-literal"><span class="hljs-keyword">true</span></span><br><span class="hljs-punctuation">}</span><br></code></pre></td></tr></tbody></table></figure><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// newComponent.wxml </span><br>&lt;view <span class="hljs-keyword">class</span>=<span class="hljs-string">"inner"</span>&gt;<br>	{{innerText}}<br>	&lt;slot&gt;&lt;/slot&gt;<br>&lt;/view&gt;<br></code></pre></td></tr></tbody></table></figure><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs css">// newComponent<span class="hljs-selector-class">.wcss</span><br>// 不应该使用ID、属性、标签名选择器<br><span class="hljs-selector-class">.inner</span>{<br>	<span class="hljs-attribute">color</span>:red;<br>	<span class="hljs-attribute">font-size</span>:<span class="hljs-number">16px</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// newComponent.js 注册组件</span><br><span class="hljs-title class_">Component</span>({<br>	<span class="hljs-attr">properties</span>:{<br>        <span class="hljs-comment">// 这里定义了innerText属性，属性值可以在组件使用时指定</span><br>		<span class="hljs-attr">innerText</span>:{<br>		   <span class="hljs-attr">type</span>:<span class="hljs-title class_">String</span>,<br>           <span class="hljs-attr">value</span>:<span class="hljs-string">'defalut value'</span><br>		},<br>        <span class="hljs-comment">// 组件内部数据</span><br>        data{<br>        	<span class="hljs-attr">someData</span>:{}<br>    	},<br>        <span class="hljs-comment">// 自定义方法  </span><br>        <span class="hljs-attr">methods</span>:{<br>          	<span class="hljs-attr">customMethod</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){}<br>        }  <br>	}<br>})<br></code></pre></td></tr></tbody></table></figure><h4 id="页面引入自定义组件"><a href="#页面引入自定义组件" class="headerlink" title="页面引入自定义组件"></a>页面引入自定义组件</h4><ul><li>页面引入元素</li></ul><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">// index.json</span><br><span class="hljs-punctuation">{</span><br>	<span class="hljs-string">"usingComponents"</span>：<span class="hljs-punctuation">{</span><br>    	<span class="hljs-attr">"my-header"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"/components/myHeader/myHeader"</span> <br>	<span class="hljs-punctuation">}</span><br><span class="hljs-punctuation">}</span><br></code></pre></td></tr></tbody></table></figure><h4 id="页面中使用自定义组件"><a href="#页面中使用自定义组件" class="headerlink" title="页面中使用自定义组件"></a>页面中使用自定义组件</h4><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">view</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">my-header</span> <span class="hljs-attr">inner-text</span>=<span class="hljs-string">"Some text"</span>&gt;</span><br>      	<span class="hljs-tag">&lt;<span class="hljs-name">view</span>&gt;</span>用来替代slot的<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">my-header</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><h4 id="定义段与⽰例⽅法"><a href="#定义段与⽰例⽅法" class="headerlink" title="定义段与⽰例⽅法"></a>定义段与⽰例⽅法</h4><p><code>Component</code>构造器可用于定义组件，调用Component 构造器时可以指定组件的属性、数据、方法等</p><h4 id="组件间通信"><a href="#组件间通信" class="headerlink" title="组件间通信"></a>组件间通信</h4><ul><li>父传子</li><li>子传父</li><li>子传子</li></ul><h4 id="组件-⾃定义组件传参"><a href="#组件-⾃定义组件传参" class="headerlink" title="组件-⾃定义组件传参"></a>组件-⾃定义组件传参</h4><ul><li>父组件 ==&gt; 通过属性的方法 ==&gt; 子组件 传递参数</li><li>子组件==&gt; 通过事件的方式 ==&gt; 父组件 传递参数</li></ul><p>父组件传递给子组件</p><ul><li>通过属性的方法</li><li>父组件 中的 data 传递给 子组件<ul><li>父组件 <code>tabItems="{{tabs}}"</code> tabs 是data 中的数据</li><li>子组件 <code>tabItems</code> 接收数据</li></ul></li></ul><p>子组件</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tabs"</span>&gt;</span><br>	<span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab_title"</span>&gt;</span><br>    	<span class="hljs-tag">&lt;<span class="hljs-name">block</span> <span class="hljs-attr">wx:for</span>=<span class="hljs-string">"{{tabItems}}"</span> <span class="hljs-attr">wx:key</span>=<span class="hljs-string">"{{item}}"</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">bindtap</span>=<span class="hljs-string">"handleItemActive"</span> <span class="hljs-attr">data-index</span>=<span class="hljs-string">"{{index}}"</span>&gt;</span>{{item.name}}<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">block</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab_content"</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br><br>Component({<br>	properties:{<br>		tabItems:{<br>  			type:Array<br>    		value:[]<br>		}<br>	},<br>	// 组件的初始数据<br>	data:{<br><br>	},<br>	methods:{<br>		handleItemActive(e){<br>			this.triggerEvent('mytap','haha')<br>		}<br>	}<br>})<br><br></code></pre></td></tr></tbody></table></figure><p>父组件</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">tabs</span> <span class="hljs-attr">tabItem</span>=<span class="hljs-string">"{{tabs}}"</span> <span class="hljs-attr">bindmytap</span>=<span class="hljs-string">"onMytab"</span>&gt;</span><br>  内容<br><span class="hljs-tag">&lt;/<span class="hljs-name">tabs</span>&gt;</span><br><br>data:{<br>	tabs:[<br> 		{ name:"体验问题" },<br>		{name:"商品、商家投诉"}<br>	],<br>    onMyTab(e){<br>    	console.log(e.detail);<br>    },<br>}<br></code></pre></td></tr></tbody></table></figure><ul><li>标签名 是 中划线的⽅式</li><li>属性的⽅式 也是要中划线的⽅式</li><li>其他情况可以使⽤驼峰命名<ol><li>组件的⽂件名如 myHeader.js的等</li><li>组件内的要接收的属性名 如 innerText</li></ol></li></ul><p>自定义小程序组件</p><ul><li>components/test目录 test文件</li><li>引用组件<ul><li>局部引用:组件只能在当前被引用的页面内使用 特定页面中用到<ul><li>.json Page({ })<code>“usingComponents:{ "my-test":"/componets/test/test" }”</code></li><li><code>&lt;my-test&gt;&lt;/my-test&gt;</code></li></ul></li><li>全局引用:组件可以在每个小程序页面中使用 多个页面中经常用到<ul><li>app.json App({ })<code>“usingComponents:{ "my-test":"/componets/test/test" }”</code></li></ul></li></ul></li><li>组件 vs 页面<ul><li>组件 .json 需要声明<code>“component”:true</code>属性 .js文件调用 <code>Component({})</code>函数 组件的事件处理函数需要定义到methods节点中<ul><li>data:{}\methods:{}</li></ul></li><li>页面 <code>Page({})</code>函数</li></ul></li><li>自定义组件样式<ul><li>组件之间的样式相互不会影响 防止外界的样式影响组件内部的样式 防止组件的样式被外界样式破坏</li><li>app.wxss的全局样式对组件的样式无效</li><li>只有class选择器有样式隔离效果,<code>id 属性 标签</code>选择器不受样式隔离的影响(组件和引用组件的页面建议使用class,不要使用id\属性\标签)</li><li>修改组件的样式隔离选项<ul><li>默认 自定义组件的样式隔离特性能够防止组件内外样式互相干扰的问题</li><li>外界能够控制组件内部的样式 可以通过 styleIsolation 修改组件的样式隔离选项 可选值 isolated 样式隔离 apply-shared 页面样式影响自定义组件(组件不影响页面) shared (双向影响)<ul><li>.js <code>Component({ options:{ styleIsolation:"isolated" } })</code></li><li>.json <code>“styleIsolation:"isolated"”</code></li></ul></li></ul></li></ul></li><li>自定义组件 数据(data:{}) 方法(method:{}) 属性(properties:{}) 数据监听器(observers:{}) .js<ul><li>数据 data:{} 组件模块渲染和私有数据 定义data节点 <code>Component({ data:{ count:100 } })</code><ul><li>获取data <code>this.data.xxx</code></li><li>设置setData <code>this.setData({ count:this.data.xxx })</code></li></ul></li><li>方法 methods:{} <code>Component({ methods:{ addCount(){ } } })</code><ul><li>下划线开头<code>_showCount(){}</code> 自定义方法建议以<code>_开头</code> addCount(){} 事件处理函数</li></ul></li><li>属性(页面传递参数到组件) properties:{} 组件的对外属性 <code>用来接受外界传递到组件中的数据</code><ul><li><code>&lt;my-test max="100"&gt;&lt;/my-test&gt;</code> 传递参数 页面.wxml</li><li><code>Component({ properties:{ max:{ type:Number //属性值的数据类型 ,value:100 //默认值 } //完整定义属性的方式(有默认值) ,max:Number //简化定义属性(不需要默认值) } })</code> 接受参数 组件.js<ul><li>获取属性 <code>this.properties.xxx</code></li><li>setData 修改 properties的值 <code>this.setData({ count:this.data.xxx,max:this.properties.xxx })</code></li></ul></li></ul></li><li>数据监听器(变化的值) <code>observers:{ }</code> 用于监听和响应任何属性和数据字段的变化,从而执行特定的操作 类似 watch 侦听器<ul><li>监听数据字段的变化 <code>Component({ observers:{ "字段A,字段B":function(字段A的新值,字段B的新值){} } })</code></li><li>监听对象属性的变化 数据监听器支持监听对象中的单个或多个属性的变化 <code>observers:{ '对象.属性A,对象.属性B':function(属性A的新值,属性B的新值){} }</code><ul><li>触发监听器:属性A赋值 使用setData this.data.对象.属性A 属性B赋值 this.data.对象.属性B 直接为对象赋值 this.data.对象</li><li><code>this.setData({'rgb.a':this.data.rgb.r + 5 &gt; 255 ? this.data.rgb.r + 5})</code> rgb.a 对象上的a值</li><li>对象监听的属性太多 可以使用通配符 <code>**</code> 来监听对象中所有属性的变化 <code>"obj.**":function(obj){ obj.x obj.y obj.z }</code></li></ul></li></ul></li><li>纯数据字段:那些不用于界面渲染的data字段(只在组件内使用) 提升页面更新的性能 页面中没有用到的都可以使用纯数据字段<ul><li>应用场景 data中的字段既不会展示在界面上 也不会传递给其他组件 只在组件内部使用 带有这种特性的data字段适合被设置为纯数据字段</li><li>使用规则 <code>Component({ options:{ pureDataPattern:/^_/ } })</code> 指定所有<code>_</code>开头的数据字段都是纯数据字段</li></ul></li><li>data vs properties<ul><li>用法相同,都是可读可写</li><li>data 存储组件的<code>私有数据</code></li><li>properties 存储外界存储到组件中的数据 <code>外界传递的数据</code></li></ul></li><li>组件的生命周期 lifetimes:{ … }<ul><li>created 创建 attached 进入页面节点树时执行 ready 视图层完成后执行 moved 被移动到节点树另一位置时执行 detached 从页面节点树移除是执行 error Object Error 组件方法抛出错误时执行</li><li>主要生命周期<ul><li>created 刚被创建好的时候 不能调用setData 只能给组件的this添加一些自定义的属性字段</li><li>attached 组件完全初始化完毕、进入页面节点树后　this.data 被初始化 绝大多数的attached 会在这个时机执行(例如发请求获取初始数据)</li><li>detahced 离开页面节点树后 生命周期函数会被触发</li></ul></li><li>lifetimes节点<ul><li>小程序组件中，生命周期函数可以直接定义在Component构造器的第一级参数中，lifetimes字段进行声明</li><li>新<code>Component({ lifetimes:{ created(){},attached(){ } } })</code><ul><li>旧 不推荐使用 <code>Component({ created(){}, })</code> 同时存在新覆盖旧的</li></ul></li></ul></li></ul></li></ul></li></ul><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs json">data n1 n2 sum  rgb<span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span> r<span class="hljs-punctuation">:</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span>g<span class="hljs-punctuation">:</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span>b<span class="hljs-punctuation">:</span><span class="hljs-number">0</span> <span class="hljs-punctuation">}</span><br>observers<span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><br>  <span class="hljs-attr">"n1,n2"</span><span class="hljs-punctuation">:</span>function(new1<span class="hljs-punctuation">,</span>new2)<span class="hljs-punctuation">{</span>  <span class="hljs-comment">// 监听字段 新值 / 旧值</span><br>    this.setData(<span class="hljs-punctuation">{</span> sum<span class="hljs-punctuation">:</span> new1+new2 <span class="hljs-punctuation">}</span>)<br>  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">"rgb.r,rgb.g,rgb.b"</span><span class="hljs-punctuation">:</span>function(r<span class="hljs-punctuation">,</span>g<span class="hljs-punctuation">,</span>b)<span class="hljs-punctuation">{</span>  <span class="hljs-comment">// 监听字段 新值 / 旧值</span><br>    this.setData(<span class="hljs-punctuation">{</span> color<span class="hljs-punctuation">:</span>`$<span class="hljs-punctuation">{</span>r<span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>$<span class="hljs-punctuation">{</span>g<span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>$<span class="hljs-punctuation">{</span>b<span class="hljs-punctuation">}</span>` <span class="hljs-punctuation">}</span>)<br>  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">"rgb.**"</span><span class="hljs-punctuation">:</span>function(obj)<span class="hljs-punctuation">{</span><br>    this.setData(<span class="hljs-punctuation">{</span> color<span class="hljs-punctuation">:</span>`$<span class="hljs-punctuation">{</span>obj.r<span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>$<span class="hljs-punctuation">{</span>obj.g<span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>$<span class="hljs-punctuation">{</span>obj.b<span class="hljs-punctuation">}</span>` <span class="hljs-punctuation">}</span>)<br>  <span class="hljs-punctuation">}</span><br><span class="hljs-punctuation">}</span><br><br>Component(<span class="hljs-punctuation">{</span> <br>  options<span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span> pureDataPattern<span class="hljs-punctuation">:</span>/^_/ <span class="hljs-punctuation">}</span> <br>	data<span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><br>  	a<span class="hljs-punctuation">:</span><span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 普通数据字段</span><br>    _b<span class="hljs-punctuation">:</span><span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 纯数据字段</span><br>  	_rgb<span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><br>   		r<span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>  		g<span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>  		b<span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><br>		<span class="hljs-punctuation">}</span><br>	<span class="hljs-punctuation">}</span><br><span class="hljs-punctuation">}</span>)<br></code></pre></td></tr></tbody></table></figure><ul><li>组件(Component)所在页面(Page)的生命周期 自定义组件的行为依赖于页面状态的变化 需要用到组件所在页面的生命周期 组件儿子监听页面爸爸的变化<ul><li>组件访问页面中生命周期(组件使用页面中的生命周期)： 一个页面可以有多个组件 组件只是页面中的一部分</li><li>3个组件所在页面的生命周期<ul><li>show 组件所在页面被展示时执行</li><li>hide 隐藏</li><li>resize 尺寸变化</li></ul></li><li><code>pageLifetimes 节点</code> 组件所有页面的生命周期函数 需要定义在pageLifetimes节点中<ul><li><code>Component({ pageLifetimes:{ show(){},hide(){},resize(){} } })</code></li></ul></li></ul></li><li>插槽 在自定义组件的wxml结构中，可以提供一个<code>&lt;slot&gt;</code>节点（插槽） 用于承载组件使用者提供的wxml结构 实现不同页面共用一个组件 页面上不同的内容通过插槽动态渲染不同的<ul><li><code>&lt;slot&gt;&lt;/slot&gt;</code> 作为组件的封装者 在封装组件时 通过slot提供内容的 <code>占位符</code><ul><li>具体渲染 <code>&lt;view&gt;&lt;/view&gt; &lt;text&gt;&lt;/text&gt;</code> 作为组件的 <code>使用者渲染具体节点</code> 在使用组件时 为<code>&lt;slot&gt;</code>占位符提供具体的内容节点</li></ul></li><li>单个插槽 默认每个自定义组件只允许使用一个<code>&lt;slot&gt;</code> 进行占位 单个插槽</li><li>多个插槽 name/slot 使用多个<code>&lt;slot&gt;&lt;/slot&gt;</code> 在组件中<code>.js</code>启用 <code>Component({ option:{ multipleSlots:true } })</code> 组件定义时的选项中启用多个slot支持 name 与 slot<ul><li>定义多个插槽 .wxml中使用多个<code>&lt;slot name="xxx"&gt;</code>标签以 不同``name`区分不同插槽</li><li>使用多个插槽 使用带有多个插槽的自定义组件 <code>slot=“xxx”</code> 来将节点插入到不同的<code>&lt;slot&gt;</code>中</li></ul></li></ul></li></ul><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs html">Component({ options:{ multipleSlots:true }  })<br><br>组件文件<br>// 组件封装者 中使用<span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span><br>	<span class="hljs-tag">&lt;<span class="hljs-name">view</span>&gt;</span>组件内部节点<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br>	<span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span> // 不确定的内容 占位符 单个插槽<br>  <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"before"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span>  <br>  <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"after"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br><br>页面文件<br>// 组件使用者 使用<br><span class="hljs-tag">&lt;<span class="hljs-name">component-tag-name</span>&gt;</span>  //   component-tag-name 组件名字 usingComponents:{ "my-test":"/componets/test/test" } 注册组件<br>  <span class="hljs-tag">&lt;<span class="hljs-name">view</span>&gt;</span>插入到slot中的内容<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>  // 发到slot上的内容<br>  <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">"before"</span>&gt;</span>TESTEETEE<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">"after"</span>&gt;</span>TESTEETEE<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">component-tag-name</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><ul><li>父子组件之前的通信（3种）<ul><li>属性绑定 <code>properties:{}</code> 父组件 =&gt; 子组件 指定属性设置数据 只能传递普通类型的数据 不能传递方法 仅能设置JSON兼容的数据</li><li>事件绑定 子组件 =&gt; 父组件 可以传递任意类型数据<ul><li>父组件 父方法(e) e.detail.value bind:子方法=”父方法”</li><li>子组件 this.triggerEvent</li></ul></li><li>获取子组件实例 子 =&gt; 父组件 父组件获取子组件实例<ul><li>父组件 this.selectComponent(// id或class选择器) 获取子组件实例对象 可以直接访问子组件的任意数据和方法 不能用标签选择器</li></ul></li><li>按钮 tap 事件的处理函数 传递参数 bindTap=“btnHandler” data-step=“1” btnHandler(e){ e.target.dataset.step } // step属性</li></ul></li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 属性绑定 父 子</span><br><span class="hljs-comment">// 父</span><br>data <span class="hljs-attr">count</span>:<span class="hljs-number">100</span><br>&lt;my-test count=<span class="hljs-string">"{{ count }}"</span>&gt;&lt;/my-test&gt;<br><span class="hljs-comment">// 子 properties节点 声明对应属性并应用</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">view</span>&gt;</span>{{ count }}<span class="hljs-tag">&lt;/<span class="hljs-name">viewv</span>&gt;</span></span><br>properties：{<br>	<span class="hljs-attr">count</span>:<span class="hljs-title class_">Number</span> <span class="hljs-comment">// 声明类型</span><br>}<br><span class="hljs-comment">// 事件绑定 子 父</span><br><span class="hljs-comment">// 父</span><br><br>父组件.<span class="hljs-property">js</span>  父.<span class="hljs-property">js</span> e.<span class="hljs-property">detail</span> 获取子组件传递过来的数据 <br><span class="hljs-title function_">syncCount</span>(<span class="hljs-params">e</span>){<br>	<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>({<br>		<span class="hljs-attr">count</span>:e.<span class="hljs-property">detail</span>.<span class="hljs-property">value</span><br>	})<br>}<br>父.<span class="hljs-property">wxml</span> 自定义事件 bindSync/<span class="hljs-attr">bind</span>:sync<br>&lt;my-test <span class="hljs-attr">bind</span>:sync=<span class="hljs-string">"syncCount"</span>&gt;&lt;<span class="hljs-regexp">/my-test&gt; /</span><span class="hljs-regexp">/ bindSync bind:子=“父” /</span><span class="hljs-regexp">/ sync 子   syncCount 父</span><br><span class="hljs-regexp"></span><br><span class="hljs-regexp"></span><br><span class="hljs-regexp">子组件.js this.triggerEvent("自定义事件名称",{ 参数对象 }) 将数据发送给对象</span><br><span class="hljs-regexp">methods:{</span><br><span class="hljs-regexp">	add(){</span><br><span class="hljs-regexp">		this.triggerEvent("sync",{ value:1000 })</span><br><span class="hljs-regexp">	}</span><br><span class="hljs-regexp">}</span><br><span class="hljs-regexp"></span><br><span class="hljs-regexp">获取实例</span><br><span class="hljs-regexp">/</span><span class="hljs-regexp">/ 父</span><br><span class="hljs-regexp">&lt;my-test class="child"&gt;&lt;/my</span>-test&gt;<br><br><span class="hljs-title function_">getChild</span>(<span class="hljs-params"></span>){<br>   <span class="hljs-keyword">const</span> child =  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">selectComponent</span>(<span class="hljs-string">".child"</span>)<br>   child.<span class="hljs-title function_">setData</span>({ <span class="hljs-attr">count</span>: child.<span class="hljs-property">count</span> + <span class="hljs-number">1</span> })<br>   child.<span class="hljs-property">data</span><br>}<br></code></pre></td></tr></tbody></table></figure><ul><li>自定义组件中的behaviors 小程序中 用于实现<code>组件代码间共享</code>的特性 类型vue的 mixins <code>组件中公共的代码behavior</code><ul><li>每个behavior可以包含一组属性、数据、生命周期函数和方法。组件引用它时，它的属性、数据和方法会被合并到组件中</li><li>每个组件中可以引用多个behavior，behavior也可以应用其他behavior</li><li>创建behavior <code>Behavior(Object object)</code>方法创建一个 <code>共享的behavior实例对象</code> 供所有的组件使用</li><li>导入并使用 require() 方法 导入需要的behavior 挂载后即可访问behavior中的数据和方法</li><li>所有可用节点 properties data methods behaviors created attached ready moved detached</li><li>同名字段的覆盖和组合规则 组件和它引用的behavior中可以包含同名的字段<ul><li>同名 data 、properties 、methods</li></ul></li></ul></li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js">/bbehavior/my-behavior.<span class="hljs-property">js</span><br><span class="hljs-comment">// 创建behavior</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-title class_">Behavior</span>({<br>  <span class="hljs-attr">properties</span>:{}, <span class="hljs-comment">//属性节点</span><br>  <span class="hljs-attr">data</span>:{ <span class="hljs-attr">usename</span>:<span class="hljs-string">"zs"</span> },<br>  <span class="hljs-attr">methods</span>:{}<br>})<br><br><span class="hljs-comment">// 组件.js 导入使用</span><br><span class="hljs-keyword">const</span> myBahavior = <span class="hljs-built_in">require</span>(<span class="hljs-string">"../../behaviors/my-behavior"</span>)<br><br><span class="hljs-title class_">Component</span>({<br>  	<span class="hljs-attr">behaviors</span>:[myBehavior]<br>})<br></code></pre></td></tr></tbody></table></figure><p>使用npm包</p><ul><li>不支持 node内置库包 浏览器内置对象包（jquery） C++插件包(加密的包)</li></ul><h3 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h3><ul><li>生命周期 是指一个对象从创建-&gt;运行-&gt;销毁的整个阶段 ，强调的是一个时间段<ul><li>小程序的启动 生命周期的开始 小程序的关闭 生命周期的结束</li></ul></li></ul><p>生命周期(时间段)</p><p>-</p><p>生命周期函数(时间点)</p><ul><li>概念：由小程序框架提供的内置函数，会伴随生命周期，自动按次序执行</li><li>作用：允许在特定的时间点，执行某些特定的操作</li></ul><p>应用生命周期函数 App({ }) app.js ==Launch Show Hide==</p><ul><li><code>onLaunch(){}</code> 初始化完成 只初始化一次</li><li><code>onShow(option){ }</code> 启动或从后台进入前台显示</li><li><code>onHide(){}</code> 前台进入后台时</li></ul><p>页面生命周期函数 Page({ }} page.js ==Load Show Ready Hide Unload==</p><ul><li><code>onLoad(){ }</code> 页面加载 一个页面只调用一次</li><li><code>onShow(){ }</code> 显示</li><li><code>onReady(){ }</code> 页面初次渲染完成 一个页面只调用一次</li><li><code>onHide(){ }</code> 隐藏</li><li><code>onUnload(){ }</code> 卸载 一个页面只调用一次</li></ul><p>生命周期分为应用生命周期和页面生命周期</p><p>生命周期分类</p><ul><li>应用生命周期 小程序 启动 -&gt; 运行(包含各个页面的生命周期) -&gt; 销毁 的过程 范围大</li><li>页面生命周期 页面 加载 -&gt; 渲染 -&gt; 销毁 的过程 范围小</li></ul><h4 id="应用生命周期-5个"><a href="#应用生命周期-5个" class="headerlink" title="应用生命周期 5个"></a>应用生命周期 5个</h4><p>5个应用生命周期：onLaunch(初始化)、onshow(启动或切前台)、onHide(切后台)、onError(错误监听)、onPageNotFound(不存在监听函数)</p><table><thead><tr><th>属性</th><th>类型</th><th>默认</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>onLaunch</td><td>function</td><td></td><td></td><td>监听⼩程序初始化</td></tr><tr><td>onShow</td><td>function</td><td></td><td></td><td>监听⼩程序启动或切前台</td></tr><tr><td>onHide</td><td>function</td><td></td><td></td><td>监听⼩程序切后台</td></tr><tr><td>onError</td><td>function</td><td></td><td></td><td>错误监听函数</td></tr><tr><td>onPageNotFound</td><td>function</td><td></td><td></td><td>页面不存在监听函数</td></tr></tbody></table><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// app.js 应用生命周期</span><br><span class="hljs-title class_">App</span>({<br>    <span class="hljs-attr">data</span>:{},<br>    <span class="hljs-title function_">onLaunch</span>(<span class="hljs-params"></span>){},<br>	<span class="hljs-title function_">onShow</span>(<span class="hljs-params"></span>){},<br>    <span class="hljs-title function_">onHide</span>(<span class="hljs-params"></span>){},<br>    <span class="hljs-title function_">onError</span>(<span class="hljs-params"></span>){},<br>    <span class="hljs-title function_">onPageNotFound</span>(<span class="hljs-params"></span>){}<br>})<br><br><span class="hljs-title class_">App</span>({<br>    <span class="hljs-attr">data</span>:{}<br>    <span class="hljs-attr">onLaunch</span>:<span class="hljs-title function_">funciton</span>(<span class="hljs-params"></span>){},<br>	<span class="hljs-attr">onShow</span>:<span class="hljs-title function_">funciton</span>(<span class="hljs-params"></span>){},<br>    <span class="hljs-attr">onHide</span>:<span class="hljs-title function_">funciton</span>(<span class="hljs-params"></span>){},<br>    <span class="hljs-attr">onError</span>:<span class="hljs-title function_">funciton</span>(<span class="hljs-params"></span>){},<br>    <span class="hljs-attr">onPageNotFound</span>:<span class="hljs-title function_">funciton</span>(<span class="hljs-params"></span>){}<br>})<br></code></pre></td></tr></tbody></table></figure><h4 id="页面生命周期-12个"><a href="#页面生命周期-12个" class="headerlink" title="页面生命周期 12个"></a>页面生命周期 12个</h4><p>12个页面生命周期：</p><ul><li>data(初始化数据)、onLoad(页面加载)、onShow(页面显示)、onReady(初次渲染)、onHide(页面隐藏)、onUnload(页面卸载)</li><li>onPullDownRefresh(上拉动作)、onReachBottom(上拉触底事件)、onShareAppMessage(右上角转发)、onPageScroll(滚动触发事件的处理函数)、onResize(页面存储触发、响应显示区域变化)、onTabitemTap(tab页)</li></ul><p><img src="/%E5%B0%8F%E7%A8%8B%E5%BA%8F.assets/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F-%E5%9F%BA%E7%A1%80.jpg" alt="微信小程序-基础"></p><table><thead><tr><th>属性</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>data</td><td>Object</td><td>页面的<code>初始数据</code></td></tr><tr><td>onLoad</td><td>funciton</td><td>生命周期回调-监听页面<code>加载</code></td></tr><tr><td>onShow</td><td>function</td><td>生命周期回调-监听页面<code>显示</code></td></tr><tr><td>onReady</td><td>function</td><td>生命周期回调-监听页面<code>初次渲染完成</code></td></tr><tr><td>onHide</td><td>function</td><td>生命周期回调-监听页面<code>隐藏</code></td></tr><tr><td>onUnload</td><td>function</td><td>生命周期回调-监听页面<code>卸载</code></td></tr><tr><td>onPullDownRefresh</td><td>function</td><td>监听用户<code>上拉动作</code></td></tr><tr><td>onReachBottom</td><td>function</td><td>页面<code>上拉触底事件</code>的处理函数</td></tr><tr><td>onShareAppMessage</td><td>function</td><td>用户点击右上角<code>转发</code></td></tr><tr><td>onPageScroll</td><td>function</td><td>页面<code>滚动</code>触发事件的处理函数</td></tr><tr><td>onResize</td><td>function</td><td>页面<code>尺寸改变</code>时触发，详见响应显示区域变化</td></tr><tr><td>onTabitemTap</td><td>function</td><td>当前是<code>tab页</code>，点击tab 时触发</td></tr></tbody></table><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// app.js 页面生命周期</span><br><span class="hljs-title class_">Page</span>({<br>    <span class="hljs-attr">data</span>:{},<br>   	<span class="hljs-attr">onLoad</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>){},<br>    <span class="hljs-attr">onReady</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){},<br>    <span class="hljs-attr">onShow</span>:<span class="hljs-title function_">funciton</span>(<span class="hljs-params"></span>){},<br>    <span class="hljs-attr">onHide</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){},<br>    <span class="hljs-attr">onUnload</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){},<br>    <span class="hljs-attr">onPullDownRefresh</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {},<br>    <span class="hljs-attr">onReachBottom</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {},<br>    <span class="hljs-attr">onShareAppMessage</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {},<br>    <span class="hljs-attr">onPageScroll</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {}, <br>    <span class="hljs-attr">onResize</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {}, <br>    <span class="hljs-attr">onTabitemTap</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {},          <br>})<br></code></pre></td></tr></tbody></table></figure><h3 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h3><p>视图与逻辑</p><ul><li><p>页面导航（跳转）指的是页面之间的相互跳转 浏览器实现页面跳转的方式：a location.href</p><ul><li><p>小程序中实现页面导航的两种方式</p><ul><li>声明式导航 wxml 在页面上声明<code>&lt;navigation&gt;</code> 导航组件 点击实现页面跳转<ul><li>导航到tabBar页面 <code>&lt;navigation url="/pages/message/message" open-type="switchTab"&gt;导航&lt;/navigator&gt;</code> url 页面地址 open-type 跳转方式 (switchTab/navigator(可以省略) )</li><li>后退导航 <code>&lt;navigator open-type="navigatorBack" delta="1"&gt;&lt;/navigator&gt;</code> navigatorBack 后退导航 delta 数字 厚涂层级 上一个页面 delta 可以省略</li></ul></li><li>编程式导航 js 小程序的导航API<ul><li>导航到tabBar <code>wx.switchTab(Object.object)</code> Object参数对象 url success fail complete<ul><li><code>goTo(){ wx.switchTab({ url:"/pages/message/message" }) }</code></li></ul></li><li>非tabBar页面 <code>wx.navigatorTo(Object.object)</code> Object url sucess fail complete</li><li>后退导航 <code>wx.navigatorBack(Object.object)</code> Object data( number 默认1 回退页面数) sucess fail complete<ul><li><code>wx.navigatorBack()</code></li></ul></li></ul></li></ul></li><li><p>导航传参</p><ul><li><p>声明式导航传参</p><ul><li><code>&lt;navigator url="/page/info/info?name=zs&amp;age=20"&gt; 跳转到页面</code> url路径后面可以携带参数 <code>参数 路径 ?参数键 参数值 = 不同参数 &amp;</code></li></ul></li><li><p>编程式导航传参<code>wx.navigateTo(Object object)</code> 方法跳转页面 可以携带参数</p><ul><li><code>wx.navigateTo({ url:"/page/info/info?name=zs&amp;age=20" })</code></li></ul></li><li><p>onLoad事件中接收导航参数 onLoad <code>option 导航的参数</code></p><ul><li><code>onLoad:function(options){ console.log(options) }</code></li></ul></li></ul></li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">data</span>:{ query }<br><span class="hljs-attr">onLoad</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>){<br>	<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>({<br>    <span class="hljs-attr">query</span>:options<br>  }}<br>}<br><span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>({ }) <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span><br></code></pre></td></tr></tbody></table></figure></li><li><p>自定义编译模式</p></li><li><p>启动页面 运行的页面 启动参数 传递到这个页面的参数 模式名称</p></li></ul><h3 id="网络请求"><a href="#网络请求" class="headerlink" title="网络请求"></a>网络请求</h3><p>网络数据请求</p><ul><li>数据接口的请求<ul><li>只能请求HTTPS类型的接口 必须将接口的域名添加到信任列表中（详情 项目配置 request合法域名）</li><li>配置request合法域名 微信小程序后台 修改request合法域名 只支持https协议 不支持ip地址或localhost 域名必须ICP备案 服务器域名一个月最多修改5次</li></ul></li><li>发起GET请求<ul><li><code>wx.request({ })</code> 发起GET数据请求</li></ul></li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;button bingtap=<span class="hljs-string">"getInfo"</span>&gt;<span class="hljs-variable constant_">GET</span>请求&lt;/button&gt;<br><br><span class="hljs-comment">// onLoad() 事件  生命周期函数 监听页面加载</span><br><span class="hljs-attr">onLoad</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>){<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getInfo</span>()<br>}<br><br><span class="hljs-title function_">getInfo</span>(<span class="hljs-params"></span>){<br>  	wx.<span class="hljs-title function_">request</span>({<br>      <span class="hljs-attr">url</span>:<span class="hljs-string">"https://www.xxx.com/api/get"</span>, <span class="hljs-comment">// https协议</span><br>      <span class="hljs-attr">method</span>:<span class="hljs-string">"GET"</span>, <span class="hljs-comment">// method:"POST"</span><br>      <span class="hljs-attr">data</span>:{ <span class="hljs-attr">name</span>:<span class="hljs-string">"zs"</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">19</span> },<br>      <span class="hljs-attr">success</span>:<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span>{  <span class="hljs-comment">// 请求成功后的回调</span><br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res) <span class="hljs-comment">// res.data</span><br>      }<br>    })<br>}<br></code></pre></td></tr></tbody></table></figure><ul><li><p>发起POST请求</p></li><li><p>页面刚加载时请求数据 自动请求一些初始化的数据 <code>onLoad事件</code> 调用获取数据的函数</p></li><li><p>跳过request合法域名校验（开发 调试下使用） 本地设置 不校验…HTTPS证书</p></li><li><p>跨域和AJAX 只存在基于浏览器的Web开发 小程序的宿主环境不是浏览器 而是微信客户端 小程序不存在跨域问题 小程序不能叫做发起AJAX请求，而是叫做发起网络数据请求</p></li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 页面.js</span><br><span class="hljs-attr">data</span>:{<br>  <span class="hljs-attr">swiperlist</span>:[] <span class="hljs-comment">//xxxlist:[]</span><br>}<br><br><span class="hljs-title function_">onload</span>(<span class="hljs-params">options</span>){<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getSwiperList</span>()<br>}<br><span class="hljs-comment">// 数据格式  [{id name url},{},{}]</span><br><span class="hljs-title function_">getSwiperList</span>(<span class="hljs-params"></span>){<br>  wx.<span class="hljs-title function_">request</span>({<br>    <span class="hljs-attr">url</span>:<span class="hljs-string">''</span>,<br>    <span class="hljs-attr">method</span>:<span class="hljs-string">"GET"</span>,<br>    <span class="hljs-attr">success</span>:<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span>{<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>({<br>        <span class="hljs-attr">swiperlist</span>:res.<span class="hljs-property">data</span> <span class="hljs-comment">// res.data {} {} {}</span><br>      })<br>    }<br>  })<br>}<br><br>&lt;view <span class="hljs-attr">wx</span>:<span class="hljs-keyword">for</span>=<span class="hljs-string">"{{ swiprlist }}"</span> <span class="hljs-attr">wx</span>:key=<span class="hljs-string">"id"</span> &gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">text</span>&gt;</span>{{ item.name }}<span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span></span><br>	<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">image</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"{{ item.url }}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">image</span>&gt;</span></span><br> &lt;/view&gt;<br></code></pre></td></tr></tbody></table></figure><p>小程序的API进行Promise化 依赖于<code>miniprogram-api-promise</code> 第三方包</p><ul><li>小程序官方异步API基于回调函数实现的 回调地狱 可读性 维护性差</li><li>API Promise 化 通过额外的配置，将官方提供的、基于回调函数的异步API 改造为基于Promise的异步函数 提高代码的可读性 维护性 避免回调地狱的问题</li><li><code>npm i -save miniprogram-api-promise</code> 每次安装都要构建npm 删除mininprogram_npm 再构建</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs js">wx.<span class="hljs-title function_">request</span>({<br>  <span class="hljs-attr">url</span>:<span class="hljs-string">''</span>,<br>  <span class="hljs-attr">method</span>:<span class="hljs-string">''</span>,<br>  <span class="hljs-attr">data</span>:{},<br>  <span class="hljs-attr">success</span>:<span class="hljs-function">()=&gt;</span>{},<br>  <span class="hljs-attr">fail</span>:<span class="hljs-function">()=&gt;</span>{},<br>  <span class="hljs-attr">complete</span>:<span class="hljs-function">()=&gt;</span>{}<br>})<br><br><span class="hljs-comment">// app.js</span><br><span class="hljs-keyword">import</span> { promisefyAll } <span class="hljs-keyword">from</span> <span class="hljs-string">'minprogram-api-promise'</span><br><span class="hljs-keyword">const</span> wxp = wx.<span class="hljs-property">p</span> = {}<br><span class="hljs-title function_">promisefyAll</span>(wx,wxp)<br><br><span class="hljs-keyword">async</span> <span class="hljs-title function_">getInfo</span>(<span class="hljs-params"></span>){<br>  <span class="hljs-keyword">const</span> { <span class="hljs-attr">data</span>:res } = <span class="hljs-keyword">await</span> wx.<span class="hljs-property">p</span>.<span class="hljs-title function_">request</span>({<br>    <span class="hljs-attr">method</span>:<span class="hljs-string">'GET'</span>,<br>    <span class="hljs-attr">url</span>:<span class="hljs-string">''</span>,<br>    <span class="hljs-attr">data</span>:{ <span class="hljs-attr">name</span>:zs,<span class="hljs-attr">age</span>:<span class="hljs-number">18</span> }<br>  }),<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res)<br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="MobX"><a href="#MobX" class="headerlink" title="MobX"></a>MobX</h3><p>MobX实现全局数据共享 <code>mobx-miniprogram</code> <code>mobx-miniprogram-bindings</code> 实现全局数据共享</p><ul><li>全局数据共享（又称 状态管理 store） 是为了解决组件之间数据共享的问题<ul><li>xxx:xxx</li><li>get xxx() 计算属性</li><li>函数:action(function(step){ } action(){}</li></ul></li><li>开发常用的全局数据共享方案有：Vuex、Redux、MobX</li><li>mobx-miniprogram 创建Store实例对象</li><li>mobx-miniprogram-bindings 把Store中的共享数据或方法，绑定到组件或页面中使用</li><li><code>npm install -–save mobx-miniprogram mobx-miniprogram-bindings</code> 安装后 重新构建npm</li><li>store 成员绑定到组件中</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 创建MobX 实例</span><br>/store/store.<span class="hljs-property">js</span>  创建store实例对象 <span class="hljs-title function_">observable</span>({ })<br><span class="hljs-keyword">import</span> { observable,action } <span class="hljs-keyword">from</span> <span class="hljs-string">'mobx-ac'</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> store = <span class="hljs-title function_">observable</span>({<br>  <span class="hljs-attr">numA</span>: <span class="hljs-number">100</span>,<br>  <span class="hljs-attr">numB</span>: <span class="hljs-number">200</span>,<br>  <span class="hljs-comment">// 计算属性 get xxx(){}</span><br>  <span class="hljs-keyword">get</span> <span class="hljs-title function_">sum</span>(){<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">numA</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">numB</span><br>  },<br>  <span class="hljs-comment">// action方法 修改store中的数据</span><br>  <span class="hljs-attr">updateNum1</span>:<span class="hljs-title function_">action</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">step</span>){<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">numA</span> += step<br>  }),<br>  <span class="hljs-attr">updateNum2</span>:<span class="hljs-title function_">action</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">step</span>){<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">numB</span> += step<br>  })<br>})<br><br><span class="hljs-comment">// store中的成员绑定到页面中 页面.js</span><br><span class="hljs-keyword">import</span> { createStoreBindings } <span class="hljs-keyword">from</span> <span class="hljs-string">'mobx-miniprogram-bindings'</span><br><span class="hljs-keyword">import</span> { store } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../store/store.js'</span><br><br><span class="hljs-title class_">Page</span>({<br>  <span class="hljs-comment">// this.storeBindings createStoreBindings({ })</span><br>  <span class="hljs-title function_">onLoad</span>(<span class="hljs-params"></span>){<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">storeBindings</span> = <span class="hljs-title function_">createStoreBindings</span>(<span class="hljs-variable language_">this</span>,{ <span class="hljs-comment">// this 实例</span><br>      store, <span class="hljs-comment">// 属性 方法</span><br>      <span class="hljs-attr">fields</span>:[<span class="hljs-string">"numA"</span>,<span class="hljs-string">"numB"</span>,<span class="hljs-string">"sum"</span>], <span class="hljs-comment">// 绑定到当前页面的字段</span><br>      <span class="hljs-attr">actions</span>:[<span class="hljs-string">"updateNum1"</span>,<span class="hljs-string">"updateNum2"</span>] <span class="hljs-comment">// aciton方法</span><br>    })<br>  },<br>  <span class="hljs-title function_">onUnload</span>(<span class="hljs-params"></span>){<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">storeBindings</span>.<span class="hljs-title function_">destroyStoreBindings</span>()<br>  }<br>})<br><br><span class="hljs-comment">// 子组件修改stote</span><br>获取 {{ numA }}<br><br><span class="hljs-comment">// action</span><br><span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateNum1</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">dataset</span>.<span class="hljs-property">stop</span>)<br><br><span class="hljs-comment">// store 绑定到组件</span><br><span class="hljs-keyword">import</span> { storeBindingsBehavior } <span class="hljs-keyword">from</span> <span class="hljs-string">'mobx-miniprogram-bindings'</span><br><span class="hljs-keyword">import</span> { store } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../store/store'</span><br><br><span class="hljs-title class_">Component</span>({<br>  <span class="hljs-attr">behaviors</span>:[storeBindingsBehavior],<br>  <span class="hljs-attr">storeBindings</span>:{<br>    store, <span class="hljs-comment">// 指定要绑定的store</span><br>    <span class="hljs-attr">fields</span>:{ <span class="hljs-comment">// 指定要绑定的字段数据</span><br>      <span class="hljs-attr">numA</span>:<span class="hljs-function">() =&gt;</span> store.<span class="hljs-property">numA</span>,<br>      <span class="hljs-attr">numB</span>:<span class="hljs-function">(<span class="hljs-params">store</span>) =&gt;</span> store.<span class="hljs-property">numB</span>,<br>      <span class="hljs-attr">sum</span>:<span class="hljs-string">"sum"</span><br>    },<br>    <span class="hljs-attr">actions</span>:{  <span class="hljs-comment">// 绑定方法</span><br>      <span class="hljs-attr">updateNum1</span>:<span class="hljs-string">"updateNum1"</span><br>    }<br>  }<br>})<br><br><br><span class="hljs-comment">// 使用</span><br>{{ numA }} {{ numB }} <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateNum1</span>() <span class="hljs-comment">//方法</span><br></code></pre></td></tr></tbody></table></figure><p>自定义tabBar</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">"tabBar":{<br>	"custom":true,<br>	 "list":[] // 保存 兼容低版本<br>}<br><br>添加tabBar 代码文件<br><br>/根目录创建custom-tab-bar/index<br></code></pre></td></tr></tbody></table></figure><ul><li>wx-for 是在 子元素 生成重复内容的元素上 而不是父元素上的</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js">json <br>{ <br>	<span class="hljs-attr">code</span>:<span class="hljs-number">200</span> <span class="hljs-comment">//状态码</span><br>  <span class="hljs-attr">data</span>:[{},{},{}] 数据格式<br>}<br><br>data <span class="hljs-attr">list</span>:[ { <span class="hljs-attr">name</span>:<span class="hljs-string">"zs"</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">20</span> },{ <span class="hljs-attr">name</span>:<span class="hljs-string">"ls"</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">20</span> },{ <span class="hljs-attr">name</span>:<span class="hljs-string">"wz"</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">30</span> } ]<br><span class="hljs-attr">list</span>:[]<br><br>res.<span class="hljs-property">data</span> (res是一个{})  json.<span class="hljs-property">data</span> 是个一个对象<br><br><span class="hljs-attr">wx</span>:<span class="hljs-keyword">for</span> 遍历一个数组里面的对象<br>view <span class="hljs-attr">wx</span>:<span class="hljs-keyword">for</span>=<span class="hljs-string">"{{ list }}"</span> <span class="hljs-attr">wx</span>:key=<span class="hljs-string">"index"</span><br>{{ index }} {{ item.<span class="hljs-property">name</span> }} item.<span class="hljs-property">age</span>  <span class="hljs-comment">// item.name == list[x].name</span><br></code></pre></td></tr></tbody></table></figure><ul><li>var(—变量值,默认值)</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">info=<span class="hljs-string">"{item.info ? item.info :''}"</span><br></code></pre></td></tr></tbody></table></figure><ul><li>监听器 observers 监听一个值的改变 另一个值也改变</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">observers</span>:{<br> <span class="hljs-string">"num"</span>:<span class="hljs-title function_">funciton</span>(<span class="hljs-params">val</span>){<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>({})<br> }<br>}<br><br><span class="hljs-title function_">onchage</span>(<span class="hljs-params">event</span>){<br>	wx.<span class="hljs-title function_">switchTab</span>({<br>		<span class="hljs-attr">url</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">list</span>[event.<span class="hljs-property">detail</span>].<span class="hljs-property">pagePath</span><br>	})<br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="分包"><a href="#分包" class="headerlink" title="分包"></a>分包</h3><p>分包</p><ul><li>分包指的是把 一个完整的小程序项目 按照需求划分为不同的子包 在构建时打包成不同的分包，用户在使用时按需进行加载</li></ul><p>分包的好处</p><ul><li>优化小程序首次启动的下载时间 多团队共同开发时 可以更好的解耦协作</li></ul><p>分包前项目的构成</p><ul><li>分包前 小程序所有的页面和资源都会被打包到一起 项目体积大 首次启动下载时间长</li></ul><p>分包后项目构成</p><ul><li>分包后 1个主包 + 多个分包<ul><li>主包 一般包含项目的启动页面或TabBar页面 以及所有分包都需要用到的一些公共资源</li><li>分包 只包含和当前分包有关的页面和私有资源</li></ul></li><li>分包的加载规则<ul><li>小程序启动时，默认会下载主包并启动主包内页面<ul><li>tabBar 页面需要放到主包内</li></ul></li><li>当用户界面进入分包内某个页面时，客户端会把对应分包下载下来，下载完成后再进行展示<ul><li>非tabBar页面可以按照功能的不同，划分为不同的分包之后 进行按需下载</li></ul></li></ul></li></ul><p>分包的体积限制</p><ul><li>分包（主包+分包）不能超过 16M</li><li>单个分包、主包大小不能超过 2M</li></ul><p>使用分包</p><ul><li>配置方法 <code>app.json subpackages[{},{}]</code> 节点中声明分包的结构</li></ul><p>独立分包 <code>independent:true</code></p><ul><li>本质上也是分包 只不过比较特殊 可以独立于主包和其他分包而单独运行</li><li>应用场景 按需 具有一定功能独立性的页面配置到独立分包<ul><li>当小程序从普通的分包页面启动时 首先下载主包</li><li>独立分包不依赖主包运行 可以提升分包页面的启动速度</li></ul></li><li>引用原则<ul><li>独立分包和普通分包之间 是相互隔绝的 不能相互引用彼此的资源<ul><li>其他分包（主包、普通分包、其他独立分包）都无法引用 独立分包的私有资源</li><li>特别注意 独立分包 不能引用主包内的公共资源</li></ul></li></ul></li><li>分包预下载 进入小程序的某个页面 框架自动预下载可能需要的分包 提升进入后续分包页面时的启动速度</li><li>配置分包预下载 预下载分包的行为，会在进入指定的页面时触发 app.json中 使用 <code>preloadRule:{}</code>节点定义分包的预下载规则</li><li>分包预下载限制<ul><li>同一分包中的页面 共同的预下载大小限额2M</li></ul></li></ul><p>独立分包 vs 普通分包</p><ul><li>主要区别 是否依赖于主包才能运行</li><li>普通分包 必须依赖于主包才能运行</li><li>独立分包可以在不下载主包的情况下 独立运行</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs js">分包目录<br>app.<span class="hljs-property">js</span><br>app.<span class="hljs-property">json</span><br>app.<span class="hljs-property">wxss</span><br>pages<br>--- index<br>--- logo<br>packageA<br>--pages<br>----cat<br>----dog<br>packageB<br>--pages<br>----apple<br>----banner<br><br><span class="hljs-comment">//app.json</span><br><span class="hljs-title class_">App</span>({<br>  <span class="hljs-string">"pages"</span>:[ <span class="hljs-comment">// 主包的所有页面</span><br>    <span class="hljs-string">"pages/index"</span>,<br>    <span class="hljs-string">"pages/logs"</span><br>  ],<br>  <span class="hljs-comment">// 添加配置项 编译 自动生成</span><br>  <span class="hljs-string">"subpackages"</span>:[ <span class="hljs-comment">// 通过 subpackages 节点 声明分包结构</span><br>    {<br>      <span class="hljs-string">"root"</span>:<span class="hljs-string">"packageA"</span>, <span class="hljs-comment">// 第一个分包的根目录</span><br>    	<span class="hljs-string">"pages"</span>:[<br>        <span class="hljs-string">"pages/cat/cat"</span>,<br>        <span class="hljs-string">"pages/dog/cat"</span><br>      ]<br>    },{<br>      <span class="hljs-string">"root"</span>:<span class="hljs-string">"packageB"</span>,  <span class="hljs-comment">// 第二个分包的根目录</span><br>      <span class="hljs-string">"name"</span>:<span class="hljs-string">"pack2"</span>, <span class="hljs-comment">// 分包添加别名</span><br>      <span class="hljs-string">"pages"</span>:[<br>        <span class="hljs-string">"pages/apple/apple"</span>,<br>        <span class="hljs-string">"pages/bannan/bannan"</span><br>      ],<br>      <span class="hljs-string">"independent"</span>:<span class="hljs-literal">true</span> <span class="hljs-comment">// 独立分包</span><br>    }<br>  ],<br>  <span class="hljs-string">"preloadRule"</span>:{ <span class="hljs-comment">// 分包预下载规则</span><br>    <span class="hljs-string">"pages/contact/contact"</span>:{ <span class="hljs-comment">// 触发分包预下载的页面路径</span><br>      <span class="hljs-string">"network"</span>:<span class="hljs-string">"all"</span>, <span class="hljs-comment">// network 指定的网络模式下进行预下载  all 不限 wifi </span><br>      <span class="hljs-string">"packages"</span>:[<span class="hljs-string">"pagkageA"</span>]  <span class="hljs-comment">// packages 表示进入页面 预下载分包 通过root或name指定预下载那些分包</span><br>    },<br>    <br>    <span class="hljs-string">"pages/log/log"</span>:{ <span class="hljs-comment">// 触发分包预下载的页面路径</span><br>      <span class="hljs-string">"network"</span>:<span class="hljs-string">"wifi"</span>, <span class="hljs-comment">// network 指定的网络模式下进行预下载  all 不限 wifi </span><br>      <span class="hljs-string">"packages"</span>:[<span class="hljs-string">"pagkageB"</span>]  <span class="hljs-comment">// packages 表示进入页面 预下载分包 通过root或name指定预下载那些分包</span><br>    }<br>  }<br>})<br></code></pre></td></tr></tbody></table></figure><h3 id="常见功能"><a href="#常见功能" class="headerlink" title="常见功能"></a>常见功能</h3><p>下拉刷新</p><ul><li><p>下拉刷新 移动端专有名词 下拉滑动 重新加载页面数据的行为</p><ul><li>全局开启 app.json enablePullDownRefresh true</li><li>局部开启(推荐) 页面.json enablePullDownRefresh true<ul><li>backgroud/Color(16进制) TextStyle(dark/light)</li></ul></li><li>Page() 内的 onPullDownRefresh(){ } 函数 监听当前页面的下拉刷新事件</li><li>停止下拉刷新 处理完下拉刷新 loading 会一直显示 不会自动消失 手动隐藏 loading 效果 <code>wx.stopPullDownRefresh()</code> 停止当前页面的刷新效果<ul><li><code>onPullDownRefresh(){ wx.stopPullDownRefresh() }</code></li></ul></li></ul></li><li><p>上拉加载 上拉滑动 加载更多数据的行为</p><ul><li>监听页面上的上拉触底事件 页面.js <code>onReachBottom()</code> onReachBottom:function(){ }<ul><li>节流</li></ul></li><li>上拉触底距离 .json <code>onReachBottomDistance=50(默认)</code></li></ul></li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;view <span class="hljs-attr">wx</span>:<span class="hljs-keyword">for</span>=<span class="hljs-string">"{{ colorList }}"</span> <span class="hljs-attr">wx</span>:key=<span class="hljs-string">"index"</span> <span class="hljs-keyword">class</span>=<span class="hljs-string">"num-item"</span> style=<span class="hljs-string">"background-color: rgb({{ item }})"</span>&gt;<br>	{{ item }}<br>&lt;/view&gt;<br><span class="hljs-title function_">getColor</span>(<span class="hljs-params"></span>){<br>	wx.<span class="hljs-title function_">request</span>({<br>		<span class="hljs-attr">url</span>: <span class="hljs-string">'https://www.escook.cn/api/color'</span>,<br>		<span class="hljs-attr">method</span>:<span class="hljs-string">'get'</span>,<br>		<span class="hljs-attr">success</span>:<span class="hljs-function">(<span class="hljs-params"> { data: res } </span>) =&gt;</span>{<br>      <span class="hljs-comment">// var [a,b] = [1,2] {}:{}</span><br>			<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>({<br>				<span class="hljs-attr">colorList</span>: [...<span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">colorList</span>, ...res.<span class="hljs-property">data</span>] <span class="hljs-comment">// 拼接数组 [...[1,2,3,4],...[23,4,5,5]]</span><br>        <span class="hljs-comment">//</span><br>			})<br>			<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res)<br>		}<br>	})<br>},<br>  <span class="hljs-title function_">onLoad</span>(<span class="hljs-params"></span>){<br>		<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getColor</span>()<br>	},<br><br>  }<br>  <span class="hljs-title function_">onReachBottom</span>(<span class="hljs-params"></span>) {<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getColor</span>()<br>  },<br><br><br> loading 提示框<br>wx.<span class="hljs-title function_">showLoading</span>({ <span class="hljs-attr">title</span>:<span class="hljs-string">"数据加载中....."</span> })<br><br>wx.<span class="hljs-title function_">request</span>({<br>  <span class="hljs-attr">complete</span>:<span class="hljs-function">()=&gt;</span>{<br>    wx.<span class="hljs-title function_">hideLoading</span>()<br>  }<br>})<br></code></pre></td></tr></tbody></table></figure><ul><li>提示框 <code>wx.showLoading(Object object)/wx.hiddeLoading()</code> object title</li><li>上拉触底 节流操作</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// data 定义 isloading 节流阀</span><br><span class="hljs-attr">data</span>:{<br>  <span class="hljs-attr">isloading</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// true 正在进行数据请求 false 没有任何数据请求</span><br>}<br><br><span class="hljs-comment">// getColors() 方法修改节流阀的值</span><br><span class="hljs-title function_">getColors</span>(<span class="hljs-params"></span>){<br>  wx.<span class="hljs-title function_">request</span>({ <span class="hljs-comment">// complete 回调函数中重置为false</span><br>    <span class="hljs-attr">complete</span>:<span class="hljs-function">()=&gt;</span>{<br>      wx.<span class="hljs-title function_">hideLoading</span>()<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>({<br>        <span class="hljs-attr">isloading</span>:<span class="hljs-literal">false</span><br>      })<br>    }<br>  })<br>}<br><br><span class="hljs-comment">// onReachBottom 判断节流阀的值，从而对数据进行节流操作</span><br><span class="hljs-title function_">onReachBottom</span>(<span class="hljs-params"></span>){<br>  <span class="hljs-keyword">if</span>(isloading == <span class="hljs-literal">true</span>) <span class="hljs-keyword">return</span> <span class="hljs-comment">// 阻止请求</span><br>  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getColors</span>()  <span class="hljs-comment">// false 发起请求</span><br>}<br></code></pre></td></tr></tbody></table></figure><ul><li>navigator 传递参数<code>url</code>和获取参数 <code>onLoad(options){ options }</code></li><li>data中的<code>this.setData({ }) 设置 this.data.xxx.xxx 获取</code></li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 传递参数 把json中的数据作为参数 传递给 下一个组件动态生成页面</span><br>&lt;navigator url=<span class="hljs-string">"/pages/shoplist/shoplist?id={{ item.id }}&amp;title={{item.name}}"</span> <span class="hljs-attr">wx</span>:<span class="hljs-keyword">for</span>=<span class="hljs-string">"{{ gridlist }}"</span> <span class="hljs-attr">wx</span>:key=<span class="hljs-string">"id"</span> <span class="hljs-keyword">class</span>=<span class="hljs-string">"grid-item"</span>&gt;<br>		<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">image</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"{{item.icon}}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">image</span>&gt;</span></span><br>			<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">text</span>&gt;</span>{{item.name}}<span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span></span><br>&lt;/navigator&gt;<br><br><span class="hljs-attr">data</span>: {<br>		<span class="hljs-attr">query</span>:{}  <span class="hljs-comment">// 参数</span><br>},<br><span class="hljs-comment">// this.setData({ }) this.data.xxx.xxx </span><br><span class="hljs-title function_">onLoad</span>(<span class="hljs-params">options</span>) {<br>		<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>({<br>			<span class="hljs-attr">query</span>:options<br>		})<br>},<br><span class="hljs-title function_">onReady</span>(<span class="hljs-params"></span>) {<br>    wx.<span class="hljs-title function_">setNavigationBarTitle</span>({<br>      <span class="hljs-attr">title</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">query</span>.<span class="hljs-property">title</span><br>    })<br> },  <br></code></pre></td></tr></tbody></table></figure><ul><li>wx.setNavigationBarTitle(Object object) onReady使用</li><li>不同分页数据的获取</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">data</span>: {<br>  <span class="hljs-attr">query</span>: {}, <br>  <span class="hljs-attr">showList</span>: [], 所有数据<br>  <span class="hljs-attr">page</span>: <span class="hljs-number">1</span>, 当前页<br>  <span class="hljs-attr">pageSize</span>: <span class="hljs-number">10</span>, 页数<br>  <span class="hljs-attr">total</span>: <span class="hljs-number">0</span> 总页数<br>},<br>    <br><span class="hljs-title function_">getShowList</span>(<span class="hljs-params"></span>){<br>  wx.<span class="hljs-title function_">request</span>({<br>    <span class="hljs-attr">url</span>:<span class="hljs-string">`https://www.escook.cn/categories/<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.data.query.id}</span>/shops`</span>,<br>    <span class="hljs-attr">method</span>:<span class="hljs-string">"get"</span>,<br>    <span class="hljs-attr">data</span>:{<br>      	<span class="hljs-attr">_page</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">page</span>,<br>				<span class="hljs-attr">_limit</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">pageSize</span><br>    },<br>    <span class="hljs-attr">success</span>:<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span>{<br>      	<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>({<br>					<span class="hljs-attr">showList</span>: [...<span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">showList</span>, ...res.<span class="hljs-property">data</span>],<br>					<span class="hljs-attr">total</span>: res.<span class="hljs-property">header</span>[<span class="hljs-string">"X-Total-Count"</span>] - <span class="hljs-number">0</span><br>				})<br>    }<br>  })<br>}<br><br><span class="hljs-title function_">onLoad</span>(<span class="hljs-params"></span>){<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getShowList</span>()<br>}<br></code></pre></td></tr></tbody></table></figure><ul><li>数据渲染到页面</li></ul><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">&lt;view wx:for="{{ showList }}" wx:key="id"&gt;<br>	&lt;image src="{{ item.src }}"&gt;&lt;/image&gt;<br>	&lt;text&gt; {{ item.address }} &lt;text&gt;<br>	&lt;text&gt; {{ item.name }} &lt;text&gt;<br>	&lt;text&gt; {{ item.phone }} &lt;text&gt;<br>&lt;/view&gt;<br></code></pre></td></tr></tbody></table></figure><ul><li>loading 效果</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">getShowList</span>(<span class="hljs-params"></span>) {<br>	wx.<span class="hljs-title function_">showLoad</span>({<br>		<span class="hljs-attr">title</span>:<span class="hljs-string">"数据加载中..."</span><br>	}),<br>	wx.<span class="hljs-title function_">request</span>({<br>		<span class="hljs-attr">url</span>: <span class="hljs-string">`https://www.escook.cn/categories/<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.data.query.id}</span>/shops`</span>,<br>		<span class="hljs-attr">method</span>: <span class="hljs-string">"get"</span>,<br>		<span class="hljs-attr">data</span>: {<br>			<span class="hljs-attr">_page</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">page</span>,<br>			<span class="hljs-attr">_limit</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">pageSize</span><br>		},<br>		<span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {<br>			<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>({<br>				<span class="hljs-attr">showList</span>: [...<span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">showList</span>, ...res.<span class="hljs-property">data</span>],<br>				<span class="hljs-attr">total</span>: res.<span class="hljs-property">header</span>[<span class="hljs-string">"X-Total-Count"</span>] - <span class="hljs-number">0</span><br>			})<br>		},<br>		<span class="hljs-attr">comlete</span>: <span class="hljs-function">() =&gt;</span> {<br>			wx.<span class="hljs-title function_">hideLoading</span>()<br>       wx.<span class="hljs-property">stopPullDown</span><br>		}<br>	})<br>},<br></code></pre></td></tr></tbody></table></figure><ul><li>下拉触底 页码加1</li></ul><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">"onReachBottomDistance":200<br><br>onReachBottom() {<br>	this.setData({<br>		page: this.data.page + 1<br>	})<br>	this.getShowList()<br>},<br></code></pre></td></tr></tbody></table></figure><ul><li>节流<ul><li>data isloading 设置false</li><li>get数据方法 重置值 getShow (){} this.setData({isloading:true}) complete:()=&gt;{ this.setData({isloading:false}) }</li><li>onLoad if(this.data.isloading) return</li></ul></li><li>判断下一页数就上限<ul><li>判断下一页有没有数据 page * pageSize &gt;= total 页面值 * 每页显示多少条数据 &gt;= 总数据条数</li></ul></li></ul><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">if (this.data.page * this.data.pageSize &gt;= this.data.total) {<br>			returnwx.showToast({<br>					title:"数据加载完毕",<br>					icon:"none"<br>			})<br>}<br></code></pre></td></tr></tbody></table></figure><ul><li>上拉重置</li></ul><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">onPullDownRefresh() {<br>	this.setData({<br>		page: 1,<br>		showList: [],<br>		total:0<br>	}),<br>	this.getShowList()<br>},<br></code></pre></td></tr></tbody></table></figure><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><code class="hljs js">{<br>	<span class="hljs-string">"usingComponents"</span>: {},<br>	<span class="hljs-string">"onReachBottomDistance"</span>: <span class="hljs-number">200</span>,<br>	<span class="hljs-string">"enablePullDownRefresh"</span>: <span class="hljs-literal">true</span>,<br>	<span class="hljs-string">"backgroundColor"</span>: <span class="hljs-string">"#efefef"</span>,<br>	<span class="hljs-string">"backgroudnColor"</span>: <span class="hljs-string">"dark"</span><br>}	<br><br>	<span class="hljs-attr">data</span>: {<br>		<span class="hljs-attr">query</span>: {},<br>		<span class="hljs-attr">showList</span>: [],<br>		<span class="hljs-attr">page</span>: <span class="hljs-number">1</span>,<br>		<span class="hljs-attr">pageSize</span>: <span class="hljs-number">10</span>,<br>		<span class="hljs-attr">total</span>: <span class="hljs-number">0</span>,<br>		<span class="hljs-attr">isloading</span>: <span class="hljs-literal">false</span><br>	},<br> <br>	<span class="hljs-title function_">getShowList</span>(<span class="hljs-params">cb</span>) {<br>			wx.<span class="hljs-title function_">showLoading</span>({<br>				<span class="hljs-attr">title</span>: <span class="hljs-string">"数据加载中..."</span><br>			}),<br>			<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>({<br>				<span class="hljs-attr">isloading</span>: <span class="hljs-literal">true</span><br>			}),<br>			wx.<span class="hljs-title function_">request</span>({<br>				<span class="hljs-attr">url</span>: <span class="hljs-string">`https://www.escook.cn/categories/<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.data.query.id}</span>/shops`</span>,<br>				<span class="hljs-attr">method</span>: <span class="hljs-string">"get"</span>,<br>				<span class="hljs-attr">data</span>: {<br>					<span class="hljs-attr">_page</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">page</span>,<br>					<span class="hljs-attr">_limit</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">pageSize</span><br>				},<br>				<span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {<br>					<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>({<br>						<span class="hljs-attr">showList</span>: [...<span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">showList</span>, ...res.<span class="hljs-property">data</span>],<br>						<span class="hljs-attr">total</span>: res.<span class="hljs-property">header</span>[<span class="hljs-string">"X-Total-Count"</span>] - <span class="hljs-number">0</span><br>					})<br>				},<br>				<span class="hljs-attr">complete</span>: <span class="hljs-function">() =&gt;</span> {<br>					wx.<span class="hljs-title function_">hideLoading</span>()<br>					<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>({ <span class="hljs-attr">isloading</span>: <span class="hljs-literal">false</span> })<br>					<span class="hljs-comment">// wx.stopPullDownRefresh()</span><br>          cb &amp;&amp; <span class="hljs-title function_">cb</span>() <span class="hljs-comment">// cb</span><br>				}<br>			})<br>	},<br>	<span class="hljs-title function_">onLoad</span>(<span class="hljs-params">options</span>) {<br>		<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>({<br>			<span class="hljs-attr">query</span>: options<br>		})<br>		<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getShowList</span>()<br>	},<br>	<span class="hljs-title function_">onReady</span>(<span class="hljs-params"></span>) {<br>		wx.<span class="hljs-title function_">setNavigationBarTitle</span>({<br>			<span class="hljs-attr">title</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">query</span>.<span class="hljs-property">title</span>,<br>		})<br>	},<br>	<span class="hljs-title function_">onPullDownRefresh</span>(<span class="hljs-params"></span>) {<br>		<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>({<br>			<span class="hljs-attr">page</span>: <span class="hljs-number">1</span>,<br>			<span class="hljs-attr">showList</span>: [],<br>			<span class="hljs-attr">total</span>:<span class="hljs-number">0</span><br>		}),<br>		<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getShowList</span>(<span class="hljs-function">()=&gt;</span>{<br>      wx.<span class="hljs-title function_">stopPullDownRefresh</span>()<br>    })<br>	},<br>	<span class="hljs-title function_">onReachBottom</span>(<span class="hljs-params"></span>) {<br>		<span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">page</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">pageSize</span> &gt;= <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">total</span>) {<br>			<span class="hljs-keyword">return</span> wx.<span class="hljs-title function_">showToast</span>({<br>				<span class="hljs-attr">title</span>: <span class="hljs-string">"数据加载完毕"</span>,<br>				<span class="hljs-attr">icon</span>:<span class="hljs-string">"none"</span><br>			})<br>		}<br>		<span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">isloading</span>) <span class="hljs-keyword">return</span><br>		<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>({<br>			<span class="hljs-attr">page</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">page</span> + <span class="hljs-number">1</span><br>		})<br>		<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getShowList</span>()<br>	}<br></code></pre></td></tr></tbody></table></figure><h2 id="框架"><a href="#框架" class="headerlink" title="框架"></a>框架</h2><ul><li><p>mpvue</p></li><li><p>taro</p></li></ul><h2 id="UI库"><a href="#UI库" class="headerlink" title="UI库"></a>UI库</h2><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>weui</td><td></td></tr><tr><td>iview</td><td></td></tr><tr><td>vant weapp</td><td></td></tr><tr><td>wux</td><td></td></tr></tbody></table><p>vant-weapp(组件库) <a target="_blank" rel="noopener" href="https://vant-contrib.gitee.io/vant-weapp/#/home">介绍 - Vant Weapp</a></p><ul><li>安装npm(npm init npm init -y @vant/weapp -S –production) 构建npm(构建npm 使用npm模块) 修改app.json(style:v2删除)</li><li>使用vant组件 app.json <code>usingComponents</code>节点中引入需要的组件</li></ul><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json">app.json<br><span class="hljs-attr">"usingComponents"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><br>	 <span class="hljs-attr">"van-button"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"@vant/weapp/button/index"</span><br><span class="hljs-punctuation">}</span><br><br>&lt;van-button type=<span class="hljs-string">"primary"</span>&gt;&lt;/van-button&gt;<br></code></pre></td></tr></tbody></table></figure><ul><li>定制全局主题样式 <code>app.wxss</code><ul><li><a target="_blank" rel="noopener" href="https://github.com/youzan/vant-weapp/blob/dev/packages/common/style/var.less">vant-weapp/var.less at dev · youzan/vant-weapp</a></li></ul></li></ul><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-pseudo">:root</span>{<br>  <span class="hljs-attr">--main-color</span>:red; /// <span class="hljs-attr">--main-bg-color</span>:blue<br>}<br><span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--main-color); // <br><br>// page页面标签<br>// 重新覆盖官方的css样式<br>page{<br>  <span class="hljs-attr">--button-danger-background-color</span>:<span class="hljs-number">#C00000</span>; // 修改自定义样式<br>}<br></code></pre></td></tr></tbody></table></figure><h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>postcss-px2units</td><td>将 px 单位转换为 rpx 单位，或者其他单位的 PostCSS插件</td></tr><tr><td>gulp-upload-qcloud</td><td>腾讯云 cos 静态资源上传 gulp 插件</td></tr><tr><td>qcloud-upload</td><td>基于 nodejs 腾讯云上传插件</td></tr><tr><td>weapp-<u>qrcodea</u></td><td>微信小程序 中，快速生成二维码</td></tr></tbody></table><ul><li>app.js 入口文件 <code>App()函数</code> 启动整个小程序</li><li>页面.js 页面入口文件 <code>Page()函数</code> 创建并运行页面</li><li>普通.js 普通的功能模块 封装公共的函数或属性给页面使用 <code>utils/utils.js</code> <code>module.exports = { name:name } / require</code></li></ul><p>页面 vs 组件</p><ul><li>全局 <code>App({ })</code></li><li>页面 Pages <code>Page({ })</code></li><li>组件 Component <code>页面内导入</code> 属性、数据、方法</li></ul><p>App.json</p><ul><li><code>pages:[]</code></li><li><code>tabBar:{ }</code> postion:bottom/top 、borderStyle、color 、selectColor backgroundColor 、list<ul><li><code>“list”:[ { pagePath text iconPath selectIconPath },{},{} ]</code></li></ul></li><li>window<ul><li>navigationBar(BackgroundColor,TextStyle,TitleText) 导航条</li></ul></li><li>enablePullDownRefresh:false 下拉刷新<ul><li>background(TextStyle(dark/light),Color) 下拉窗口样式</li></ul></li><li>onReachBottomDistance=50 上拉触底</li></ul><p>指令</p><ul><li><p>wx:for=<code>{{ [{},{},{}] }}</code> 遍历的是一个数组 + wx:key 提高数组渲染的性能</p><ul><li>wx:for-item 数组元素 <code>{{ item }}</code> 当前循环项</li><li>wx:for-index 数组下标<code>{{ index }}</code>索引</li><li>手动指定索引和当前项的变量名 重命名索引和Item项 （不常用）<ul><li>wx-for-index=“idx” 可以指定当前循环项的索引的变量名</li><li>wx-for-item=“itm” 可以指定当前项的变量名</li></ul></li><li>wx:key <code>wx:key="id"/"index" id是数组的一个键名</code> 渲染出来的列表项指定唯一的key值 从而提高渲染效率 <code>vue中 :key="id"</code></li></ul></li><li><p>wx:if wx:elif wx:else 条件渲染 vs hidden</p><ul><li><code>hidden="{{ }}"</code></li><li><code>wx:if="{{ condition }} / true or false"</code> 判断是否渲染该代码块</li><li><code>wx:if={{ type = 1 }} wx:elif={{ type = 1 }} wx:else</code> wx-if wx:elif wx-else</li><li><code>结合&lt;block&gt;使用wx-if &lt;block wx-if="{{ }}"&gt; &lt;/block&gt;</code> 一次性控制多个组件的展示和隐藏 block 将多个组件包装起来 没有任何效果 并不是一个组件 包裹性质的容器 不会在页面中做任何渲染</li><li>hidden <code>hidden="{{ condition }} // true or false"</code> 控制元素的显示和隐藏</li><li>区别 wx-if 动态创建和移除元素的方式 控制条件复杂 切换效率高 hidden 切换样式（display:none/block）频繁切换使用 渲染效率高</li></ul></li></ul><p>事件绑定</p><ul><li><code>bind*/bind:*</code> <code>bind(tap|input|change) or bind:(tap|input|change)</code><ul><li><code>input事件的值 e.detail.value</code></li></ul></li><li>重点 事件传参数 事件不能直接传递参数<ul><li><code>data-变量="{{ xxx }}"</code></li><li><code>handleInput:fucniton(e){ e.currentTarget.dataset.变量 }</code></li></ul></li><li>target vs currentTarget: target 触发该事件的源头组件 currentTarget 当前事件所绑定的组件（当前触发事件的组件）</li></ul><p>wxml 结构</p><p>数据绑定</p><ul><li><code>data:{ info:"messaage" } {{ info }}</code><ul><li><code>{{ 100 + 200/ ? : }} &lt;image src="{{imgSrc}}"&gt;</code></li></ul></li><li><code>this.setData({ num: this.data.num + 100 })</code> 页面data 重新赋值</li></ul><p>组件</p><ul><li>view</li><li>text 文本</li><li>rich-text 富文本组件 将字符串解析成对应标签，类似vue中的v-html功能 <code>&lt;rich-text nodes="&lt;img src="https://www.baidu.com/&gt;"</code></li><li>scrol-view scroll-x/y</li><li>input</li><li>button <code>type="primary/warn" size="mini" plain 镂空 open-type属性 disabled loading form-type open-type</code></li><li>image 图片 src mode 指定裁剪和缩放模式 (scaleToFill、aspectFit、aspectFill、widthFix) lazy-load</li><li>icon <code>图标</code> type size color <code>&lt;icon type="success" size="40" color="{{item}}"/&gt;</code></li><li>swiper swiper-item<ul><li>indicator-dots、indicator-color、indicator-active-color</li><li>autoplay、interval、circular</li></ul></li><li>navigator <code>a 链接</code><ul><li>url target 在哪个目标上发生跳转,默认当前小程序 open-type(跳转方式 navigate redirect switchTab reLaunch navigateBack)</li></ul></li><li>radio <code>radio-group radio 单选按钮</code></li><li>checkbox <code>checkbox-group checkbox</code></li><li>map canvase</li><li>video</li></ul><p>wxss 样式</p><ul><li>rpx 响应式单位 自适应 iphone6 750rpx = 375px = 750物理像素、1rpx = 0.5px = 1物理像素 <code>2rpx = 1px</code></li><li>支持部分css选择器 <code># . element 并、后代 ::after ::before nth-child(n)</code></li><li><code>@import "common.wxss"</code></li></ul><p>wxs 过滤器</p><ul><li><code>&lt;wxs&gt;&lt;/wxs&gt;</code> 类似<code>&lt;script&gt;</code>标签 必须提供module属性 指定当前wxs的模块名称 方便在wxml中访问模块中的成员</li><li>WXML 无法调用页面js中的函数 WXML 可以调用WXS中定义的函数</li><li><code>&lt;wxs module="m1"&gt; module.exports.xxx = function(str){} &lt;/wxs&gt;</code><ul><li><code>&lt;view&gt;{{ m1.xxx(str) }}&lt;/view&gt;</code></li></ul></li><li><code>&lt;wxs module="m2" src="../../tool.wxs"&gt;&lt;/wxs&gt;</code></li></ul><p>API</p><ul><li>事件监听 API <code>以on开头，用来监听某些事件的触发</code><ul><li><code>wx.onWindowResize(function callback) 监听窗户尺寸变化的事件</code></li></ul></li><li>同步 API <code>以Sync结尾的API</code> 都是同步API 同步API的执行结果 可以通过函数返回值直接获取<ul><li><code>wx.setStorageSync("key","vaklue") 向本地存储写入内容</code></li></ul></li><li>异步 API 类似jquery中国的$.ajax(option)函数 需要通过 success fail complete 接受调用<ul><li><code>wx.require() 发起网络请求 success 回调函数接受数据</code></li></ul></li></ul><p>自定义组件</p><ul><li>声明组件<ul><li>新建组件 <code>components/test目录 test文件</code></li><li>全局/局部注册组件 <code>“usingComponets:{ "my-header":"/components/myHeader/myHeader" }"</code></li><li>定义组件 <code>&lt;view&gt;Hello World&lt;/view&gt;</code> HelloWorld组件</li><li>使用组件 <code>&lt;HelloWorld&gt;&lt;/HelloWorld&gt;</code></li></ul></li><li>自定义组件<ul><li><code>data:{} 数据</code></li><li><code>method:{} 方法</code></li><li><code>properties:{} 属性</code></li><li><code>observers:{} 数据监听器</code></li><li><code>纯数据字段</code></li></ul></li><li>自定义组件样式<ul><li>组件样式互不影响、全局样式对组件无效、只有class选择器有影响推荐使用、id 属性 标签选择器不受样式隔离的影响</li><li>修改组件的样式隔离<ul><li>js <code>Component({ options:{ styleIsolation:"isolated" } })</code></li><li>.json <code>“styleIsolation:"isolated"”</code></li></ul></li></ul></li><li>自定义组件中的behaviors</li></ul><p>组件 vs 页面</p><ul><li>组件 .json 需要声明<code>“component”:true</code>属性 .js文件调用 <code>Component({})</code>函数 组件的事件处理函数需要定义到methods节点中<ul><li>data:{}\methods:{}</li></ul></li><li>页面 <code>Page({})</code>函数</li></ul><p>组件通信</p><ul><li>父传子<ul><li>属性方法 父组件是包含子组件的</li></ul></li><li>子传父<ul><li>事件绑定</li><li>获取子组件实例</li></ul></li></ul><p>生命周期</p><ul><li><p>组价生命周期</p><ul><li>组件生命周期</li><li>组件所在页面的生命周期</li></ul></li><li><p>应用生命周期函数 App({ }) app.js ==Launch Show Hide==</p><ul><li><code>onLaunch(){}</code> 初始化完成 只初始化一次</li><li><code>onShow(option){ }</code> 启动或从后台进入前台显示</li><li><code>onHide(){}</code> 前台进入后台时</li></ul><p>页面生命周期函数 Page({ }} page.js ==Load Show Ready Hide Unload==</p><ul><li><code>onLoad(){ }</code> 页面加载 一个页面只调用一次</li><li><code>onShow(){ }</code> 显示</li><li><code>onReady(){ }</code> 页面初次渲染完成 一个页面只调用一次</li><li><code>onHide(){ }</code> 隐藏</li><li><code>onUnload(){ }</code> 卸载 一个页面只调用一次</li></ul></li></ul><p>网络请求 (小程序不存在跨域)</p><ul><li><code>wx.request({ })</code><ul><li><code>getInfo: wx.request({ url,method,data:{},success:(res)=&gt;{ } }) onLoad this.getInfo</code> 发起GET数据请求</li></ul></li><li><code>miniprogram-api-promise包</code><ul><li>官方异步API基于回调函数实现的 回调地狱 可读性 维护性差</li></ul></li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// wx.request({ })</span><br><span class="hljs-attr">data</span>:{<br>  <span class="hljs-attr">swiperList</span>:[]<br>}<br><br><span class="hljs-attr">onLoad</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">option</span>){<br>	<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getInfo</span>()<br>}<br><br><span class="hljs-title function_">getInfo</span>(<span class="hljs-params"></span>){<br>  	wx.<span class="hljs-title function_">request</span>({<br>      <span class="hljs-attr">url</span>:<span class="hljs-string">"https://www.xxx.com/api/get"</span>, <span class="hljs-comment">// https协议</span><br>      <span class="hljs-attr">method</span>:<span class="hljs-string">"GET"</span>, <span class="hljs-comment">// method:"POST"</span><br>      <span class="hljs-attr">data</span>:{ <span class="hljs-attr">name</span>:<span class="hljs-string">"zs"</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">19</span> },<br>      <span class="hljs-attr">success</span>:<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span>{  <span class="hljs-comment">// 请求成功后的回调</span><br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res) <span class="hljs-comment">// res.data</span><br>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>({<br>          <span class="hljs-attr">swiperlist</span>:res.<span class="hljs-property">data</span> <span class="hljs-comment">// res.data {} {} {}</span><br>        })<br>      }<br>       <span class="hljs-attr">fail</span>:<span class="hljs-function">()=&gt;</span>{},<br> 			 <span class="hljs-attr">complete</span>:<span class="hljs-function">()=&gt;</span>{}<br>    })<br>}<br><br>&lt;view <span class="hljs-attr">wx</span>:<span class="hljs-keyword">for</span>=<span class="hljs-string">"{{ swiprlist }}"</span> <span class="hljs-attr">wx</span>:key=<span class="hljs-string">"id"</span> &gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">text</span>&gt;</span>{{ item.name }}<span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span></span><br>	<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">image</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"{{ item.url }}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">image</span>&gt;</span></span><br> &lt;/view&gt;<br><br><span class="hljs-comment">// miniprogram-api-promise</span><br></code></pre></td></tr></tbody></table></figure><h1 id="微信小程序云开发"><a href="#微信小程序云开发" class="headerlink" title="微信小程序云开发"></a>微信小程序云开发</h1><p>小程序云开发 tcb</p><p>云开发：云数据库、云函数、云存储（文件）、云调用</p><p>测试appid用不了</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js">project.<span class="hljs-property">config</span>.<span class="hljs-property">json</span><br><span class="hljs-string">"cloudfunctionRoot"</span>: <span class="hljs-string">"cloudfunctions/"</span>, <span class="hljs-comment">// cloudfunctions 名称</span><br></code></pre></td></tr></tbody></table></figure><p>云数据库</p><ul><li><p>数据库增删改查</p></li><li><p>数据库</p><ul><li>集合 添加记录</li><li>权限设置</li></ul></li><li><p><code>input e.detail.value</code></p></li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 数据库初始化 app.json</span><br><span class="hljs-attr">onLaunch</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<br>  wx.<span class="hljs-property">cloud</span>.<span class="hljs-title function_">init</span>({<br>  <span class="hljs-attr">env</span>:<span class="hljs-string">""</span> <span class="hljs-comment">// 云开发环境ID</span><br>})<br>}<br><br><br><span class="hljs-title function_">addName</span>(<span class="hljs-params">event</span>){<br>  name = event.<span class="hljs-property">detail</span>.<span class="hljs-property">value</span><br>}<br><br><span class="hljs-comment">// clound.database() 数据库引入  conllection  手动新建collection</span><br><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">DB</span> = wx.<span class="hljs-property">cloud</span>.<span class="hljs-title function_">database</span>().<span class="hljs-title function_">conllection</span>(<span class="hljs-string">'list'</span>)<br><br><span class="hljs-title function_">addData</span>(<span class="hljs-params"></span>){<br>  	<span class="hljs-comment">// 数据库添加数据</span><br>  	<span class="hljs-variable constant_">DB</span>.<span class="hljs-title function_">add</span>({<br>      <span class="hljs-attr">data</span>:{<br>        <span class="hljs-attr">name</span>:<span class="hljs-string">"zs"</span>,<br>        <span class="hljs-attr">age</span>:<span class="hljs-number">100</span><br>      },<br>      <span class="hljs-title function_">success</span>(<span class="hljs-params">res</span>){},<br>      <span class="hljs-title function_">fail</span>(<span class="hljs-params">error</span>){}<br>    })<br>}<br><br><span class="hljs-title function_">getData</span>(<span class="hljs-params"></span>){<br>  <span class="hljs-variable constant_">DB</span>.<span class="hljs-title function_">get</span>({<br>   <span class="hljs-title function_">success</span>(<span class="hljs-params">res</span>){}<br>  })<br>}<br> <span class="hljs-title function_">success</span>(<span class="hljs-params">res</span>){<br>        that.<span class="hljs-title function_">setData</span>({<br>          <span class="hljs-attr">arr</span>:res.<span class="hljs-property">data</span><br>        })<br>      }<br><br><br><span class="hljs-comment">//删除 要id</span><br><span class="hljs-variable constant_">DB</span>.<span class="hljs-title function_">doc</span>(id).<span class="hljs-title function_">remove</span>({<br>  <span class="hljs-title function_">success</span>(<span class="hljs-params">res</span>){},<br>  <span class="hljs-title function_">fail</span>(<span class="hljs-params">error</span>){}<br>})<br><br><span class="hljs-variable constant_">DB</span>.<span class="hljs-title function_">doc</span>(id).<span class="hljs-title function_">update</span>({<br>  <span class="hljs-attr">data</span>:{<br>     <span class="hljs-attr">age</span>:age<br>  }<br>})<br></code></pre></td></tr></tbody></table></figure><p>云函数</p><ul><li>新建云函数 json package.js index.js<ul><li>创建云函数 上传并部署云函数</li></ul></li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">exports</span>.<span class="hljs-property">main</span> = <span class="hljs-keyword">async</span> (event, context) =&gt; {<br>    <span class="hljs-keyword">let</span> a = event.<span class="hljs-property">a</span><br>    <span class="hljs-keyword">let</span> b = event.<span class="hljs-property">b</span><br>    <span class="hljs-keyword">return</span> a + b<br>}<br><br><span class="hljs-title class_">Page</span>({<br>  <span class="hljs-title function_">getSum</span>(<span class="hljs-params"></span>){<br>    wx.<span class="hljs-property">clound</span>.<span class="hljs-title function_">callFunction</span>({<br>    	<span class="hljs-attr">name</span>:<span class="hljs-string">"hello"</span>, <span class="hljs-comment">// 云函数目录</span><br>      <span class="hljs-attr">data</span>:{<br>      	<span class="hljs-attr">a</span>:<span class="hljs-number">100</span>,<br>        <span class="hljs-attr">b</span>:<span class="hljs-number">200</span><br>    	},<br>      <span class="hljs-title function_">success</span>(<span class="hljs-params">res</span>){<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res)<br>      },<br>      <span class="hljs-title function_">fail</span>(<span class="hljs-params">res</span>){<br>      }<br>    })<br>  }<br>})<br><br><span class="hljs-comment">// openid 登陆 微信身份证号</span><br>wx.<span class="hljs-property">clound</span>.<span class="hljs-title function_">callFunction</span>({<br>  <span class="hljs-attr">name</span>:<span class="hljs-string">'getopenid'</span>,<br>  <span class="hljs-title function_">success</span>(<span class="hljs-params">res</span>){<br>    res.<span class="hljs-property">result</span>.<span class="hljs-property">openid</span><br>  },<span class="hljs-title function_">fail</span>(<span class="hljs-params">res</span>){<br>    <br>  }<br>})<br><br></code></pre></td></tr></tbody></table></figure><p>使用云函数获取数据库的数据</p><ul><li>云函数获取数据库数据可以突破20条限制</li><li>云函数不受数据库数据表的权限控制</li><li>云函数可以实现的功能更多</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 数据库获取数据</span><br>wx.<span class="hljs-property">cloud</span>.<span class="hljs-title function_">database</span>().<span class="hljs-title function_">collection</span>(<span class="hljs-string">"users"</span>).<span class="hljs-title function_">get</span>({<br>  <span class="hljs-title function_">success</span>(<span class="hljs-params"></span>){<br>    <br>  },<br>  <span class="hljs-title function_">fail</span>(<span class="hljs-params">res</span>){<br>    <br>  }<br>})<br><br><span class="hljs-comment">// 云函数获取数据 云函数中转 一个函数  每个目录一个函数</span><br><span class="hljs-keyword">export</span>.<span class="hljs-property">main</span> = <span class="hljs-keyword">async</span> (event,context) =&gt; {<br>  <span class="hljs-keyword">return</span> cloud.<span class="hljs-title function_">database</span>().<span class="hljs-title function_">collection</span>(<span class="hljs-string">"users"</span>).<span class="hljs-title function_">get</span>()<br>}<br></code></pre></td></tr></tbody></table></figure><p>云存储</p><ul><li>文件上传</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><code class="hljs js">wx.<span class="hljs-property">cloud</span>.<span class="hljs-title function_">uploadFile</span>({<br>	<span class="hljs-attr">cloundPath</span>:<span class="hljs-string">''</span> <span class="hljs-comment">// 上传到云端的路径</span><br>	<span class="hljs-attr">filePaht</span>:<span class="hljs-string">''</span>, <span class="hljs-comment">// 小程序临时文件路径	</span><br>  <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> { res.<span class="hljs-property">fileID</span> },<br>  <span class="hljs-attr">fail</span>:<span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>                                     <br>})<br><br><br>wx.<span class="hljs-title function_">chooseMedia</span>(<span class="hljs-title class_">Object</span> object)  拍摄或从手机相册中选择图片或视频。<br><br><br><span class="hljs-comment">// 云存储 下载地址 或 FileID</span><br>&lt;image src={{ imgsrc  }}&gt;&lt;/image&gt;<br><span class="hljs-comment">// 视频存储</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">vidsrc</span> }} <span class="hljs-attr">control</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span></span><br><br><span class="hljs-attr">data</span>:{<br>  <span class="hljs-attr">imgsrc</span>:<span class="hljs-string">''</span><br>}<br><br><br><span class="hljs-title function_">getData</span>(<span class="hljs-params"></span>){<br><span class="hljs-keyword">let</span> that = <span class="hljs-variable language_">this</span>  <span class="hljs-comment">// 放大作用域 这个this指整个page({})</span><br>wx.<span class="hljs-title function_">chooseMedia</span>({ <span class="hljs-comment">//异步方法 用this 指代括号内的作用域 </span><br>  <span class="hljs-attr">count</span>: <span class="hljs-number">9</span>,<br>  <span class="hljs-attr">mediaType</span>: [<span class="hljs-string">'image'</span>,<span class="hljs-string">'video'</span>],<br>  <span class="hljs-attr">sourceType</span>: [<span class="hljs-string">'album'</span>, <span class="hljs-string">'camera'</span>],<br>  <span class="hljs-attr">maxDuration</span>: <span class="hljs-number">30</span>,<br>  <span class="hljs-attr">camera</span>: <span class="hljs-string">'back'</span>,<br>  <span class="hljs-title function_">success</span>(<span class="hljs-params">res</span>) {<br>    <span class="hljs-comment">//console.log(res.tempFiles.tempFilePath)</span><br>    <span class="hljs-comment">//console.log(res.tempFiles.size)</span><br>    that.<span class="hljs-title function_">upload</span>(res.<span class="hljs-property">tempFiles</span>.<span class="hljs-property">tempFilePath</span>[<span class="hljs-number">0</span>])<br>  }<br>})<br><br><span class="hljs-comment">// </span><br><span class="hljs-title function_">upload</span>(<span class="hljs-params">fileurl</span>){<br>  wx.<span class="hljs-property">cloud</span>.<span class="hljs-title function_">uploadFile</span>({<br>    <span class="hljs-comment">// 时间戳 new Date().getTime() </span><br>	<span class="hljs-attr">cloundPath</span>:  <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-property">getTime</span> + <span class="hljs-string">'.png'</span> <span class="hljs-comment">// 上传到云端的路 +'.png'  // pdf.其他后缀</span><br>	<span class="hljs-attr">filePaht</span>:<span class="hljs-string">'fileurl'</span>, <span class="hljs-comment">// res.tempFilePath  '' 小程序临时文件路径 // 其他文件 res.temFiles[0].path</span><br>  <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>({<br>    	<span class="hljs-attr">imgUrl</span>:<span class="hljs-attr">res</span>:fileID<br> 	 })<br>  },  <span class="hljs-comment">// fileID 图片地址</span><br>  <span class="hljs-attr">fail</span>:<span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>                                     <br>})<br>}<br><br><span class="hljs-comment">// 上传其他文件</span><br>wx.<span class="hljs-title function_">chooseMessageFile</span>({<br>  <span class="hljs-attr">count</span>: <span class="hljs-number">10</span>,<br>  <span class="hljs-attr">type</span>: <span class="hljs-string">'all'</span>, <span class="hljs-comment">// all image</span><br>  success (res) {<br>    <span class="hljs-comment">// tempFilePath可以作为 img 标签的 src 属性显示图片</span><br>    <span class="hljs-keyword">const</span> tempFilePaths = res.<span class="hljs-property">tempFiles</span><br>  }<br>})<br><br><span class="hljs-comment">// 下载并打开excel</span><br>wx.<span class="hljs-property">cloud</span>.<span class="hljs-title function_">downloadFile</span>({<br>  <span class="hljs-comment">// 示例 url，并非真实存在</span><br>  <span class="hljs-attr">fileID</span>: <span class="hljs-string">'a7xzcb'</span><br>  <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) {<br>    <span class="hljs-keyword">const</span> filePath = res.<span class="hljs-property">tempFilePath</span><br>    wx.<span class="hljs-title function_">openDocument</span>({<br>      <span class="hljs-attr">filePath</span>: filePath,<br>      <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) {<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'打开文档成功'</span>)<br>      }<br>    })<br>  }<br>})<br></code></pre></td></tr></tbody></table></figure><p>7-2 微信小程序哔哩哔哩</p></div><div class="prev-or-next"><div class="post-foot-next"></div><div class="post-attach"><span class="post-pubtime"><i class="iconfont icon-updatetime mr-10" title="更新时间"></i> 2022-09-01 00:00:00 </span><span class="post-tags"><i class="iconfont icon-tags mr-10" title="标签"></i> <span class="span--tag mr-8"><a href="/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" title="微信小程序">#微信小程序</a></span></span></div><div class="post-foot-prev"><a href="/%E8%AF%AD%E6%B3%95%E7%AF%87/css3.html" target="_self"><span>下一页</span> <i class="iconfont icon-chevronright"></i></a></div></div></div><div id="btn-catalog" class="btn-catalog"><i class="iconfont icon-catalog"></i></div><div class="post-catalog hidden" id="catalog"><div class="title">目录</div><div class="catalog-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F"><span class="toc-text">微信小程序</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A5%E9%97%A8"><span class="toc-text">入门</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%9F%BA%E7%A1%80"><span class="toc-text">小程序基础</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2"><span class="toc-text">安装环境部署</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%BB%93%E6%9E%84%E7%9B%AE%E5%BD%95"><span class="toc-text">小程序结构目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95"><span class="toc-text">模板语法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A"><span class="toc-text">数据绑定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93"><span class="toc-text">列表渲染</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93"><span class="toc-text">条件渲染</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A"><span class="toc-text">事件绑定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B7%E5%BC%8FWXSS"><span class="toc-text">样式WXSS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9E%84WXML"><span class="toc-text">结构WXML</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#view"><span class="toc-text">view</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#text"><span class="toc-text">text</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#image"><span class="toc-text">image</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#swiper"><span class="toc-text">swiper</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#swiper-1"><span class="toc-text">swiper</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#swipter-item"><span class="toc-text">swipter-item</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#navigator"><span class="toc-text">navigator</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#rich-text"><span class="toc-text">rich-text</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#button"><span class="toc-text">button</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#icon"><span class="toc-text">icon</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#radio"><span class="toc-text">radio</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#checkbox"><span class="toc-text">checkbox</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%87%E6%BB%A4%E5%99%A8WXS"><span class="toc-text">过滤器WXS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6"><span class="toc-text">自定义组件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6"><span class="toc-text">创建自定义组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E5%BC%95%E5%85%A5%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6"><span class="toc-text">页面引入自定义组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E4%B8%AD%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6"><span class="toc-text">页面中使用自定义组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E6%AE%B5%E4%B8%8E%E2%BD%B0%E4%BE%8B%E2%BD%85%E6%B3%95"><span class="toc-text">定义段与⽰例⽅法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E9%97%B4%E9%80%9A%E4%BF%A1"><span class="toc-text">组件间通信</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6-%E2%BE%83%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%8F%82"><span class="toc-text">组件-⾃定义组件传参</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-text">生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F-5%E4%B8%AA"><span class="toc-text">应用生命周期 5个</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F-12%E4%B8%AA"><span class="toc-text">页面生命周期 12个</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1"><span class="toc-text">路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82"><span class="toc-text">网络请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MobX"><span class="toc-text">MobX</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E5%8C%85"><span class="toc-text">分包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E5%8A%9F%E8%83%BD"><span class="toc-text">常见功能</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%86%E6%9E%B6"><span class="toc-text">框架</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#UI%E5%BA%93"><span class="toc-text">UI库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B7%A5%E5%85%B7"><span class="toc-text">工具</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%BA%91%E5%BC%80%E5%8F%91"><span class="toc-text">微信小程序云开发</span></a></li></ol></div></div><script src="/js/catalog.js"></script><div class="comments-container"></div></div><div class="footer"><div class="social"><ul><li><a title="github" target="_blank" rel="noopener" href="https://github.com/heweiliang88"><i class="iconfont icon-github"></i></a></li><li><a title="email" href=""><i class="iconfont icon-envelope"></i></a></li><li><a title="facebook" href=""><i class="iconfont icon-facebooksquare"></i></a></li><li><a title="twitter" href=""><i class="iconfont icon-twitter"></i></a></li><li><a title="wechat" href=""><i class="iconfont icon-wechat"></i></a></li><li><a title="weibo" href=""><i class="iconfont icon-weibo"></i></a></li></ul></div><div class="footer-more"><a target="_blank" rel="noopener" href="https://github.com/zchengsite/hexo-theme-oranges">Copyright © 2022 cloud</a></div><div class="footer-more"><a target="_blank" rel="noopener" href="https://github.com/zchengsite/hexo-theme-oranges">Theme by Oranges | Powered by Hexo</a></div></div></div><div class="tools-bar"><div class="back-to-top tools-bar-item hidden"><a href="javascript: void(0)"><i class="iconfont icon-chevronup"></i></a></div><script src="/js/backtotop.js"></script><div class="search-icon tools-bar-item" id="search-icon"><a href="javascript: void(0)"><i class="iconfont icon-search"></i></a></div><div class="search-overlay hidden"><div class="search-content" tabindex="0"><div class="search-title"><span class="search-icon-input"><a href="javascript: void(0)"><i class="iconfont icon-search"></i> </a></span><input type="text" class="search-input" id="search-input" placeholder="搜索..."> <span class="search-close-icon" id="search-close-icon"><a href="javascript: void(0)"><i class="iconfont icon-close"></i></a></span></div><div class="search-result" id="search-result"></div></div></div><script type="text/javascript">var inputArea=document.querySelector("#search-input"),searchOverlayArea=document.querySelector(".search-overlay");function openOrHideSearchContent(){searchOverlayArea.classList.contains("hidden")?(searchOverlayArea.classList.remove("hidden"),document.body.classList.add("hidden")):(searchOverlayArea.classList.add("hidden"),document.body.classList.remove("hidden"))}function blurSearchContent(e){e.target===searchOverlayArea&&openOrHideSearchContent()}inputArea.onclick=function(){getSearchFile(),this.onclick=null},inputArea.onkeydown=function(){if(13==event.keyCode)return!1},document.querySelector("#search-icon").addEventListener("click",openOrHideSearchContent,!1),document.querySelector("#search-close-icon").addEventListener("click",openOrHideSearchContent,!1),searchOverlayArea.addEventListener("click",blurSearchContent,!1);var searchFunc=function(e,t,n){"use strict";var r=document.getElementById(t),a=document.getElementById(n);a.innerHTML="<ul><span class='local-search-empty'>首次搜索，正在载入索引文件，请稍后……<span></ul>",$.ajax({url:e,dataType:"xml",success:function(e){var t=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get();a.innerHTML="",r.addEventListener("input",function(){var u='<ul class="search-result-list">',h=this.value.trim().toLowerCase().split(/[\s\-]+/);if(a.innerHTML="",!(this.value.trim().length<=0)){if(t.forEach(function(e){var n,r,a=!0,t=(e.title&&""!==e.title.trim()||(e.title="Untitled"),e.title.trim()),c=t.toLowerCase(),s=e.content.trim().replace(/<[^>]+>/g,""),i=s.toLowerCase(),e=e.url,l=-1,o=-1;""!==i?h.forEach(function(e,t){n=c.indexOf(e),l=i.indexOf(e),n<0&&l<0?a=!1:(l<0&&(l=0),0==t&&(o=l))}):a=!1,a&&(u+="<li><a href='"+e+"' class='search-result-title'>"+t+"</a>",0<=o&&(e=o+80,(e=0==(t=(t=o-20)<0?0:t)?100:e)>s.length&&(e=s.length),r=s.substr(t,e),h.forEach(function(e){var t=new RegExp(e,"gi");r=r.replace(t,'<span class="search-keyword">'+e+"</span>")}),u+='<p class="search-result-abstract">'+r+"...</p>"),u+="</li>")}),-1===(u+="</ul>").indexOf("<li>"))return a.innerHTML="<ul><span class='local-search-empty'>没有找到内容，请尝试更换检索词。<span></ul>";a.innerHTML=u}})},error:function(e,t,n){a.innerHTML="",404===e.status?a.innerHTML="<ul><span class='local-search-empty'>未找到search.xml文件，具体请参考：<a href='https://github.com/zchengsite/hexo-theme-oranges#configuration' target='_black'>configuration</a><span></ul>":a.innerHTML="<ul><span class='local-search-empty'>请求失败，尝试重新刷新页面或稍后重试。<span></ul>"}}),$(document).on("click","#search-close-icon",function(){$("#search-input").val(""),$("#search-result").html("")})},getSearchFile=function(){searchFunc("/search.xml","search-input","search-result")}</script><div class="tools-bar-item theme-icon" id="switch-color-scheme"><a href="javascript: void(0)"><i id="theme-icon" class="iconfont icon-moon"></i></a></div><script src="/js/colorscheme.js"></script><div class="share-icon tools-bar-item"><a href="javascript: void(0)" id="share-icon"><i class="iconfont iconshare"></i></a><div class="share-content hidden"><a class="share-item" href="https://twitter.com/intent/tweet?text=' + (syntax)%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F + '&url=' + http%3A%2F%2Fexample.com%2F%25E8%25AF%25AD%25E6%25B3%2595%25E7%25AF%2587%2F%25E5%25BE%25AE%25E4%25BF%25A1%25E5%25B0%258F%25E7%25A8%258B%25E5%25BA%258F.html + '" target="_blank" title="Twitter"><i class="iconfont icon-twitter"></i> </a><a class="share-item" href="https://www.facebook.com/sharer.php?u=http://example.com/%E8%AF%AD%E6%B3%95%E7%AF%87/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F.html" target="_blank" title="Facebook"><i class="iconfont icon-facebooksquare"></i></a></div></div><script src="/js/shares.js"></script></div></div></body></html>