<!DOCTYPE html><html lang="zh-CN" color-mode="light"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="keywords" content="前端、免流、技术、运维、手机"><meta name="author" content="记住"><meta name="description" content="我希望有个如你一般的人。 如这山间清晨一般明亮清爽的人， 如奔赴古城道路上阳光一般的人， 温暖而不炙热，覆盖我所有肌肤。 由起点到夜晚，由山野到书房， 一切问题的答案都很简单。 我希望有个如你一般的人，贯彻未来，数遍生命的公路牌。"><title>(syntax)vue-router | 从你的全世界路过</title><link rel="apple-touch-icon" href="/images/avatar.png"><link rel="icon" href="/images/avatar.png"><link href="https://fonts.googleapis.com/css?family=Raleway&display=swap" rel="stylesheet"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1886449_67xjft27j1l.css"><link rel="stylesheet" href="/css/figcaption/mac-block.css"><script defer type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><link href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" rel="stylesheet"><script defer type="text/javascript" src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script src="/js/fancybox.js"></script><script>var html=document.documentElement;const colorMode=localStorage.getItem("color-mode");colorMode&&document.documentElement.setAttribute("color-mode",colorMode)</script><meta name="generator" content="Hexo 6.3.0"><style>.github-emoji{position:relative;display:inline-block;width:1.2em;min-height:1.2em;overflow:hidden;vertical-align:top;color:transparent}.github-emoji>span{position:relative;z-index:10}.github-emoji .fancybox,.github-emoji img{margin:0!important;padding:0!important;border:none!important;outline:0!important;text-decoration:none!important;user-select:none!important;cursor:auto!important}.github-emoji img{height:1.2em!important;width:1.2em!important;position:absolute!important;left:50%!important;top:50%!important;transform:translate(-50%,-50%)!important;user-select:none!important;cursor:auto!important}.github-emoji-fallback{color:inherit}.github-emoji-fallback img{opacity:0!important}</style><link rel="alternate" href="/atom.xml" title="从你的全世界路过" type="application/atom+xml"></head><body><div id="app"><div class="header"><div class="avatar"><a href="/"><img src="/images/avatar.png" alt=""></a><div class="nickname"><a href="/">cloud</a></div></div><h1 style="text-align:center;margin-bottom:40px" id="jinrishici-sentence">正在加载今日诗词....</h1><script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script><div class="navbar"><ul><li class="nav-item" data-path="/"><a href="/">Home</a></li><li class="nav-item" data-path="/archives/"><a href="/archives/">Archives</a></li><li class="nav-item" data-path="/tags/"><a href="/tags/">Tags</a></li><li class="nav-item" data-path="/friends/"><a href="/friends/">Friends</a></li><li class="nav-item" data-path="/about/"><a href="/about/">About</a></li></ul></div></div><script src="/js/activeNav.js"></script><div class="flex-container"><script async type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]]}}</script><script async type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.10/dist/clipboard.min.js"></script><script src="/js/codeCopy.js"></script><div class="container post-details" id="post-details"><div class="post-content"><div class="post-title">(syntax)vue-router</div><div class="post-attach"><span class="post-pubtime"><i class="iconfont icon-updatetime mr-10" title="更新时间"></i> 2022-09-01 00:00:00 </span><span class="post-tags"><i class="iconfont icon-tags mr-10" title="标签"></i> <span class="span--tag mr-8"><a href="/tags/vue-router/" title="vue-router">#vue-router</a></span></span></div><div class="markdown-body"><h2 id="vue-router"><a href="#vue-router" class="headerlink" title="vue-router"></a>vue-router</h2><blockquote><ul><li>动态路由匹配 <code>/:id/:name</code> 路由参数、查询、通配符</li><li>嵌套路由 <code>children:[]</code></li><li>编程式的导航 <code>router.replace/push/replace/go</code></li><li>命名路由<code>router-link name</code></li><li>命名视图 <code>router-view name</code></li><li>重定向和别名<code>redirect alias</code></li><li>路由组件传参 <code>{ name:"",params:{} }</code></li><li>导航守卫 <code>3全局</code>beforeEach/Resolve/afterEach<code>+ 1路由</code>beforeEnter<code>+ 3组件</code>beforeRouter + Enter、Update、Leave<code></code></li><li>路由元信息 meta</li><li>不同的历史模式</li></ul></blockquote><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install vue-router@4<br>yarn add vue-router@4<br></code></pre></td></tr></tbody></table></figure><ul><li>vue官方的路由管理器 组件树/路由树</li><li>所有的路由抽离出来方便管理（集中管理） 路由传递参数 、动态传递参数</li></ul><p>后端路由 vs 前端路由</p><ul><li>前端路由: 对于单页面应用程序来说，主要通过 URL 中的 hash(#号)来实现不同页面之间的切换，同时，hash 有一个特点：HTTP 请求中不会包含 hash 相关的内容；所以，单页面程序中的页面跳转主要用 hash 实现。（前端当前页面的跳转）</li><li>后端路由: URL 对应服务器上的资源</li></ul><p>命名路由和视图</p><ul><li>router-link to replace append tag active-class <code>相当于 a链接 to 相当于 href 命名路由</code></li><li>router-view name 显示匹配的组件 占位符 <code>视图占位符</code></li><li>v-slot 作用域插槽暴露第底层的定制能力，主要面向库作者、但也可以为开发者提供便利</li></ul><p>编程式的导航(操作浏览器的历史记录和跳转记录)</p><ul><li>router-link router.push router.replace router.go(n)<ul><li>当你点击 <code>&lt;router-link&gt;</code> 时，这个方法会在内部调用router.push(…)，所以说，点击 <code>&lt;router-link :to="..."&gt;</code> 等同于调用 <code>router.push(...)</code></li><li>router.replace（没有记录 回不去） 跟 <code>router.push</code> 很像，唯一的不同就是，它不会向 history 添加新记录，而是跟它的方法名一样 —— 替换掉当前的 history 记录</li><li>router.go(n)参数是一个整数，意思是在 history 记录中向前或者后退多少步，类似 <code>window.history.go(n)</code></li></ul></li></ul><table><thead><tr><th>声明式 html</th><th>编程式 js</th></tr></thead><tbody><tr><td><code>&lt;router-link :to="..."&gt;</code></td><td><code>router.push(...)</code></td></tr><tr><td><code>&lt;router-link :to="..." replace&gt;</code></td><td>·<code>router.replace(...)</code></td></tr></tbody></table><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 字符串</span><br>$router.<span class="hljs-title function_">push</span>(<span class="hljs-string">'home'</span>)<br><span class="hljs-comment">// 对象</span><br>router.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">path</span>: <span class="hljs-string">'home'</span> })<br><span class="hljs-comment">// 命名的路由</span><br>router.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">params</span>: { <span class="hljs-attr">userId</span>: <span class="hljs-string">'123'</span> }})<br><span class="hljs-comment">// 带查询参数，变成 /register?plan=private</span><br>router.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">path</span>: <span class="hljs-string">'register'</span>, <span class="hljs-attr">query</span>: { <span class="hljs-attr">plan</span>: <span class="hljs-string">'private'</span> }})<br><span class="hljs-keyword">const</span> userId = <span class="hljs-string">'123'</span><br>router.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">params</span>: { userId }}) <span class="hljs-comment">// -&gt; /user/123</span><br>router.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">path</span>: <span class="hljs-string">`/user/<span class="hljs-subst">${userId}</span>`</span> }) <span class="hljs-comment">// -&gt; /user/123</span><br><span class="hljs-comment">// 这里的 params 不生效</span><br>router.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">path</span>: <span class="hljs-string">'/user'</span>, <span class="hljs-attr">params</span>: { userId }}) <span class="hljs-comment">// -&gt; /user</span><br><br>router.<span class="hljs-title function_">go</span>(<span class="hljs-number">1</span>) <span class="hljs-comment">// -1 3 10</span><br></code></pre></td></tr></tbody></table></figure><p>router 构建选项 实例属性 实例方法</p><ul><li>path 跳转的路径</li><li>name 命名路由 指定该路径名称</li><li>redirect 重定向</li><li>component 组件</li><li>children 路由嵌套</li><li>alias 别名<code>path:'/a'(实际访问),componet: A,alias:'/b'（url展示出来假的)</code></li><li>mode hash模式</li><li>meta 路由元信息</li></ul><p>route</p><ul><li><code>$route对象</code>，一个路由匹配到的所有路由记录会暴露为 <code>this.$route</code> 对象 路由对象</li><li>this.$router router 实例 (全局)</li><li>this.$route 当前激活的路由信息对象 (局部)<ul><li>传递参数 $route.query ? query</li><li>this.$route.params 使用params 方式传递路径 来获取路由中的参数</li><li>$route.hash</li></ul></li></ul><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>router-link</td><td>是一个a链接 <code>to</code>(router.push() 目标路由的链接 )、<code>replace</code>、<code>append</code>、<code>tag</code>、<code>active-class</code>、</td></tr><tr><td>router-view</td><td><code>name</code> 设置了名称，则会渲染对应的路由配置中</td></tr><tr><td>v-slot</td><td>作用域插槽暴露第底层的定制能力，主要面向库作者、但也可以为开发者提供便利</td></tr><tr><td>Router构建选项</td><td>routes、mode、base、linkActiveClass 、linkExactActiveClass 、scrollBehavior 、parseQuery 、stringifyQuery、fallback</td></tr><tr><td>Router实例属性</td><td>app、mode、currentRoute、START_LOCATION</td></tr><tr><td>Router实例方法()</td><td>berforeEach、beforeResolve、afterEach、push、replace、go、back、forward、getMatchedComponent、resolve、addRoutes、addRoute、addRoutes、onReady、onError</td></tr><tr><td>路由对象</td><td><code>$route.path</code> 、``$route.params<code>、</code>$route.query <code>、</code>$route.hash<code>、</code>$route.fullPath`、**$route.matched<strong>、</strong>$route.name<strong>、</strong>$route.redirectedFrom**</td></tr><tr><td>组件注入</td><td>注入的属性 <code>this.$router</code> router 实例<br>、<code>this.$route</code> 当前激活的路由信息对象、属性只读、属性不可变、可以watch它<br>增加的组件配置选项</td></tr></tbody></table><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs js">npm i vue-router<br>vue add vue-router<br><span class="hljs-comment">// 导入 Vue.use()注册</span><br><span class="hljs-comment">// router/index.js 文件夹</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">VueRouter</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">HomeView</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/HomeView.vue'</span><br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">VueRouter</span>)<br><br><span class="hljs-keyword">const</span> routes = [ <span class="hljs-comment">// routes 数组</span><br>  {<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>, <span class="hljs-comment">//</span><br>    <span class="hljs-attr">redirect</span>:<span class="hljs-string">'/home'</span> <span class="hljs-comment">// 重定向</span><br>    <span class="hljs-attr">alias</span>:<span class="hljs-string">"/home"</span>;<span class="hljs-comment">//别名，即访问“/”和“/home”跳转到同一个页面 展示出来的 假的</span><br>    <span class="hljs-attr">mode</span>:<span class="hljs-string">'history'</span>;<span class="hljs-comment">//默认为hash模式，在url上会加个#，比较难看，一般采用‘history’</span><br>    <span class="hljs-attr">meta</span>: { <span class="hljs-attr">requiresAuth</span>: <span class="hljs-literal">true</span> } <span class="hljs-comment">//路由元信息</span><br>  },<br>  {<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">'/homeview'</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">'homeview'</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-title class_">HomeView</span>,<br>    <span class="hljs-attr">children</span>:[<br>      {  <span class="hljs-attr">path</span>:<span class="hljs-string">"homeviewson1"</span>,<span class="hljs-attr">component</span>:<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">import</span>(<span class="hljs-string">'./views/homeviewson1.vue'</span>)<span class="hljs-comment">//懒加载的方式 },</span><br>      {  <span class="hljs-attr">path</span>:<span class="hljs-string">"homeviewson2"</span>,<span class="hljs-attr">component</span>:homeviewson2 }<br>    ]<br>  },<br>  {<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">'/about'</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">'about'</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {<br>      <span class="hljs-keyword">return</span> <span class="hljs-title function_">import</span>(<span class="hljs-comment">/* webpackChunkName: "about" */</span> <span class="hljs-string">'../views/AboutView.vue'</span>)<br>    }<br>  }<br>]<br><br><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VueRouter</span>({<br>  <span class="hljs-attr">mode</span>: <span class="hljs-string">'history'</span>,<br>  <span class="hljs-attr">base</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">BASE_URL</span>,<br>  routes,<br>  linkActiveClass  :<span class="hljs-string">'myactive'</span> <span class="hljs-comment">// 路由高亮  myactive类名</span><br>})<br><br><span class="hljs-comment">// .router-link-active{ }</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router<br><br><span class="hljs-comment">// vue3 routes = [] 中间不变</span><br><span class="hljs-keyword">import</span> { createRouter, createWebHashHistory } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">HomeView</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/HomeView.vue'</span><br><br><span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>({<br>  <span class="hljs-attr">history</span>: <span class="hljs-title function_">createWebHashHistory</span>(),<br>  routes<br>})<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router<br></code></pre></td></tr></tbody></table></figure><ul><li><code>created() { this.$route.query this.$route.params 获取路由参数</code></li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// vue</span><br><span class="hljs-comment">// main.js  导入 使用</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span><br><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">'./router'</span>   <span class="hljs-comment">//  导入</span><br><span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">'./store'</span>     <span class="hljs-comment">//</span><br><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>({<br>  router, <span class="hljs-comment">// 使用</span><br>  store,<br>  <span class="hljs-attr">render</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">h</span>) { <span class="hljs-keyword">return</span> <span class="hljs-title function_">h</span>(<span class="hljs-title class_">App</span>) } <span class="hljs-comment">// render:h =&gt; h(APP)</span><br>}).$mount(<span class="hljs-string">'#app'</span>)<br><br><span class="hljs-comment">// vue3</span><br><span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span><br><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">'./router'</span><br><span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">'./store'</span><br><span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>).<span class="hljs-title function_">use</span>(store).<span class="hljs-title function_">use</span>(router).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)<br><br><span class="hljs-comment">// App.vue</span><br>&lt;router-link to=<span class="hljs-string">"/"</span>&gt;<span class="hljs-title class_">Home</span>&lt;<span class="hljs-regexp">/router-link&gt;  /</span><span class="hljs-regexp">/ 默认渲染a标签 自定义标签</span><br><span class="hljs-regexp">&lt;router-link to="/</span>login?id=<span class="hljs-number">1000</span>&amp;name=zs<span class="hljs-string">"&gt;Home&lt;/router-link&gt; // 传递参数</span><br><span class="hljs-string">// 绑定动态传递参数</span><br><span class="hljs-string">&lt;router-link :to="</span>home<span class="hljs-string">"&gt;Home&lt;/router-link&gt;</span><br><span class="hljs-string">&lt;router-link :to="</span>{ <span class="hljs-attr">path</span>:<span class="hljs-string">'home'</span> }<span class="hljs-string">"&gt;Home&lt;/router-link&gt;</span><br><span class="hljs-string">&lt;router-link :to="</span>{ <span class="hljs-attr">name</span>:<span class="hljs-string">'user'</span>,<span class="hljs-attr">params</span>:{ <span class="hljs-attr">userId</span>:<span class="hljs-number">123</span> } }<span class="hljs-string">"&gt;&lt;/router-link&gt;</span><br><span class="hljs-string">&lt;router-link :to="</span>{ <span class="hljs-attr">path</span>: <span class="hljs-string">'register'</span>, <span class="hljs-attr">query</span>: { <span class="hljs-attr">plan</span>: <span class="hljs-string">'private'</span> }}<span class="hljs-string">"&gt;&lt;/router-link&gt;</span><br><span class="hljs-string"></span><br><span class="hljs-string">&lt;router-view/&gt; // 占位符</span><br></code></pre></td></tr></tbody></table></figure><p>监听路由变化 watch</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">watch</span>:{<br>  	<span class="hljs-string">'$route'</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">newVal, oldVal</span>) {<br>      	<span class="hljs-comment">// newVal.path</span><br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><p>命名路由 vs 命名视图</p><ul><li>重命名路由的名称 添加 name 属性</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;router-link :to=<span class="hljs-string">"?userId=123"</span>&gt;<span class="hljs-title class_">User</span>&lt;/router-link&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">"{ name:'user',params:{ userId:123 }}"</span>&gt;</span>User<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/user/123"</span>&gt;</span>/user/123<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">"{ name:'user',params:{ userId:123 }}"</span>&gt;</span>User<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span></span><br><br><span class="hljs-keyword">const</span> routes = [<br>   {<br>     <span class="hljs-attr">path</span>:<span class="hljs-string">'/user/:userId'</span><br>     <span class="hljs-attr">name</span>:<span class="hljs-string">'user'</span>, <span class="hljs-comment">// 命名路由 方便动态绑定传递参数</span><br>     <span class="hljs-attr">componet</span>:<span class="hljs-title class_">User</span><br>    }<br>]<br><br>router.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">params</span>: { <span class="hljs-attr">userId</span>: <span class="hljs-number">123</span> }})<br></code></pre></td></tr></tbody></table></figure><ul><li>命名视图 同一路由router-view name绑定多个组件 router-view name</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;router-view /&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">router-view</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"a"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">router-view</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"b"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span></span><br><br><span class="hljs-keyword">const</span> <span class="hljs-attr">routes</span>:[<br>	{<br>		<span class="hljs-attr">path</span>:<span class="hljs-string">'/'</span>,<span class="hljs-attr">components</span>:{<br>				<span class="hljs-attr">default</span>:header<br>				<span class="hljs-attr">a</span>:sidebar, <span class="hljs-comment">// name名:组件名</span><br>        <span class="hljs-attr">b</span>:mainbox<br>		}<br>	}<br>]<br></code></pre></td></tr></tbody></table></figure><p>动态路由匹配 某种模式（ : ）匹配到的<code>所有路由</code>，全部<code>映射到同个组件</code></p><ul><li>动态路径参数<code>:</code>: 同一个组件，不同的路由参数 通过 动态路径参数 渲染出不同的 多个不同组件</li><li>同一路由可以匹配多个路由，匹配的优先级就按照路由的定义顺序：谁先定义，谁的优先级就最高（先定义优先级高）</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">routes</span>: [<br>     { <span class="hljs-attr">path</span>: <span class="hljs-string">'/user/:length/:id'</span>, <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">import</span>(<span class="hljs-string">'../components/User.vue'</span>) }<br>  <span class="hljs-comment">// 当匹配 /user/:length/:id 这个模式时   导入渲染组件</span><br>]<br><br>$route.<span class="hljs-property">params</span>.<span class="hljs-property">length</span>  $route.<span class="hljs-property">params</span>.<span class="hljs-property">id</span><br><br>&lt;router-link to=<span class="hljs-string">"/user/short/xxx"</span>&gt;用户一&lt;/router-link&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/user/middle/xxxqiang"</span>&gt;</span>用户二<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/user/long/huaweiqiang"</span>&gt;</span>用户三<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span></span><br></code></pre></td></tr></tbody></table></figure><p>路由元信息 meta 字段</p><ul><li>添加路由元信息 meta 字段</li><li>定义路由的时候可以配置 <code>meta</code> 字段：</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">routes</span>: [<br>    { path： <span class="hljs-string">'/bar'</span>,<span class="hljs-attr">component</span>: <span class="hljs-title class_">Bar</span>,<span class="hljs-attr">metat</span>:{<span class="hljs-attr">requiresAuth</span>:<span class="hljs-literal">true</span>} }<br>    ]<br></code></pre></td></tr></tbody></table></figure><p>路由懒加载</p><ul><li>当打包构建项目时，JavaScript包会变得非常大，影响页面加载。如果我们能把不同路径对应的组件分割成不同的代码块，然后当路由被访问被访问的时候才加载对应的组件，这样就更加高效了<br>实现方式（实现路由组件的懒加载）</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 定义一个能够被 Webpack 自动代码分割的异步组件</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">Foo</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-title function_">import</span>(<span class="hljs-string">'./Foo.vue'</span>)<br><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VueRouter</span>({<br>  <span class="hljs-attr">routes</span>: [<br>    { <span class="hljs-attr">path</span>: <span class="hljs-string">'/foo'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">Foo</span> },<br>    { <span class="hljs-attr">path</span>: <span class="hljs-string">'/foo'</span>, <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">import</span>(<span class="hljs-string">'./Foo.vue'</span>) }<br>  ]<br>})<br>把组件按组分块<br>把某个路由下的所有组件都打包在同个异步块 (chunk) 中。只需要使用命名 chunk<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">Foo</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-title function_">import</span>(<span class="hljs-comment">/* webpackChunkName: "group-foo" */</span> <span class="hljs-string">'./Foo.vue'</span>)<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">Bar</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-title function_">import</span>(<span class="hljs-comment">/* webpackChunkName: "group-foo" */</span> <span class="hljs-string">'./Bar.vue'</span>)<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">Baz</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-title function_">import</span>(<span class="hljs-comment">/* webpackChunkName: "group-foo" */</span> <span class="hljs-string">'./Baz.vue'</span>)<br></code></pre></td></tr></tbody></table></figure><p>导航守卫 3全局 <code>beforeEach/Resolve/afterEach</code> + 1路由 <code>beforeEnter</code>+ 3组件 <code>beforeRouter + Enter、Update、Leave</code></p><ul><li>“导航”表示路由正在发生变化</li></ul><p><code>vue-router</code> 提供的导航守卫主要用来通过跳转或取消的方式守卫导航</p><ul><li>全局<ul><li>前置守卫 <code>router.beforeEach</code><ul><li><strong><code>to: Route</code></strong>: 即将要进入的目标 <a target="_blank" rel="noopener" href="https://router.vuejs.org/zh/api/#%E8%B7%AF%E7%94%B1%E5%AF%B9%E8%B1%A1">路由对象</a></li><li><strong><code>from: Route</code></strong>: 当前导航正要离开的路由</li><li><strong><code>next: Function</code></strong>: 一定要调用该方法来 <strong>resolve</strong> 这个钩子。执行效果依赖 <code>next</code> 方法的调用参数。<ul><li>next()</li><li>next(false)</li><li><code>next('/')</code></li><li>next(error)</li></ul></li></ul></li><li>解析守卫 <code>router.beforeResolve</code></li><li>后置守卫 <code>router.afterEach</code></li></ul></li><li>路由守卫 <code>routes路由规则 beforeEnter</code></li><li>组件守卫 <code>Enter、Update、Leave</code> 路由组件内直接定义以下路由导航守卫<ul><li><code>beforeRouterEnter</code></li><li><code>beforeRouterUpdate</code></li><li><code>beforeRouterLeave</code></li></ul></li></ul><p>完整的导航解析流程</p><ol><li>导航被触发。</li><li>在失活的组件里调用 <code>beforeRouteLeave</code> 守卫。</li><li>调用全局的 <code>beforeEach</code> 守卫。</li><li>在重用的组件里调用 <code>beforeRouteUpdate</code> 守卫 (2.2+)。</li><li>在路由配置里调用 <code>beforeEnter</code>。</li><li>解析异步路由组件。</li><li>在被激活的组件里调用 <code>beforeRouteEnter</code>。</li><li>调用全局的 <code>beforeResolve</code> 守卫 (2.5+)。</li><li>导航被确认。</li><li>调用全局的 <code>afterEach</code> 钩子。</li><li>触发 DOM 更新。</li><li>调用 <code>beforeRouteEnter</code> 守卫中传给 <code>next</code> 的回调函数，创建好的组件实例会作为回调函数的参数传入。</li></ol><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//全局前置守卫 router.beforeEach</span><br>router.<span class="hljs-title function_">beforeEach</span>((to,<span class="hljs-keyword">from</span>,next)) =&gt;{<br>}<br><br>router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to,<span class="hljs-keyword">from</span>,next</span>) =&gt;</span> {<br>    <span class="hljs-keyword">if</span>(to.<span class="hljs-property">name</span> !== ‘<span class="hljs-title class_">Login</span>’ &amp;&amp; !isAuthenticated) <span class="hljs-title function_">next</span>({ <span class="hljs-attr">name</span>:<span class="hljs-string">'Login'</span> })<br>    <span class="hljs-keyword">else</span> <span class="hljs-title function_">next</span>()<br>})<br><span class="hljs-comment">//全局解析守卫 router.beforeResolve</span><br><br><span class="hljs-comment">//全局后置钩子 router.afterEach</span><br><br><span class="hljs-comment">// 路由独享的守卫 beforeEnter</span><br><span class="hljs-attr">routes</span>:[<br>  {<br>    <span class="hljs-attr">path</span>:<span class="hljs-string">'/foo'</span>,<br>    <span class="hljs-attr">component</span>:<span class="hljs-title class_">Foo</span>,<br>    <span class="hljs-attr">beforeEnter</span>:<span class="hljs-function">(<span class="hljs-params">to,<span class="hljs-keyword">from</span>,next</span>) =&gt;</span>{<br>      <span class="hljs-comment">// 这些守卫与全局前置守卫的方法参数是一样的</span><br>    }<br>  }<br>]<br></code></pre></td></tr></tbody></table></figure><ul><li></li></ul></div><div class="prev-or-next"><div class="post-foot-next"><a href="/%E8%AF%AD%E6%B3%95%E7%AF%87/webpack.html" target="_self"><i class="iconfont icon-chevronleft"></i> <span>上一页</span></a></div><div class="post-attach"><span class="post-pubtime"><i class="iconfont icon-updatetime mr-10" title="更新时间"></i> 2022-09-01 00:00:00 </span><span class="post-tags"><i class="iconfont icon-tags mr-10" title="标签"></i> <span class="span--tag mr-8"><a href="/tags/vue-router/" title="vue-router">#vue-router</a></span></span></div><div class="post-foot-prev"><a href="/%E8%AF%AD%E6%B3%95%E7%AF%87/typescript.html" target="_self"><span>下一页</span> <i class="iconfont icon-chevronright"></i></a></div></div></div><div id="btn-catalog" class="btn-catalog"><i class="iconfont icon-catalog"></i></div><div class="post-catalog hidden" id="catalog"><div class="title">目录</div><div class="catalog-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#vue-router"><span class="toc-text">vue-router</span></a></li></ol></div></div><script src="/js/catalog.js"></script><div class="comments-container"></div></div><div class="footer"><div class="social"><ul><li><a title="github" target="_blank" rel="noopener" href="https://github.com/heweiliang88"><i class="iconfont icon-github"></i></a></li><li><a title="email" href=""><i class="iconfont icon-envelope"></i></a></li><li><a title="facebook" href=""><i class="iconfont icon-facebooksquare"></i></a></li><li><a title="twitter" href=""><i class="iconfont icon-twitter"></i></a></li><li><a title="wechat" href=""><i class="iconfont icon-wechat"></i></a></li><li><a title="weibo" href=""><i class="iconfont icon-weibo"></i></a></li></ul></div><div class="footer-more"><a target="_blank" rel="noopener" href="https://github.com/zchengsite/hexo-theme-oranges">Copyright © 2022 cloud</a></div><div class="footer-more"><a target="_blank" rel="noopener" href="https://github.com/zchengsite/hexo-theme-oranges">Theme by Oranges | Powered by Hexo</a></div></div></div><div class="tools-bar"><div class="back-to-top tools-bar-item hidden"><a href="javascript: void(0)"><i class="iconfont icon-chevronup"></i></a></div><script src="/js/backtotop.js"></script><div class="search-icon tools-bar-item" id="search-icon"><a href="javascript: void(0)"><i class="iconfont icon-search"></i></a></div><div class="search-overlay hidden"><div class="search-content" tabindex="0"><div class="search-title"><span class="search-icon-input"><a href="javascript: void(0)"><i class="iconfont icon-search"></i> </a></span><input type="text" class="search-input" id="search-input" placeholder="搜索..."> <span class="search-close-icon" id="search-close-icon"><a href="javascript: void(0)"><i class="iconfont icon-close"></i></a></span></div><div class="search-result" id="search-result"></div></div></div><script type="text/javascript">var inputArea=document.querySelector("#search-input"),searchOverlayArea=document.querySelector(".search-overlay");function openOrHideSearchContent(){searchOverlayArea.classList.contains("hidden")?(searchOverlayArea.classList.remove("hidden"),document.body.classList.add("hidden")):(searchOverlayArea.classList.add("hidden"),document.body.classList.remove("hidden"))}function blurSearchContent(e){e.target===searchOverlayArea&&openOrHideSearchContent()}inputArea.onclick=function(){getSearchFile(),this.onclick=null},inputArea.onkeydown=function(){if(13==event.keyCode)return!1},document.querySelector("#search-icon").addEventListener("click",openOrHideSearchContent,!1),document.querySelector("#search-close-icon").addEventListener("click",openOrHideSearchContent,!1),searchOverlayArea.addEventListener("click",blurSearchContent,!1);var searchFunc=function(e,t,n){"use strict";var r=document.getElementById(t),a=document.getElementById(n);a.innerHTML="<ul><span class='local-search-empty'>首次搜索，正在载入索引文件，请稍后……<span></ul>",$.ajax({url:e,dataType:"xml",success:function(e){var t=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get();a.innerHTML="",r.addEventListener("input",function(){var u='<ul class="search-result-list">',h=this.value.trim().toLowerCase().split(/[\s\-]+/);if(a.innerHTML="",!(this.value.trim().length<=0)){if(t.forEach(function(e){var n,r,a=!0,t=(e.title&&""!==e.title.trim()||(e.title="Untitled"),e.title.trim()),c=t.toLowerCase(),s=e.content.trim().replace(/<[^>]+>/g,""),i=s.toLowerCase(),e=e.url,l=-1,o=-1;""!==i?h.forEach(function(e,t){n=c.indexOf(e),l=i.indexOf(e),n<0&&l<0?a=!1:(l<0&&(l=0),0==t&&(o=l))}):a=!1,a&&(u+="<li><a href='"+e+"' class='search-result-title'>"+t+"</a>",0<=o&&(e=o+80,(e=0==(t=(t=o-20)<0?0:t)?100:e)>s.length&&(e=s.length),r=s.substr(t,e),h.forEach(function(e){var t=new RegExp(e,"gi");r=r.replace(t,'<span class="search-keyword">'+e+"</span>")}),u+='<p class="search-result-abstract">'+r+"...</p>"),u+="</li>")}),-1===(u+="</ul>").indexOf("<li>"))return a.innerHTML="<ul><span class='local-search-empty'>没有找到内容，请尝试更换检索词。<span></ul>";a.innerHTML=u}})},error:function(e,t,n){a.innerHTML="",404===e.status?a.innerHTML="<ul><span class='local-search-empty'>未找到search.xml文件，具体请参考：<a href='https://github.com/zchengsite/hexo-theme-oranges#configuration' target='_black'>configuration</a><span></ul>":a.innerHTML="<ul><span class='local-search-empty'>请求失败，尝试重新刷新页面或稍后重试。<span></ul>"}}),$(document).on("click","#search-close-icon",function(){$("#search-input").val(""),$("#search-result").html("")})},getSearchFile=function(){searchFunc("/search.xml","search-input","search-result")}</script><div class="tools-bar-item theme-icon" id="switch-color-scheme"><a href="javascript: void(0)"><i id="theme-icon" class="iconfont icon-moon"></i></a></div><script src="/js/colorscheme.js"></script><div class="share-icon tools-bar-item"><a href="javascript: void(0)" id="share-icon"><i class="iconfont iconshare"></i></a><div class="share-content hidden"><a class="share-item" href="https://twitter.com/intent/tweet?text=' + (syntax)vue-router + '&url=' + http%3A%2F%2Fexample.com%2F%25E8%25AF%25AD%25E6%25B3%2595%25E7%25AF%2587%2Fvue-router.html + '" target="_blank" title="Twitter"><i class="iconfont icon-twitter"></i> </a><a class="share-item" href="https://www.facebook.com/sharer.php?u=http://example.com/%E8%AF%AD%E6%B3%95%E7%AF%87/vue-router.html" target="_blank" title="Facebook"><i class="iconfont icon-facebooksquare"></i></a></div></div><script src="/js/shares.js"></script></div></div></body></html>