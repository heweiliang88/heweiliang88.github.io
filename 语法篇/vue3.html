<!DOCTYPE html><html lang="zh-CN" color-mode="light"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="keywords" content="前端、免流、技术、运维、手机"><meta name="author" content="记住"><meta name="description" content="我希望有个如你一般的人。 如这山间清晨一般明亮清爽的人， 如奔赴古城道路上阳光一般的人， 温暖而不炙热，覆盖我所有肌肤。 由起点到夜晚，由山野到书房， 一切问题的答案都很简单。 我希望有个如你一般的人，贯彻未来，数遍生命的公路牌。"><title>(syntax)vue3 | 从你的全世界路过</title><link rel="apple-touch-icon" href="/images/avatar.png"><link rel="icon" href="/images/avatar.png"><link href="https://fonts.googleapis.com/css?family=Raleway&display=swap" rel="stylesheet"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1886449_67xjft27j1l.css"><link rel="stylesheet" href="/css/figcaption/mac-block.css"><script defer type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><link href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" rel="stylesheet"><script defer type="text/javascript" src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script src="/js/fancybox.js"></script><script>var html=document.documentElement;const colorMode=localStorage.getItem("color-mode");colorMode&&document.documentElement.setAttribute("color-mode",colorMode)</script><meta name="generator" content="Hexo 6.3.0"><style>.github-emoji{position:relative;display:inline-block;width:1.2em;min-height:1.2em;overflow:hidden;vertical-align:top;color:transparent}.github-emoji>span{position:relative;z-index:10}.github-emoji .fancybox,.github-emoji img{margin:0!important;padding:0!important;border:none!important;outline:0!important;text-decoration:none!important;user-select:none!important;cursor:auto!important}.github-emoji img{height:1.2em!important;width:1.2em!important;position:absolute!important;left:50%!important;top:50%!important;transform:translate(-50%,-50%)!important;user-select:none!important;cursor:auto!important}.github-emoji-fallback{color:inherit}.github-emoji-fallback img{opacity:0!important}</style><link rel="alternate" href="/atom.xml" title="从你的全世界路过" type="application/atom+xml"></head><body><div id="app"><div class="header"><div class="avatar"><a href="/"><img src="/images/avatar.png" alt=""></a><div class="nickname"><a href="/">cloud</a></div></div><h1 style="text-align:center;margin-bottom:40px" id="jinrishici-sentence">正在加载今日诗词....</h1><script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script><div class="navbar"><ul><li class="nav-item" data-path="/"><a href="/">Home</a></li><li class="nav-item" data-path="/archives/"><a href="/archives/">Archives</a></li><li class="nav-item" data-path="/tags/"><a href="/tags/">Tags</a></li><li class="nav-item" data-path="/friends/"><a href="/friends/">Friends</a></li><li class="nav-item" data-path="/about/"><a href="/about/">About</a></li></ul></div></div><script src="/js/activeNav.js"></script><div class="flex-container"><script async type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]]}}</script><script async type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.10/dist/clipboard.min.js"></script><script src="/js/codeCopy.js"></script><div class="container post-details" id="post-details"><div class="post-content"><div class="post-title">(syntax)vue3</div><div class="post-attach"><span class="post-pubtime"><i class="iconfont icon-updatetime mr-10" title="更新时间"></i> 2022-10-20 10:31:20 </span><span class="post-tags"><i class="iconfont icon-tags mr-10" title="标签"></i> <span class="span--tag mr-8"><a href="/tags/vue3/" title="vue3">#vue3</a></span></span></div><div class="markdown-body"><p>vue 2.0 和 vue 3.0</p><ul><li>90% 以上代码可与 vue2.0 复用</li><li>Composition API 作为 新增 API 不会影响旧的逻辑代码</li><li>Mixin 不再推荐</li></ul><p>新特性</p><ul><li>v-for 中 Ref 数组</li><li>v-if 与 v-for 的优先级</li><li>v-model</li><li>v-bind Merge Behavior</li><li>组件<ul><li>异步组件</li></ul></li><li>自定义指令</li><li>全局 API<br>vue 不支持 IE8 及以下版本， 使用了 IE8 无法模拟 ECMAScript 5 特性 ，Vue 支持兼容 ECMAScript 的浏览器</li></ul><h2 id="vue3"><a href="#vue3" class="headerlink" title="vue3"></a>vue3</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm init vue@latest<br>npm i <br>npm run dev<br>npm run build<br><br>import { createApp } from <span class="hljs-string">'vue'</span><br><br>// 从一个单文件组件中导入根组件<br>import App from <span class="hljs-string">'./App.vue'</span><br><br>const app = createApp(App)<br><br>createApp({<br>	<span class="hljs-function"><span class="hljs-title">data</span></span>(){<br>  	<span class="hljs-built_in">return</span>{}<br>  }<br>}).mount(<span class="hljs-string">"#app"</span>) // 挂载应用<br><br>多个应用实例<br>const app1 = createApp({<br>  /* ... */<br>})<br>app1.mount(<span class="hljs-string">'#container-1'</span>)<br><br>const app2 = createApp({<br>  /* ... */<br>})<br>app2.mount(<span class="hljs-string">'#container-2'</span>)<br><br><br>可写计算属性<br>computed: {<br>	<span class="hljs-function"><span class="hljs-title">get</span></span>(){}<br>	<span class="hljs-function"><span class="hljs-title">set</span></span>(){}<br>}<br></code></pre></td></tr></tbody></table></figure><ul><li>v-html 双大括号会将数据解释为纯文本，而不是 HTML。若想插入 HTML</li><li>动态绑定多个值 objectOfAttrs: {</li><li>动态参数 v-bind:[attributeName]=”url” v-on:[eventName]=”doSomething”&gt;</li><li>修饰符 @submit.prevent=”onSubmit”</li></ul><p>事件修饰符</p><ul><li><code>.stop</code></li><li><code>.prevent</code></li><li><code>.self</code></li><li><code>.capture</code></li><li><code>.once</code></li><li><code>.passive</code></li></ul><p>按键别名</p><ul><li><code>.enter</code></li><li><code>.tab</code></li><li><code>.delete</code> (捕获“Delete”和“Backspace”两个按键)</li><li><code>.esc</code></li><li><code>.space</code></li><li><code>.up</code></li><li><code>.down</code></li><li><code>.left</code></li><li><code>.right</code></li></ul><p>系统按键修饰符 @keyup.alt.enter=”clear” @click.ctrl=”doSomething</p><ul><li><code>.ctrl</code></li><li><code>.alt</code></li><li><code>.shift</code></li><li><code>.meta</code></li><li><code>.exact</code> 修饰符允许控制触发一个事件所需的确定组合的系统按键修饰</li></ul><p>鼠标</p><ul><li><code>.left</code></li><li><code>.right</code></li><li><code>.middle</code></li></ul><p>nextTick(() =&gt; { // 访问更新后的 DOM }) 等待一个状态改变后的 DOM 更新完成</p><p>api</p><ul><li>全局api</li><li>组合式api</li><li>选项式api</li><li>内置内容</li><li>单文件组</li><li>进阶API</li></ul><p>vue 轻量级 <code>Vue 的核心库只关注视图层 V</code> 一套用于构建用户界面的自底向上逐层应用的 渐进式（由浅入深）简单到复杂 JavaScript<code>渐进式框架</code> 架构 前 m 页面中的数据 v 视图 vm [视图层分离] 后 m 数据库 数据保存 v c 控制层</p><ul><li>声明式渲染 ：声明式地描述最终输出HTML和JS状态之间的内容</li><li>单文件组件 ：组件化 分为 页面、组件 两种 页面上可以使用组件</li><li>响应式： 编程 数据绑定响应式地更新 DOM</li><li>API 风格 同一个底层系统所提供的两套不同的接口。实际上，选项式 API 是在组合式 API 的基础上实现的<ul><li>选项式 API，我们可以用包含多个选项的对象来描述组件的逻辑 script data(){ } methods:{ } mounted()</li><li>组合式 API，我们可以使用导入的 API 函数来描述组件逻辑 与<code>&lt;script setup&gt; 使用</code><ul><li>import { ref, onMounted } from ‘vue’ const count = ref(0) function func(){ } onMounted(() =&gt; { })</li></ul></li></ul></li></ul><p>优点 简单、体积小、组件化、效率高（虚拟DOM、Diff算法）、双向数据绑定、生态丰富</p><ul><li><p>体积小，压缩后 33K</p></li><li><p>更高的运行效率 （高效） 20kb min+ gzip 运行大小 超快虚拟 DOM</p><blockquote><p>基于虚拟 DOM,一种可以预先通过 JavaScript 进行各种计算，把最终的 DOM 操作计算出来并优化的技术，由于这个 DOM 操作属于预处理操作，并没有真实的操作，所以叫做虚拟 DOM</p><p>虚拟DOM vs 真实DOM</p></blockquote></li><li><p>双向数据绑定 保持状态与视图一致</p></li><li><p>生态丰富(vue-router\vuex\pinia\vue-cli\vite)，学习成本低 大量的 UI 框架、常用组件</p></li></ul><p>vue</p><ul><li><code>new Vue({ el:"",data(){ return{ } } })</code></li><li><code>Vue.creteApp({ data(){ return{ } } }).mount("#app")</code></li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// vue2</span><br><span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>({ <span class="hljs-comment">// vm.msg == data.msg vm.$data === data vm.$el === el</span><br>	<span class="hljs-attr">el</span>:<span class="hljs-string">"#app"</span>,<br>  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>){  <span class="hljs-comment">// '' 0 false [] null js数据类型 [1,2,3]  ["","",""]  [{ name:"value",version:"1.0" },{},{}]</span><br>  	<span class="hljs-keyword">return</span>{ <br>    }<br>  },<br>  <span class="hljs-attr">methods</span>:{<br>    <span class="hljs-title function_">show</span>(<span class="hljs-params"></span>){  } <span class="hljs-comment">// or show:function(){ }</span><br>  },<br>  <span class="hljs-attr">watch</span>:{},<br>  <span class="hljs-attr">computed</span>:{}<br>})<br><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>({<br>  <span class="hljs-attr">render</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">h</span>) { <span class="hljs-keyword">return</span> <span class="hljs-title function_">h</span>(<span class="hljs-title class_">App</span>) },<br>}).$mount(<span class="hljs-string">'#app'</span>)<br><br><span class="hljs-comment">// vue3</span><br><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>({<br>  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>){ }<br>}).<span class="hljs-title function_">mount</span>(<span class="hljs-string">"#app"</span>)<br><br><span class="hljs-keyword">const</span> ele = {<br>  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>){}<br>}<br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(ele).<span class="hljs-title function_">mount</span>(<span class="hljs-string">"#app"</span>)<br></code></pre></td></tr></tbody></table></figure><ul><li><code>Object.freeze()</code>，这会阻止修改现有的 property，也意味着响应系统无法再<em>追踪</em>变化<ul><li><code>var obj = { foo:bar } Object.freeze(obj)</code></li></ul></li></ul><p>实例property与方法 前缀 <code>$ vm.$data vm.$el 挂载的根元素 vm.$watch('a',function(newValue,oldValue){ })</code></p><p><code>js oninput = function(){ inp.value }</code></p><p>指令</p><ul><li><p><code>@click="func" v-on:click="event.alert" methods:{ alert(){ this.a // data.a } }</code> 事件绑定/方法 <code>:</code> v-on 事件绑定 <code>@</code> @[event]=”doSomething” 动态参数（vue2.6+）</p></li><li><p><code>:id="app" v-bind</code> v-bind:id=”” v-bind:disabled=”” v-bind:href=”” v-bind:src=” “ :href=“url” :[key]=“url” 动态参数（vue2.6+） 绑定属性值 动态绑定DOM元素属性</p></li><li><p><code>{{ js表达式 }}</code> Mustache语法 (双大括号) 的文本插值{数据绑定} 使用JavaScript 表达式</p></li><li><p><code>v-once</code> 文本插值不可改变 标明元素或组件只能i渲染一次 执行<code>一次性地插值</code>，当数据改变时，插值处的内容不会更新</p></li><li><p><code>v-module</code> v-module=“message” data(){ message:”” } 表单绑定 textarea select input</p><ul><li><p><code>&lt;input&gt;</code> 和 <code>&lt;textarea&gt;</code> 元素会绑定 <code>value</code> property 并侦听 <code>input</code> 事件</p></li><li><p><code>手动连接值绑定和更改事件监听器 &lt;input :value="text" @input="event =&gt; text = event.target.value"&gt;</code></p></li><li><p><code>&lt;input type="checkbox"&gt;</code> 和 <code>&lt;input type="radio"&gt;</code> 会绑定 <code>checked</code> property 并侦听 <code>change</code> 事件</p></li><li><p><code>&lt;select&gt;</code> 会绑定 <code>value</code> property 并侦听 <code>change</code> 事件</p></li><li><p><code>&lt;textarea&gt;</code> 中是不支持插值表达式的。请使用 <code>v-model</code> 来替代</p></li><li><p>修饰符 .lazy .number .trim</p></li></ul></li><li><p><code>{{}}</code> 、v-text、v-html</p></li><li><p>v-el 、v-ref <code>vue1.0中的v-el和v-ref在2.0中被废弃了。</code></p><ul><li>v-el 为DOM元素注册了一个索引，可以直接访问DOM元素（通过<code>v-el</code>我们可以获取到<code>DOM</code>对象） 可以通过实例的<code>$els</code>属性调用</li><li>v-ref 通过<code>v-ref</code>获取到整个组件（<code>component</code>）的对象 可以通过实例的<code>$refs</code>属性调用</li></ul></li><li><p>v-for 循环渲染<code>{} [] [{},{}]</code> key ( in of )、(item,index)</p><ul><li>item/index <code>v-for="(item,index) in list"</code></li><li>in 普通数组 对象数组 对象 数字 <code>v-for="index in 10"</code></li><li>of 替代 in 作为分隔符，接近JavaScript 迭代器的语法</li><li>key 提高渲染 绑定键 <code>v-bind:key="item.id或index"</code></li></ul></li><li><p>v-if / v-else /v-else-if <code>条件渲染</code> 登陆上的tab切换</p><ul><li><code>v-if="hidden" v-else hidden:true this.hidden =!this.hidden</code> OR <code>html文件上生效 template v-if="hidden" 组件渲染</code></li><li><code>v-if="type === 'A'" / v-else-if="type === 'B'" / v-else</code></li></ul></li><li><p>v-show <code>显示隐藏</code></p><ul><li><p><code>v-show</code> 的元素始终会被渲染并保留在 DOM 中。<code>v-show</code> 只是简单地切换元素的 CSS property <code>display</code>。</p><p><code>v-show</code> 不支持 <code>&lt;template&gt;</code> 元素，也不支持 <code>v-else</code>。</p></li></ul></li><li><p>v-if vs v-show</p><ul><li>v-if 真正的条件渲染 操作DOM 会重新删除或创建元素 更高的切换消耗 频繁切换 确保在切换过程中条件块内的事件监听器和子组件适当地被销毁和重建 惰性 懒惰的：如果在初始渲染时条件为假，则什么也不做——直到条件第一次变为真时，才会开始渲染条件块</li><li>v-show 不切换DOM 切换元素display 不管初始条件 元素总是会被渲染(基于 CSS 进行切换) 更高的初始渲染消耗 条件变化 运行条件不太可能改变</li></ul></li><li><p>v-if 与 v-for 不能一起使用</p><ul><li><code>v-for</code> 具有比 <code>v-if</code> 更高的优先级。 v-if 是包括v-for的时候 v-for会提升优先级</li></ul></li><li><p><code>v-html=""</code> 输出html 插入HTML 需要绑定在某个元素上且能避免编译前闪现问题</p></li><li><p>v-text 避免未编译前的闪现问题 解决<code>{{ text }} 中闪现的问题</code></p></li><li><p>v-cloak 在元素上添加了一个<code>[v-cloak]的属性，直到关联的实例结束编译</code> css规则</p></li><li><p>v-pre 跳过编译这个元素和子元素，作用显示出<code>{{双大括号}}</code></p></li></ul><p>data(){} 数据(页面数据) \computed：{} 计算数据(一个data的值) \watch：{} 侦听(一个data的值)数据的变化 \method：{} 事件方法(要触发机制)</p><ul><li><p>data(){} 数据</p></li><li><p>methods：{} 方法 表示一个具体的操作，主要书写业务逻辑</p></li><li><p>computed:{} 计算属性，可以理解为经过计算的data 数据的逻辑运算 计算data的属性(计算并返回给<code>{{ }}</code>)、（计算代表逻辑），就是把模板中的复杂逻辑进行抽取出来，让模板<code>{{ 计算属性方法 }}</code>不要过重 可复用 <code>是一个值 {{ msg }} //msg计算属性名 computed:{ 插值表达式的值(){ return this.data中的值 } }</code></p><ul><li>本质上是一个方法 不过在使用的时候是使用它们的名称 ，直接当作属性来使用 并不会把计算属性，当作方法去调用 只要计算属性，这个$function$ 内部，所用到的任何data 中的数据发送了变化，就会立即重新计算这个计算属性的</li><li>属性的结果会被缓存，除非依赖的响应式属性变化才会重新计算。主要当作属性来使用；</li><li>getter(默认)/setter <code>属性(){ get(){ return } 返回值 set(value){ } 设置值 }</code></li></ul></li><li><p>watch：{} 侦听器 Vue 提供了一种更通用的方法来<code>观察和响应Vue实例上的数据变动</code>：侦听属性，通常更好的做法是使用计算属性而不是命令式的 <code>watch</code> 回调。 响应数据的变化。当需要在数据变化时执行异步或开销较大的操作时，这个方式是最有用的</p><ul><li>watch:{ } <code>this.$watch('question', (newQuestion) =&gt; {</code></li><li>一个对象，键是需要观察的表达式，值是对应回调函数。主要用来监听某些特定数据的变化，从而进行某些具体的业务逻辑操作；可以看作是<code>computed</code>和<code>methods</code>的结合体</li></ul></li><li><p>ref</p><ul><li><code>&lt;input ref="input"&gt; this.$refs.input.focus()</code></li></ul></li><li><p>methods vs computed 区别计算属性是基于它们的<code>响应式依赖进行缓存</code>的</p><ul><li>computed 计算属性 返回一个值 使用缓存，重新调用不计算，改变时重新计算<ul><li>只在相关响应式依赖发生<code>改变时它们才会重新求值</code>。这就意味着只要 <code>message</code> 还没有发生改变，多次访问 <code>reversedMessage</code> 计算属性会立即返回之前的计算结果，而不必再次执行函数</li><li>缓存的作用：设我们有一个性能开销比较大的计算属性 <strong>A</strong>，它需要遍历一个巨大的数组并做大量的计算。然后我们可能有其他的计算属性依赖于 <strong>A</strong>。如果没有缓存，我们将不可避免的多次执行 <strong>A</strong> 的 getter！如果你不希望有缓存，请用方法来替代</li></ul></li><li>methods 方法 返回一个函数 需要触发机制 每次调用都会重新计算</li></ul></li><li><p>computed vs watch <code>data数据(){ }</code></p><ul><li>watch 监听的data中的值变化 <code>每时每刻监听</code>数据或者动作的变化 在某个数据变化时做一些事情 通过 <code>watch</code> 选项提供了一个更通用的方法，来响应数据的变化。当需要在数据变化时执行异步或开销较大的操作时<ul><li><code>watch:{ data中的值(newVal,oldVal){ } //data中的值(){ data中的值 } }</code></li></ul></li><li>computed <code>计算data中的值属性</code> 一个数据依赖于其他数据 发送改动时运行</li></ul></li></ul><p>生命周期 vs 生命周期钩子</p><p>vue2 or vue3</p><ul><li><p>生命周期：从 Vue 实例创建、运行、到销毁期间，总是伴随着各种各样的事件，这些事件，统称为生命周期！</p></li><li><p><a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/api/#%E9%80%89%E9%A1%B9-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90">生命周期钩子</a>：就是生命周期事件的别名而已 生命周期钩子 = 生命周期函数 = 生命周期事件</p></li></ul><p>生命周期函数分类： <code>创建create/mounted =&gt;运行updated ==&gt;销毁destory</code></p><p>创建（create） ==&gt; 挂载（mounted） ==&gt; 更新（updated） ==&gt; 销毁（destroy）</p><ul><li><p>==创建期间的生命周期函数==：</p><ul><li>beforeCreate：实例刚在内存中被创建出来，此时，还没有初始化好 data 和 methods 属性（调用报错 ）<code>组件刚刚被创建</code></li><li>created：实例已经在内存中创建，此时 data 和 methods 已经创建 OK，此时还没有开始 编译模板</li><li>beforeMount：此时已经完成了模板的编译，但是还没有<code></code>挂载到页面·中 <code>挂载之前</code></li><li>mounted：此时，已经将编译好的模板，挂载到了页面指定的容器中显示 <code>挂载之后</code></li></ul></li><li><p>==运行期间的生命周期函数==：</p><ul><li><p>beforeUpdate：状态更新之前 执行此函数， 此时 data 中的状态值是最新的，但是界面上显示的 数据还是旧的，因为此时还没有开始重新渲染 DOM 节点</p></li><li><p>updated：实例更新完毕之后调用此函数，此时 data 中的状态值 和 界面上显示的数据，都已经完成了更新，界面已经被重新渲染好了！</p></li></ul></li><li><p>==销毁期间的生命周期函数==：</p><ul><li><p>beforeDestroy：实例销毁之前调用。在这一步，实例仍然完全可用。<code>组件销毁前调用</code></p></li><li><p>destroyed：Vue 实例销毁后调用。调用后，Vue 实例指示的所有东西都会解绑定，所有的事件监听器会被移除，所有的子实例也会被销毁。<code>组件销毁后调用</code></p></li></ul></li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>({<br>  <span class="hljs-attr">el</span>:<span class="hljs-string">"#app"</span>,<br>  <span class="hljs-attr">init</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){},<br>  <span class="hljs-attr">created</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){}<br>  <span class="hljs-attr">beforeCompile</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){}<br>  <span class="hljs-attr">compiled</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){}<br>  <span class="hljs-attr">attached</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){}<br>  <span class="hljs-attr">beforeDestroy</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){}<br>  <span class="hljs-attr">destroyed</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){}<br>  <span class="hljs-attr">ready</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){}<br>})<br></code></pre></td></tr></tbody></table></figure><p>组件</p><ul><li>html文件 全局组件 局部组件<ul><li><code>&lt;ButtonCounter /&gt;</code></li><li><code>&lt;组件名 content="Hello"&gt;&lt;/组件名&gt; Vue.extend({ props: ["content"] template:"" }) Vue.component("别名",局部组件名);</code> props:[“值”]子 <code>&lt;msg content="Hello"&gt;&lt;/msg&gt; 父</code> 父传子<ul><li>父子：子props父 标签属性值</li><li>子 <code>props: ['msg','ddd','ccc']</code></li><li>父 <code>&lt;HelloWorld msg="center" ddd="324" ccc="234"&gt;&lt;/HelloWorld&gt;</code></li></ul></li><li><code>Vue.component("xxx组件名",{ data(){} template:"" }</code></li><li><code>&lt;template id="tpl"&gt; Vue.component('xxx组件名', { template: '#tpl' })</code></li></ul></li><li>vue <code>props 传递参数</code></li></ul><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs html">html文件用<br>// vue2<br>div#app<br><span class="hljs-tag">&lt;<span class="hljs-name">msg</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"Hello"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">msg</span>&gt;</span>  // 父组件中使用子组件msg<br>// 方法一 Vue.extend()<br>var message = Vue.extend({ // 局部组件 <br>	 props: ["content"], // props 传递参数<br>   template: "<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{{ content }}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>", // 子组件<br>})<br>Vue.component("msg",message);  // 全局组件 别名<br><br>// 方法二<br>Vue.component("btn",{ // 直接使用没有别名<br>	 data(){  return:{ count: 'text message'}  },<br>	 template: "<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>lorem {{ count }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>"<br>})<br><br>var vm = new Vue({ el:"#app" })<br>// 方法二 注册子组件<br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">account</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">account</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>// HTML中<br><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"tpl"</span>&gt;</span><br>	<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>这是通过template元素,在定义<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>    	<span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>这是一个或<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">component</span>(<span class="hljs-string">'account'</span>, {</span><br><span class="language-javascript">        <span class="hljs-attr">template</span>: <span class="hljs-string">'#tpl'</span></span><br><span class="language-javascript">    });</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br>// vue3<br>const app = createApp({ data(){ } })<br>app.component('todo-item',{<br>    template:`<span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>This is a todo<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>`<br>})<br>app.mount("#element")<br><br>vue文件<br>// vue<br>#app<br>template id="app"<br><br></code></pre></td></tr></tbody></table></figure><ul><li>动态组件 <code>&lt;component&gt;</code> 元素和特殊的 <code>is</code> attribute 实现的 <code>&lt;component :is="currentTab"&gt;&lt;/component&gt;</code></li><li>注册<ul><li>全局注册 <code>app.component('MyComponent', MyComponent) &lt;ComponentA/&gt;</code></li><li>局部注册 <code>components: { ComponentA: ComponentA }</code></li></ul></li><li>Props 一个组件需要显式声明它所接受的 props，这样 Vue 才能知道外部传入的哪些是 props</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {<br>  <span class="hljs-attr">props</span>: {<br>    <span class="hljs-attr">title</span>: <span class="hljs-title class_">String</span>,<br>    <span class="hljs-attr">likes</span>: <span class="hljs-title class_">Number</span><br>  }<br>}<br><span class="hljs-attr">props</span>: [<span class="hljs-string">'foo'</span>],<br></code></pre></td></tr></tbody></table></figure><ul><li><p>事件 触发与监听事件 使用 <code>$emit</code> 方法触发自定义事件 (例如：在 <code>v-on</code> 的处理函数中</p></li><li><p>透传 Attribute “透传 attribute”指的是传递给一个组件，却没有被该组件声明为 <a target="_blank" rel="noopener" href="https://cn.vuejs.org/guide/components/props.html">props</a> 或 <a target="_blank" rel="noopener" href="https://cn.vuejs.org/guide/components/events.html#defining-custom-events">emits</a> 的 attribute 或者 <code>v-on</code> 事件监听器。最常见的例子就是 <code>class</code>、<code>style</code> 和 <code>id</code></p></li><li><p>插槽</p></li><li><p>依赖注入</p></li><li><p>异步组件</p></li></ul><p>逻辑复用</p><ul><li>组合式函数 “组合式函数”(Composables) 是一个利用 Vue 的组合式 API 来封装和复用<strong>有状态逻辑</strong>的函数</li><li>自定义指令 允许你注册自定义的指令 (Custom Directives)</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> focus = {<br>  <span class="hljs-attr">mounted</span>: <span class="hljs-function">(<span class="hljs-params">el</span>) =&gt;</span> el.<span class="hljs-title function_">focus</span>()<br>}<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {<br>  <span class="hljs-attr">directives</span>: {<br>    <span class="hljs-comment">// 在模板中启用 v-focus</span><br>    focus<br>  }<br>}<br>&lt;input v-focus /&gt;<br>  <br>  <span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>({})<br><br><span class="hljs-comment">// 使 v-focus 在所有组件中都可用</span><br>app.<span class="hljs-title function_">directive</span>(<span class="hljs-string">'focus'</span>, {<br>  <span class="hljs-comment">/* ... */</span><br>})<br>对于自定义指令来说，一个很常见的情况是仅仅需要在 mounted 和 updated 上实现相同的行为，除此之外并不需要其他钩子。这种情况下我们可以直接用一个函数来定义指令<br>app.<span class="hljs-title function_">directive</span>(<span class="hljs-string">'color'</span>, <span class="hljs-function">(<span class="hljs-params">el, binding</span>) =&gt;</span> {<br>  <span class="hljs-comment">// 这会在 `mounted` 和 `updated` 时都调用</span><br>  el.<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = binding.<span class="hljs-property">value</span><br>})<br>&lt;div v-demo=<span class="hljs-string">"{ color: 'white', text: 'hello!' }"</span>&gt;&lt;/div&gt;<br>app.<span class="hljs-title function_">directive</span>(<span class="hljs-string">'demo'</span>, <span class="hljs-function">(<span class="hljs-params">el, binding</span>) =&gt;</span> {<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(binding.<span class="hljs-property">value</span>.<span class="hljs-property">color</span>) <span class="hljs-comment">// =&gt; "white"</span><br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(binding.<span class="hljs-property">value</span>.<span class="hljs-property">text</span>) <span class="hljs-comment">// =&gt; "hello!"</span><br>})<br><br></code></pre></td></tr></tbody></table></figure><ul><li>插件 插件 (Plugins) 是一种能为 Vue 添加全局功能的工具代码</li></ul><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">import { createApp } from 'vue'<br><br>const app = createApp({})<br><br>app.use(myPlugin, {<br>  /* 可选的选项 */<br>})<br><br></code></pre></td></tr></tbody></table></figure><p>内置组件</p><ul><li>Transition <code>&lt;Transition&gt;</code> 会在一个元素或组件进入和离开 DOM 时应用动画。本章节会介绍如何使用它。</li><li>TransitionGroup 会在一个 <code>v-for</code> 列表中的元素或组件被插入，移动，或移除时应用动画</li><li>KeepAlive 一个内置组件，它的功能是在多个组件间动态切换时缓存被移除的组件实例</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;!-- 非活跃的组件将会被缓存！ --&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">KeepAlive</span>  <span class="hljs-attr">:max</span>=<span class="hljs-string">"10"</span>&gt;</span> 缓存的最大组件实例数</span><br><span class="language-xml">//  include 和 exclude prop 来定制该行为</span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">"activeComponent"</span> /&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">KeepAlive</span>&gt;</span></span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {<br>  <span class="hljs-title function_">activated</span>(<span class="hljs-params"></span>) {<br>    <span class="hljs-comment">// 在首次挂载、</span><br>    <span class="hljs-comment">// 以及每次从缓存中被重新插入的时候调用</span><br>  },<br>  <span class="hljs-title function_">deactivated</span>(<span class="hljs-params"></span>) {<br>    <span class="hljs-comment">// 在从 DOM 上移除、进入缓存</span><br>    <span class="hljs-comment">// 以及组件卸载时调用</span><br>  }<br>}<br></code></pre></td></tr></tbody></table></figure><ul><li>Teleport 是一个内置组件，它可以将一个组件内部的一部分模板“传送”到该组件的 DOM 结构外层的位置去</li></ul><p>应用规模化</p><ul><li>单文件组件 SFC 是一个框架指定的文件格式</li><li>工具链 vite vuecli Volar(vscode 代码提示 vue 3) vetur(vue2 代码提示) vue-loader 为 webpack 提供 Vue SFC 支持的官方 loader。如果你正在使用 Vue CLI</li><li>路由 veu-router</li><li>状态管理 vuex pinia</li><li>测试</li><li>服务端渲染 SSR 是 Server-Side Rendering，即服务端渲染<ul><li>与客户端的单页应用 (SPA) 相比，SSR 的优势主要在于<ul><li><strong>更快的首屏加载</strong> <strong>统一的心智模型</strong> <strong>更好的 SEO</strong></li></ul></li><li><a target="_blank" rel="noopener" href="https://v3.nuxtjs.org/">Nuxt</a> 是一个构建于 Vue 生态系统之上的全栈框架，它为编写 Vue SSR 应用提供了丝滑的开发体验</li><li>Vite 提供了内置的 <a target="_blank" rel="noopener" href="https://cn.vitejs.dev/guide/ssr.html">Vue 服务端渲染支持</a>，但它在设计上是偏底层的。如果你想要直接使用 Vite，可以看看 <a target="_blank" rel="noopener" href="https://vite-plugin-ssr.com/">vite-plugin-ssr</a>，一个帮你抽象掉许多复杂细节的社区插件。</li></ul></li></ul><p>动画</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js">动画两组类<br><span class="hljs-comment">// mode 过渡的模式 路由动画</span><br>&lt;transition mode=<span class="hljs-string">"out-in"</span>&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span></span><br>&lt;/transition&gt;<br>.<span class="hljs-property">v</span>-enter,.<span class="hljs-property">v</span>-leave-to{<br>  <span class="hljs-attr">opacity</span>:<span class="hljs-number">0</span>;<br>    <span class="hljs-attr">transform</span>:<span class="hljs-title function_">translateX</span>(140px);<br>}<br>.<span class="hljs-property">v</span>-enter-active,.<span class="hljs-property">v</span>-leave-active{<br>  <span class="hljs-attr">transtion</span>:all <span class="hljs-number">0.5</span> ease;<br>}<br></code></pre></td></tr></tbody></table></figure><p>API风格</p><ul><li>选项式</li><li>组合式</li></ul><p><strong>声明式渲染</strong></p><p>SFC 单文件组件</p><ul><li>template script style 组成</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// vue2 选项式</span><br>&lt;p ref=<span class="hljs-string">"p"</span>&gt;hello&lt;<span class="hljs-regexp">/p&gt; /</span><span class="hljs-regexp">/ this.$refs.p  挂载之后就能使用</span><br><span class="hljs-regexp">&lt;ChildComp /</span>&gt;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span>{ <br>	<span class="hljs-title function_">data</span>(<span class="hljs-params"></span>){<br>    <span class="hljs-keyword">return</span>{<br>      <span class="hljs-attr">msg</span>:<span class="hljs-string">''</span>,<br>      <span class="hljs-attr">text</span>:<span class="hljs-string">''</span><br>      <span class="hljs-attr">titleClass</span>:<span class="hljs-string">'title'</span>, <span class="hljs-comment">// title 类名</span><br>      <span class="hljs-attr">todoData</span>: <span class="hljs-literal">null</span><br>    }<br>  },<br>  <span class="hljs-attr">methods</span>:{  <span class="hljs-comment">// 方法对象 // </span><br>    	方法名(){<br>        <br>      },<br>    	<span class="hljs-title function_">onInput</span>(<span class="hljs-params">e</span>){<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">text</span> = e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span> <span class="hljs-comment">// 获取输入框的值</span><br>      }<br>  },<br>  <span class="hljs-attr">computed</span>:{<br>       <span class="hljs-title function_">filteredTodos</span>(<span class="hljs-params"></span>) {  <span class="hljs-keyword">return</span> }<br>  }<br>  <span class="hljs-keyword">import</span> <span class="hljs-title class_">ChildComp</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./ChildComp.vue'</span><br>  <span class="hljs-attr">components</span>: {<br>	    <span class="hljs-title class_">ChildComp</span><br>	}<br>  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>){<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">p</span>.<span class="hljs-property">textContent</span> = <span class="hljs-string">'mounted!'</span>  <span class="hljs-comment">// textContent修改</span><br>    <span class="hljs-comment">// 网络请求</span><br>    <span class="hljs-keyword">async</span> <span class="hljs-title function_">fetchData</span>(<span class="hljs-params"></span>) {<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">todoData</span> = <span class="hljs-literal">null</span><br>      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<br>        <span class="hljs-string">`https://jsonplaceholder.typicode.com/todos/<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.todoId}</span>`</span><br>      )<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">todoData</span> = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>()<br>    }<br>  }<br>}<br>&lt;input :value=<span class="hljs-string">"text"</span> @input=<span class="hljs-string">"onInput"</span> v-model=<span class="hljs-string">"text"</span>&gt;<br><br>props<br><span class="hljs-comment">// 在子组件中</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {<br>  <span class="hljs-attr">props</span>: {<br>    <span class="hljs-attr">msg</span>: <span class="hljs-title class_">String</span><br>  }<br>}<br><span class="hljs-comment">// 父属性子props:{}</span><br>&lt;<span class="hljs-title class_">ChildComp</span> :msg=<span class="hljs-string">"greeting"</span> /&gt; <span class="hljs-comment">// </span><br><br>子组件还可以向父组件触发事件<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {<br>  <span class="hljs-comment">// 声明触发的事件</span><br>  <span class="hljs-attr">emits</span>: [<span class="hljs-string">'response'</span>],<br>  <span class="hljs-title function_">created</span>(<span class="hljs-params"></span>) {<br>    <span class="hljs-comment">// 带参数触发 this.$emit() 的第一个参数是事件的名称。其他所有参数都将传递给事件监听器。</span><br>    <span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">'response'</span>, <span class="hljs-string">'hello from child'</span>)<br>  }<br>}<br><br>&lt;<span class="hljs-title class_">ChildComp</span> @response=<span class="hljs-string">"(msg) =&gt; childMsg = msg"</span> /&gt;<br><span class="hljs-comment">// 父传子</span><br>除了通过 props 传递数据外，父组件还可以通过插槽 (slots) 将模板片段传递给子组件<br>  父 <br>&lt;<span class="hljs-title class_">ChildComp</span>&gt;<br>  <span class="hljs-title class_">This</span> is some slot content!<br>&lt;/<span class="hljs-title class_">ChildComp</span>&gt;<br><br>子   slot在子组件上<br>&lt;!-- 在子组件的模板中 --&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">slot</span>/&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span>Fallback content<span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span></span><br><br><br><br><span class="hljs-comment">// vue3 组合式 </span><br><span class="hljs-comment">// ref()  可以接受任何值类型。ref 会返回一个包裹对象，并在 .value 属性下暴露内部值</span><br><span class="hljs-comment">// reactive() 只适用于对象 (包括数组和内置类型，如 Map 和 Set) 声明响应式状态行为与普通对象一样</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"p"</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ChildComp</span> /&gt;</span></span><br><br>&lt;script setup&gt;<br>import { ref,reactive,computed,watch,onMounted } from 'vue'<br><br>// vue3组件不用注册 直接导入不同注册<br>import ChildComp from './ChildComp.vue'<br>// data<br>const count = ref('1000')  // ref(['']) ref({ count:'' })<br>count.value<br>const reactive = ({ count: '100'})<br>const titleClass = ref('title') // title 类名  const 变量 = 值<br>// methods<br>function 方法名(){} <br>function onInput(e){ this.text = e.target.value }<br><br>computed(() =&gt; {})<br>const p = ref(null)  <br>//生命周期 onUpdated 和 onUnmounted<br>onMounted(()=&gt;{<br>  p.value.textContent = 'Message'<br>})<br><br>const count = ref(0)<br><br>watch(count, (newCount) =&gt; {<br>  // 没错，console.log() 是一个副作用<br>  console.log(`new count is: ${newCount}`)<br>})<br><br>// 网络请求<br>const todoData = ref(null)<br><br>async function fetchData() {<br>  const res = await fetch(<br>    `https://jsonplaceholder.typicode.com/todos/${todoId.value}`<br>  )<br>  todoData.value = await res.json()<br>}<br>fetchData()<br><br>// 父子通信<br>子 // vue2 props：{}<br>const props = defineProps({ // defineProps() 是一个编译时宏，并不需要导入 props固定<br>  msg: String // msg 参数<br>})<br><br>父<br>import { ref } from 'vue'<br>import ChildComp from './ChildComp.vue'<br>const greeting = ref('Hello from parent')<br><br>&lt;ChildComp :msg="greeting" /&gt; // :子="父"<br> <br> <br> 子组件还可以向父组件触发事件   子传父  子emit=defineEmits([]) emit(事件,参数)<br>父 ChildComp @事件="(msg) =&gt; 父 = 子"<br> // 子<br>// 声明触发的事件<br>const emit = defineEmits(['response'])<br>// 带参数触发<br>emit('response', 'hello from child') emit(事件,参数)<br><br>// 父<br>const childMsg = ref('No child msg yet')<br>&lt;ChildComp @response="(msg) =&gt; childMsg = msg" /&gt;  @事件="(参数) =&gt; 父参数   = 参数"<br>  &lt;p&gt;{{ childMsg }}&lt;/p&gt;<br>// 插槽和vue2一样   把父的内容放在子上 插槽slot在子上<br>  <br>&lt;script&gt;<br></code></pre></td></tr></tbody></table></figure><p>HTML 文件</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable constant_">HTML</span> 文件<br>#app<br>选项式<br>#app<br>  &lt;child-comp&gt;&lt;/child-comp&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"p"</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">child-comp</span> <span class="hljs-attr">:msg</span>=<span class="hljs-string">"greeting"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">child-comp</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">child-comp</span> @<span class="hljs-attr">response</span>=<span class="hljs-string">"(msg) =&gt; childMsg = msg"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">child-comp</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">  </span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">import</span> <span class="hljs-title class_">ChildComp</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./ChildComp.js'</span></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>({  <span class="hljs-comment">// new Vue(el:"#app",) =&gt; createApp</span></span></span><br><span class="language-javascript"><span class="language-xml">  		<span class="hljs-title function_">data</span>(<span class="hljs-params"></span>){</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">return</span>{</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">count</span>:<span class="hljs-number">0</span></span></span><br><span class="language-javascript"><span class="language-xml">          	<span class="hljs-attr">titleClass</span>:<span class="hljs-string">'title'</span>  <span class="hljs-comment">// titleClass 名 title 值</span></span></span><br><span class="language-javascript"><span class="language-xml">          <span class="hljs-attr">greeting</span>: <span class="hljs-string">'Hello from parent'</span></span></span><br><span class="language-javascript"><span class="language-xml">           <span class="hljs-attr">childMsg</span>: <span class="hljs-string">'No child msg yet'</span></span></span><br><span class="language-javascript"><span class="language-xml">        }</span></span><br><span class="language-javascript"><span class="language-xml">      },</span></span><br><span class="language-javascript"><span class="language-xml">    	<span class="hljs-attr">methods</span>:{</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-title function_">increment</span>(<span class="hljs-params"></span>){</span></span><br><span class="language-javascript"><span class="language-xml">          <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++ <span class="hljs-comment">// 使用 this 来访问组件示例。组件实例会暴露 data 中声明的数据属性。我们可以通过改变这些属性的值来更新组件状态</span></span></span><br><span class="language-javascript"><span class="language-xml">        }</span></span><br><span class="language-javascript"><span class="language-xml">      },</span></span><br><span class="language-javascript"><span class="language-xml">     <span class="hljs-attr">computed</span>:{</span></span><br><span class="language-javascript"><span class="language-xml">       	<span class="hljs-title function_">filteredTodos</span>(<span class="hljs-params"></span>) {  <span class="hljs-keyword">return</span> <span class="hljs-number">1000</span> }</span></span><br><span class="language-javascript"><span class="language-xml">     },</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>){</span></span><br><span class="language-javascript"><span class="language-xml">      	<span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">p</span>.<span class="hljs-property">textContent</span> = <span class="hljs-string">'mounted!'</span></span></span><br><span class="language-javascript"><span class="language-xml">    },</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">components</span>: {</span></span><br><span class="language-javascript"><span class="language-xml">    		<span class="hljs-title class_">ChildComp</span> <span class="hljs-comment">// 导入组件 注册组件 使用组件</span></span></span><br><span class="language-javascript"><span class="language-xml">    }</span></span><br><span class="language-javascript"><span class="language-xml">  }).<span class="hljs-title function_">mount</span>(<span class="hljs-string">"#app"</span>)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">多个应用实例</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">const</span> app1 = <span class="hljs-title function_">createApp</span>({</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-comment">/* ... */</span></span></span><br><span class="language-javascript"><span class="language-xml">})</span></span><br><span class="language-javascript"><span class="language-xml">app1.<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#container-1'</span>)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">const</span> app2 = <span class="hljs-title function_">createApp</span>({</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-comment">/* ... */</span></span></span><br><span class="language-javascript"><span class="language-xml">})</span></span><br><span class="language-javascript"><span class="language-xml">app2.<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#container-2'</span>)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><br><br><span class="hljs-comment">// ./ChildComp.js</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {<br>  <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">  &lt;h2&gt;A Child Component!&lt;/h2&gt;</span><br><span class="hljs-string">  `</span><br>}<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {<br>  <span class="hljs-attr">props</span>: {<br>    <span class="hljs-attr">msg</span>: <span class="hljs-title class_">String</span><br>  },<br>  <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">  &lt;h2&gt;{{ msg || 'No props passed yet' }}&lt;/h2&gt;</span><br><span class="hljs-string">  `</span><br>}<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {<br>  <span class="hljs-attr">emits</span>: [<span class="hljs-string">'response'</span>],<br>  <span class="hljs-title function_">created</span>(<span class="hljs-params"></span>) {<br>    <span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">'response'</span>, <span class="hljs-string">'hello from child'</span>)<br>  },<br>  <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">  &lt;h2&gt;Child component&lt;/h2&gt;</span><br><span class="hljs-string">  `</span><br>}<br><br>插槽<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {<br>  <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">  &lt;slot&gt;Fallback content&lt;/slot&gt;</span><br><span class="hljs-string">  `</span><br>}<br><br><br>组合式 <span class="hljs-comment">// setup(){  return{} }</span><br>&lt;script type=<span class="hljs-string">"module"</span>&gt;<br><span class="hljs-keyword">import</span> { createApp, reactive, ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ChildComp</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./ChildComp.js'</span><br><br><span class="hljs-title function_">createApp</span>({<br>   <span class="hljs-attr">components</span>: {<br>    <span class="hljs-title class_">ChildComp</span><br>  }<br>  <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) { <span class="hljs-comment">// 传入 createApp() 的对象是一个 Vue 组件。组件的状态应该在 setup() 函数中声明，并使用一个对象返回</span><br>    <span class="hljs-keyword">const</span> counter = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> })<br>    <span class="hljs-keyword">const</span> message = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'Hello World!'</span>)<br>    <br>	  <span class="hljs-keyword">function</span> <span class="hljs-title function_">increment</span>(<span class="hljs-params"></span>) {<br>      count.<span class="hljs-property">value</span>++<br>    }<br>    <br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">onInput</span>(<span class="hljs-params">e</span>) {<br>      text.<span class="hljs-property">value</span> = e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span><br>    }<br>    <br>    <span class="hljs-keyword">const</span> filteredTodos = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {<br>      <span class="hljs-keyword">return</span> hideCompleted.<span class="hljs-property">value</span><br>        ? todos.<span class="hljs-property">value</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">t</span>) =&gt;</span> !t.<span class="hljs-property">done</span>)<br>        : todos.<span class="hljs-property">value</span><br>    })<br>    <br>    <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {<br>      p.<span class="hljs-property">value</span>.<span class="hljs-property">textContent</span> = <span class="hljs-string">'mounted!'</span><br>    })<br>    <br>   <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchData</span>(<span class="hljs-params"></span>) { }<br>    <br>     <br>     <span class="hljs-title function_">fetchData</span>()<br>    <span class="hljs-keyword">return</span> {<br>      counter,<br>      message,<br>      increment,<br>      onInput,<br>      filteredTodos<br>    }<br>  }<br>}).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {<br>  <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">  &lt;h2&gt;A Child Component!&lt;/h2&gt;</span><br><span class="hljs-string">  `</span><br>}<br> &lt;/script&gt;<br></code></pre></td></tr></tbody></table></figure><ul><li><code>:id="" v-bind:id="" 属性绑定</code></li><li><code>@click="" v-on=""</code></li><li><code>v-module</code></li><li><code>v-if="" v-else</code></li><li><code>v-for</code></li><li><code>v-ref 操作DOM $refs.元素.textContent</code></li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br><span class="hljs-comment">// 给每个 todo 对象一个唯一的 id</span><br><span class="hljs-keyword">let</span> id = <span class="hljs-number">0</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {<br>  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) {<br>    <span class="hljs-keyword">return</span> {<br>      <span class="hljs-attr">newTodo</span>: <span class="hljs-string">''</span>,<br>      <span class="hljs-attr">hideCompleted</span>:<span class="hljs-literal">false</span>,<br>      <span class="hljs-attr">todos</span>: [<br>        { <span class="hljs-attr">id</span>: id++, <span class="hljs-attr">text</span>: <span class="hljs-string">'Learn HTML'</span>,<span class="hljs-attr">done</span>:<span class="hljs-literal">true</span> },<br>        { <span class="hljs-attr">id</span>: id++, <span class="hljs-attr">text</span>: <span class="hljs-string">'Learn JavaScript'</span>,<span class="hljs-attr">done</span>:<span class="hljs-literal">true</span> },<br>        { <span class="hljs-attr">id</span>: id++, <span class="hljs-attr">text</span>: <span class="hljs-string">'Learn Vue'</span>,<span class="hljs-attr">done</span>:<span class="hljs-literal">false</span> }<br>      ]<br>    }<br>  },<br>  <span class="hljs-attr">computed</span>: { <span class="hljs-comment">// 计算属性</span><br>    <span class="hljs-title function_">filteredTodos</span>(<span class="hljs-params"></span>) {<br>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">hideCompleted</span><br>        ? <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">t</span>) =&gt;</span> !t.<span class="hljs-property">done</span>)<br>        : <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span><br>    }<br>  },<br>  <span class="hljs-attr">methods</span>: {<br>    <span class="hljs-title function_">addTodo</span>(<span class="hljs-params"></span>) {<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">id</span>: id++, <span class="hljs-attr">text</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">newTodo</span>,<span class="hljs-attr">done</span>:<span class="hljs-literal">false</span> })<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">newTodo</span> = <span class="hljs-string">''</span><br>    },<br>    <span class="hljs-title function_">removeTodo</span>(<span class="hljs-params">todo</span>) {<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">t</span>) =&gt;</span> t !== todo)<br>    }<br>  },<br>}<br>&lt;/script&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">let</span> id = <span class="hljs-number">0</span></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">const</span> newTodo = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">const</span> hideCompleted = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">const</span> todos = <span class="hljs-title function_">ref</span>([</span></span><br><span class="language-javascript"><span class="language-xml">   { <span class="hljs-attr">id</span>: id++, <span class="hljs-attr">text</span>: <span class="hljs-string">'Learn HTML'</span>,<span class="hljs-attr">done</span>:<span class="hljs-literal">true</span> },</span></span><br><span class="language-javascript"><span class="language-xml">    { <span class="hljs-attr">id</span>: id++, <span class="hljs-attr">text</span>: <span class="hljs-string">'Learn JavaScript'</span>,<span class="hljs-attr">done</span>:<span class="hljs-literal">true</span> },</span></span><br><span class="language-javascript"><span class="language-xml">    { <span class="hljs-attr">id</span>: id++, <span class="hljs-attr">text</span>: <span class="hljs-string">'Learn Vue'</span>,<span class="hljs-attr">done</span>:<span class="hljs-literal">false</span> }</span></span><br><span class="language-javascript"><span class="language-xml">])</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">const</span> filteredTodos = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">return</span> hideCompleted.<span class="hljs-property">value</span></span></span><br><span class="language-javascript"><span class="language-xml">    ? todos.<span class="hljs-property">value</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">t</span>) =&gt;</span> !t.<span class="hljs-property">done</span>)</span></span><br><span class="language-javascript"><span class="language-xml">    : todos.<span class="hljs-property">value</span></span></span><br><span class="language-javascript"><span class="language-xml">})</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">function</span> <span class="hljs-title function_">addTodo</span>(<span class="hljs-params"></span>) {</span></span><br><span class="language-javascript"><span class="language-xml">  todos.<span class="hljs-property">value</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">id</span>: id++, <span class="hljs-attr">text</span>: newTodo.<span class="hljs-property">value</span>,<span class="hljs-attr">done</span>:<span class="hljs-literal">false</span> })</span></span><br><span class="language-javascript"><span class="language-xml">  newTodo.<span class="hljs-property">value</span> = <span class="hljs-string">''</span></span></span><br><span class="language-javascript"><span class="language-xml">}</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">function</span> <span class="hljs-title function_">removeTodo</span>(<span class="hljs-params">todo</span>) {</span></span><br><span class="language-javascript"><span class="language-xml">  todos.<span class="hljs-property">value</span> = todos.<span class="hljs-property">value</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">t</span>) =&gt;</span> t !== todo)</span></span><br><span class="language-javascript"><span class="language-xml">}</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><br>&lt;template&gt;<br>  &lt;form @submit.prevent="addTodo"&gt;<br>    &lt;input v-model="newTodo"&gt;<br>    &lt;button&gt;Add Todo&lt;/button&gt;    <br>  &lt;/form&gt;<br>  &lt;ul&gt;<br>    &lt;li v-for="todo in filteredTodos" :key="todo.id"&gt;<br>      &lt;input type="checkbox" v-model="todo.done"&gt;<br>      &lt;span :class="{ done: todo.done }"&gt;{{ todo.text }}&lt;/span&gt;<br>      &lt;button @click="removeTodo(todo)"&gt;X&lt;/button&gt;<br>    &lt;/li&gt;<br>  &lt;/ul&gt;<br>  &lt;button @click="hideCompleted = !hideCompleted"&gt;<br>    {{ hideCompleted ? 'Show all' : 'Hide completed' }}<br>  &lt;/button&gt;<br>&lt;/template&gt;<br><br><br>&lt;script setup&gt;<br>import { ref, watch } from 'vue'<br><br>const todoId = ref(1)<br>const todoData = ref(null)<br><br>async function fetchData() {<br>  todoData.value = null<br>  const res = await fetch(<br>    `https://jsonplaceholder.typicode.com/todos/${todoId.value}`<br>  )<br>  todoData.value = await res.json()<br>}<br><br>fetchData()<br><br>watch(todoId, fetchData)<br>&lt;/script&gt;<br><br>&lt;template&gt;<br>  &lt;p&gt;Todo id: {{ todoId }}&lt;/p&gt;<br>  &lt;button @click="todoId++"&gt;Fetch next todo&lt;/button&gt;<br>  &lt;p v-if="!todoData"&gt;Loading...&lt;/p&gt;<br>  &lt;pre v-else&gt;{{ todoData }}&lt;/pre&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></tbody></table></figure><p>vue3.2</p><ul><li>语法 setup defineProps defineEmit defineExpose v-memo style v-bind</li></ul><p>setup</p><ul><li><p>语法糖</p></li><li><p><code>setup(){} return{ x,y,z }</code></p></li><li><p>简化vue2配置项的写法 组件只需引入不用注册，属性和方法也不用返回 也不用写setup函数，也不用写<strong>export</strong> <strong>default</strong> ， 甚至是自定义指令也可以在我们的<strong>template</strong>中自动获得 不再需要进行return</p></li><li><p>使用</p><ul><li><code>&lt;script setup&gt;</code> 声明的<strong>顶层的绑定 (包括声明的变量，函数声明，以及 import 引入的内容)</strong> 都可以在模板中直接使用<ul><li>普通的 <code>&lt;script&gt;</code> 只在组件被首次引入的时候仅执行一次不同</li><li><code>&lt;script setup&gt;</code>中的代码会在每次组件实例被创建的时候执行 初始化的赋值等在组件每次实例创建时都重新执行一次</li></ul></li></ul></li><li><p>特点</p><ul><li>自动注册 无需要像vue2<code>componets:{ xxxx }</code>注册 只要导入</li></ul></li><li><p>注意</p><ul><li>不需要 this.XX的形式去使用</li><li>return 返回他的值</li><li>setup的两个参数 一个是props 一个是content 全局上下文</li></ul></li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//vue3</span><br><span class="hljs-comment">// 方法一</span><br>&lt;script setup&gt; <span class="hljs-comment">// 里面的代码编译成组件setup</span><br>  	<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span><br>		<span class="hljs-keyword">let</span> str = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'String'</span>)<br> &lt;/script&gt; <br><br><span class="hljs-comment">// 配置项  方法二</span><br><span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>){<br>  <span class="hljs-comment">// data</span><br>  <span class="hljs-keyword">let</span> num = <span class="hljs-number">1000</span>;<br>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'String'</span>;<br>  <span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]  <br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params"></span>){ <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(setup) }<br>}<br><span class="hljs-keyword">return</span>{<br>  num,str,arr,fn<br>}<br><br><span class="hljs-comment">//vue2</span><br><span class="hljs-comment">// 数据源</span><br><span class="hljs-title function_">data</span>(<span class="hljs-params"></span>){ <span class="hljs-keyword">return</span>{} }<br><span class="hljs-attr">methods</span>:{}<br><span class="hljs-attr">created</span>:{}<br><span class="hljs-attr">computed</span>:{}<br>...<br></code></pre></td></tr></tbody></table></figure><p>组件通信</p><ul><li>defineProps Props传参 父 =&gt; 子</li><li>defineEmit 事件传参 子 =&gt; 父</li><li>defineExpose 组件暴露出自己的属性</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// defineProps </span><br><span class="hljs-comment">// 父</span><br>&lt;son :title=<span class="hljs-string">"msg"</span>&gt;<br><br><span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span><br><span class="hljs-keyword">import</span> son <span class="hljs-keyword">from</span> <span class="hljs-string">'./son.vue'</span><br><span class="hljs-keyword">const</span> msg = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'Message'</span>)<br><br><span class="hljs-comment">// 子</span><br>h1{{ props.<span class="hljs-property">title</span> }}<br><span class="hljs-keyword">import</span> { defineProps } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span><br><span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>({<br>  <span class="hljs-attr">title</span>:{<br>    <span class="hljs-attr">type</span>:<span class="hljs-title class_">String</span> <span class="hljs-comment">// props.title</span><br>  },<br>  <span class="hljs-attr">info</span>:{<br>    <span class="hljs-attr">type</span>:<span class="hljs-title class_">String</span>,<br>    <span class="hljs-attr">default</span>:<span class="hljs-string">'----'</span><br>  }<br>})<br></code></pre></td></tr></tbody></table></figure><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// defineEmit</span><br><span class="hljs-comment">// 父</span><br>&lt;son @getChild=<span class="hljs-string">"getChild"</span>&gt;&lt;/son&gt;<br><br><span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span><br><span class="hljs-keyword">import</span> son <span class="hljs-keyword">from</span> <span class="hljs-string">'./Son.vue'</span><br><span class="hljs-keyword">let</span> data = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">getChild</span> = (<span class="hljs-params">e</span>) =&gt;{<br>  data.<span class="hljs-property">value</span> = e <span class="hljs-comment">// 子组件的值</span><br>}<br><br><span class="hljs-comment">// 子</span><br>&lt;button @click=<span class="hljs-string">"toEmits"</span>&gt;点击 子传父&lt;/button&gt;<br><br><span class="hljs-keyword">import</span> { defineEmits,ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span><br><span class="hljs-comment">// 定义</span><br><span class="hljs-keyword">const</span> emit = <span class="hljs-title function_">defineEmits</span>([<span class="hljs-string">'getChild'</span>])<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">toEmits</span> = (<span class="hljs-params"></span>) =&gt;{<br>  <span class="hljs-title function_">emit</span>(<span class="hljs-string">'getChild'</span>,<span class="hljs-string">'要传递的参数'</span>)<br>}<br><span class="hljs-keyword">let</span> hander1Click=():<span class="hljs-function"><span class="hljs-params">void</span>=&gt;</span>{<br>    $myemit(<span class="hljs-string">'myAdd'</span>,<span class="hljs-string">'新增的数据'</span>)<br>}<br></code></pre></td></tr></tbody></table></figure><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// defineExpose</span><br><span class="hljs-comment">// 子</span><br><span class="hljs-keyword">import</span> {ref, defineExpose, reactive} <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span><br><br><span class="hljs-keyword">let</span> obj = <span class="hljs-title function_">reactive</span>({<br>  <span class="hljs-attr">name</span>: <span class="hljs-string">'zs'</span>,<br>  <span class="hljs-attr">age</span>: <span class="hljs-number">18</span><br>})<br><span class="hljs-keyword">let</span> msg = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'Message'</span>);<br><br><span class="hljs-title function_">defineExpose</span>({<br>  obj,<br>  msg<br>})<br><span class="hljs-comment">// 父</span><br>&lt;button @click=<span class="hljs-string">"parExpose"</span>&gt; <span class="hljs-comment">// 方法</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">son</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"par"</span> /&gt;</span></span>  <span class="hljs-comment">// 元素</span><br><br><span class="hljs-keyword">import</span> son <span class="hljs-keyword">from</span> <span class="hljs-string">'./Son.vue'</span><br><span class="hljs-keyword">import</span> {ref,defineEmits,defineProps} <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span><br><br>cons par = <span class="hljs-title function_">ref</span>()<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">parExpose</span> = (<span class="hljs-params"></span>) =&gt;{<br>  <span class="hljs-comment">// par.value.obj</span><br>  <span class="hljs-comment">// par.value.msg</span><br>}<br></code></pre></td></tr></tbody></table></figure><p>新增指令 v-memo 记住一个模板的子树,元素和组件上都可以使用</p><ul><li>缓存模板中的一部分数据。 只创建一次，以后就不会再更新了。也就是说用内存换取时间</li></ul><p>style v-bind</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;template&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span> 有开始循环了-开端 <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>  <br>&lt;/template&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">import</span> { reactive } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">color</span>: <span class="hljs-string">'red'</span></span></span><br><span class="language-javascript"><span class="language-xml">  })</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="language-css"><span class="language-xml">  <span class="hljs-selector-tag">span</span> {</span></span><br><span class="language-css"><span class="language-xml">    <span class="hljs-comment">/* 使用v-bind绑定state中的变量 */</span></span></span><br><span class="language-css"><span class="language-xml">    <span class="hljs-attribute">color</span>: <span class="hljs-built_in">v-bind</span>(<span class="hljs-string">'state.color'</span>);</span></span><br><span class="language-css"><span class="language-xml">  }  </span></span><br><span class="language-css"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><br></code></pre></td></tr></tbody></table></figure><p>hook函数</p><ul><li>vue3 hook 相当于 vue2 的 mixin, 不同在与 hooks 是函数</li><li>Vue3 的 hook函数 可以帮助我们提高代码的复用性, 让我们能在不同的组件中都利用 hooks 函数</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs js">hooks/use.<span class="hljs-property">js</span><br><span class="hljs-keyword">import</span> {reactive, onMounted, onBeforeUnmount} <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span><br><span class="hljs-keyword">export</span>  <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {<br>    <span class="hljs-comment">//展示的数据  可以通过App.vue 界面去隐藏</span><br>    <span class="hljs-keyword">let</span> point = <span class="hljs-title function_">reactive</span>({<br>        <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,<br>        <span class="hljs-attr">y</span>: <span class="hljs-number">0</span><br>    })<br>    <span class="hljs-comment">//获取鼠标点击事件</span><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">savePonint</span>(<span class="hljs-params">event</span>) {<br>        point.<span class="hljs-property">x</span> = event.<span class="hljs-property">pageX</span><br>        point.<span class="hljs-property">y</span> = event.<span class="hljs-property">pageY</span><br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(event.<span class="hljs-property">pageX</span>, event.<span class="hljs-property">pageY</span>)<br>    }<br>    <span class="hljs-comment">//现实之后调用 挂载完毕</span><br>    <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {<br>        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, savePonint)<br>    })<br>    <span class="hljs-comment">//在隐藏之前调用 卸载之前</span><br>    <span class="hljs-title function_">onBeforeUnmount</span>(<span class="hljs-function">() =&gt;</span> {<br>        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'click'</span>, savePonint)<br>    })<br>    <span class="hljs-keyword">return</span> point<br>}<br><br>&lt;template&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>当前求和:{{ sum }}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"sum++"</span>&gt;</span>点我加一<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br>  &lt;hr&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>当前鼠标点击坐标为:x:{{ point.x }},y:{{ point.y }}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br>&lt;/template&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">import</span> {ref} <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-comment">//复用的usePoint</span></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">import</span> usePoint <span class="hljs-keyword">from</span> <span class="hljs-string">"../hooks/usePoint"</span>;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-attr">name</span>: <span class="hljs-string">'App'</span>,</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) {</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-comment">//数据</span></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">let</span> sum = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">let</span> point = <span class="hljs-title function_">usePoint</span>()</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">return</span> {sum,point}</span></span><br><span class="language-javascript"><span class="language-xml">  },</span></span><br><span class="language-javascript"><span class="language-xml">}</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></tbody></table></figure><p>toRefs</p><h2 id="vue库"><a href="#vue库" class="headerlink" title="vue库"></a>vue库</h2><ul><li><input disabled type="checkbox"> Vue 没有内置支持防抖和节流，但可以使用 <a target="_blank" rel="noopener" href="https://lodash.com/">Lodash</a> 等库来实现</li><li><input disabled type="checkbox"></li></ul></div><div class="prev-or-next"><div class="post-foot-next"><a href="/%E5%B7%A5%E5%85%B7%E7%AF%87/Vim.html" target="_self"><i class="iconfont icon-chevronleft"></i> <span>上一页</span></a></div><div class="post-attach"><span class="post-pubtime"><i class="iconfont icon-updatetime mr-10" title="更新时间"></i> 2022-10-20 10:31:20 </span><span class="post-tags"><i class="iconfont icon-tags mr-10" title="标签"></i> <span class="span--tag mr-8"><a href="/tags/vue3/" title="vue3">#vue3</a></span></span></div><div class="post-foot-prev"><a href="/%E8%AF%AD%E6%B3%95%E7%AF%87/vue2.html" target="_self"><span>下一页</span> <i class="iconfont icon-chevronright"></i></a></div></div></div><div id="btn-catalog" class="btn-catalog"><i class="iconfont icon-catalog"></i></div><div class="post-catalog hidden" id="catalog"><div class="title">目录</div><div class="catalog-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#vue3"><span class="toc-text">vue3</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue%E5%BA%93"><span class="toc-text">vue库</span></a></li></ol></div></div><script src="/js/catalog.js"></script><div class="comments-container"></div></div><div class="footer"><div class="social"><ul><li><a title="github" target="_blank" rel="noopener" href="https://github.com/heweiliang88"><i class="iconfont icon-github"></i></a></li><li><a title="email" href=""><i class="iconfont icon-envelope"></i></a></li><li><a title="facebook" href=""><i class="iconfont icon-facebooksquare"></i></a></li><li><a title="twitter" href=""><i class="iconfont icon-twitter"></i></a></li><li><a title="wechat" href=""><i class="iconfont icon-wechat"></i></a></li><li><a title="weibo" href=""><i class="iconfont icon-weibo"></i></a></li></ul></div><div class="footer-more"><a target="_blank" rel="noopener" href="https://github.com/zchengsite/hexo-theme-oranges">Copyright © 2022 cloud</a></div><div class="footer-more"><a target="_blank" rel="noopener" href="https://github.com/zchengsite/hexo-theme-oranges">Theme by Oranges | Powered by Hexo</a></div></div></div><div class="tools-bar"><div class="back-to-top tools-bar-item hidden"><a href="javascript: void(0)"><i class="iconfont icon-chevronup"></i></a></div><script src="/js/backtotop.js"></script><div class="search-icon tools-bar-item" id="search-icon"><a href="javascript: void(0)"><i class="iconfont icon-search"></i></a></div><div class="search-overlay hidden"><div class="search-content" tabindex="0"><div class="search-title"><span class="search-icon-input"><a href="javascript: void(0)"><i class="iconfont icon-search"></i> </a></span><input type="text" class="search-input" id="search-input" placeholder="搜索..."> <span class="search-close-icon" id="search-close-icon"><a href="javascript: void(0)"><i class="iconfont icon-close"></i></a></span></div><div class="search-result" id="search-result"></div></div></div><script type="text/javascript">var inputArea=document.querySelector("#search-input"),searchOverlayArea=document.querySelector(".search-overlay");function openOrHideSearchContent(){searchOverlayArea.classList.contains("hidden")?(searchOverlayArea.classList.remove("hidden"),document.body.classList.add("hidden")):(searchOverlayArea.classList.add("hidden"),document.body.classList.remove("hidden"))}function blurSearchContent(e){e.target===searchOverlayArea&&openOrHideSearchContent()}inputArea.onclick=function(){getSearchFile(),this.onclick=null},inputArea.onkeydown=function(){if(13==event.keyCode)return!1},document.querySelector("#search-icon").addEventListener("click",openOrHideSearchContent,!1),document.querySelector("#search-close-icon").addEventListener("click",openOrHideSearchContent,!1),searchOverlayArea.addEventListener("click",blurSearchContent,!1);var searchFunc=function(e,t,n){"use strict";var r=document.getElementById(t),a=document.getElementById(n);a.innerHTML="<ul><span class='local-search-empty'>首次搜索，正在载入索引文件，请稍后……<span></ul>",$.ajax({url:e,dataType:"xml",success:function(e){var t=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get();a.innerHTML="",r.addEventListener("input",function(){var u='<ul class="search-result-list">',h=this.value.trim().toLowerCase().split(/[\s\-]+/);if(a.innerHTML="",!(this.value.trim().length<=0)){if(t.forEach(function(e){var n,r,a=!0,t=(e.title&&""!==e.title.trim()||(e.title="Untitled"),e.title.trim()),c=t.toLowerCase(),s=e.content.trim().replace(/<[^>]+>/g,""),i=s.toLowerCase(),e=e.url,l=-1,o=-1;""!==i?h.forEach(function(e,t){n=c.indexOf(e),l=i.indexOf(e),n<0&&l<0?a=!1:(l<0&&(l=0),0==t&&(o=l))}):a=!1,a&&(u+="<li><a href='"+e+"' class='search-result-title'>"+t+"</a>",0<=o&&(e=o+80,(e=0==(t=(t=o-20)<0?0:t)?100:e)>s.length&&(e=s.length),r=s.substr(t,e),h.forEach(function(e){var t=new RegExp(e,"gi");r=r.replace(t,'<span class="search-keyword">'+e+"</span>")}),u+='<p class="search-result-abstract">'+r+"...</p>"),u+="</li>")}),-1===(u+="</ul>").indexOf("<li>"))return a.innerHTML="<ul><span class='local-search-empty'>没有找到内容，请尝试更换检索词。<span></ul>";a.innerHTML=u}})},error:function(e,t,n){a.innerHTML="",404===e.status?a.innerHTML="<ul><span class='local-search-empty'>未找到search.xml文件，具体请参考：<a href='https://github.com/zchengsite/hexo-theme-oranges#configuration' target='_black'>configuration</a><span></ul>":a.innerHTML="<ul><span class='local-search-empty'>请求失败，尝试重新刷新页面或稍后重试。<span></ul>"}}),$(document).on("click","#search-close-icon",function(){$("#search-input").val(""),$("#search-result").html("")})},getSearchFile=function(){searchFunc("/search.xml","search-input","search-result")}</script><div class="tools-bar-item theme-icon" id="switch-color-scheme"><a href="javascript: void(0)"><i id="theme-icon" class="iconfont icon-moon"></i></a></div><script src="/js/colorscheme.js"></script><div class="share-icon tools-bar-item"><a href="javascript: void(0)" id="share-icon"><i class="iconfont iconshare"></i></a><div class="share-content hidden"><a class="share-item" href="https://twitter.com/intent/tweet?text=' + (syntax)vue3 + '&url=' + http%3A%2F%2Fexample.com%2F%25E8%25AF%25AD%25E6%25B3%2595%25E7%25AF%2587%2Fvue3.html + '" target="_blank" title="Twitter"><i class="iconfont icon-twitter"></i> </a><a class="share-item" href="https://www.facebook.com/sharer.php?u=http://example.com/%E8%AF%AD%E6%B3%95%E7%AF%87/vue3.html" target="_blank" title="Facebook"><i class="iconfont icon-facebooksquare"></i></a></div></div><script src="/js/shares.js"></script></div></div></body></html>